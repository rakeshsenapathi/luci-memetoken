"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8330],{53636:function(e,t,n){var r=n(63956),i=n(54423),a=n(93981),s=n(87821),l=n(25546),o=n(29541),c=["currency"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.currency,n=void 0===t||t,r=(0,i.Z)(e,c),d=a.useMemo((function(){return","===l.A5?".":","}),[]);return(0,o.jsx)(s.Z,u(u({displayType:"text",prefix:n?"$":""},r),{},{decimalSeparator:l.A5,thousandSeparator:d}))}},8330:function(e,t,n){n.d(t,{Z:function(){return ze}});var r=n(27195),i=n(97620),a=n(8857),s=n.n(a),l=n(73360),o=n(7761),c=n(43165),d=n(14518),u=n(93981),m=n(13215),x=n(87821),f=n(4246),v=n(35682),h=n(72215),p=n(25224),b=n(7744),g=n(13838),w=n(13170),j=n(69667),y=n(24201),k=n(25546),N=n(99438),P=n(26260),S=n(3561),C=n(70107),M=n(59978),Z=n(45462),O=n(33130),T=n(66956),A=n(41118),V=n(71932),F=n(88381),I=n(49488),_=n(82574),D=n(3011),B=n(40993),L=n(90342),R=n(57722),K=n(45009),E=n(29541),H=3e5,U=function(e){var t=e.data,n=e.fillHistory,i=t.nextCycleAt,a=t.isLaunchToken,l=t.publicKey,c=t.warnings,d=c.tooFarFromExecution,m=c.lessThanDCALimit,x=u.useMemo((function(){return l.toBase58()}),[l]),f=(0,K.a)(["dca-errors",m,x],(0,r.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://errors.jup.ag/logs?service=dca&accountID=".concat(x));case 2:if(!(t=e.sent).ok){e.next=8;break}return e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n.data.length?n.data[0].friendlyError:void 0);case 8:case"end":return e.stop()}}),e)}))),{enabled:!m,keepPreviousData:!0,retry:5,retryDelay:2e3}).data,v=u.useMemo((function(){var e=(new Date).getTime(),t=i&&e-i.getTime()>H,r=(null===n||void 0===n?void 0:n.length)&&e-n[0].confirmedAt.getTime()>H;return t&&r}),[n,i]);return m?(0,E.jsx)("div",{className:"rounded-lg bg-v2-lily/5 p-5 space-y-2  border border-v2-lily/5 mb-2",children:(0,E.jsxs)("div",{className:"text-warning text-xs flex space-x-1",children:[(0,E.jsx)("div",{className:"w-3 h-3 mt-0.5",children:(0,E.jsx)(V.Z,{width:12,height:12})}),(0,E.jsx)("div",{children:o.ag._("Jupiter is not filling this DCA because the value per order is less than {ACTIVE_DCA_MINIMUM_VALUE_PER_ORDER} USD",{ACTIVE_DCA_MINIMUM_VALUE_PER_ORDER:R.hl})})]})}):f&&v?(0,E.jsx)("div",{className:"rounded-lg bg-v2-lily/5 p-5 space-y-2  border border-v2-lily/5 mb-2",children:(0,E.jsxs)("div",{className:"text-warning text-xs flex space-x-1",children:[(0,E.jsx)("div",{className:"w-3 h-3 mt-0.5",children:(0,E.jsx)(V.Z,{width:12,height:12})}),(0,E.jsx)("div",{className:"flex flex-col space-y-1",children:(0,E.jsx)("div",{children:f})})]})}):d&&!a?(0,E.jsx)("div",{className:"rounded-lg bg-v2-lily/5 p-5 space-y-2  border border-v2-lily/5 mb-2",children:(0,E.jsxs)("div",{className:"text-warning text-xs flex space-x-1",children:[(0,E.jsx)("div",{className:"w-3 h-3 mt-0.5",children:(0,E.jsx)(V.Z,{width:12,height:12})}),(0,E.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,E.jsx)("span",{children:o.ag._("Jupiter tried to execute your order multiple times but could not do so. This can happen when:")}),(0,E.jsxs)("div",{className:"flex space-x-1",children:[(0,E.jsx)("span",{children:o.ag._("-")}),(0,E.jsx)("span",{children:o.ag._("The market no longer exists")})]}),(0,E.jsxs)("div",{className:"flex space-x-1",children:[(0,E.jsx)("span",{children:o.ag._("-")}),(0,E.jsx)("span",{children:o.ag._("The market price is out of the range of your advanced pricing strategy")})]}),(0,E.jsxs)("div",{className:"flex space-x-1",children:[(0,E.jsx)("span",{children:o.ag._("-")}),(0,E.jsx)("span",{children:o.ag._("The market is extremely volatile")})]}),(0,E.jsx)("div",{className:"pt-3",children:(0,E.jsx)("span",{className:"italic",children:o.ag._("Note that this DCA will continue to be attempted and your end date may be extended until your deposited tokens are fully utilized")})})]})]})}):null},q=n(91799),G=n(11711),W=function(e){var t,n,a=e.dcaClient,l=e.data,c=e.fillHistory,m=e.hideButtons,x=(0,G.NL)(),v=(0,h.Os)().publicKey,b=(0,D.KO)(_.P.refetchId),w=(0,i.Z)(b,1)[0],j=(0,h.Bn)().connection,y=u.useState(!1),N=(0,i.Z)(y,2),P=N[0],S=N[1],C=(0,h.C9)(),Z=(0,O.R3)(),R=(0,D.KO)(B.yz),K=(0,i.Z)(R,1)[0],H=(0,L.gs)().priorityLevel,W=(0,I.QX)().isReady,Q=u.useMemo((function(){return null===l||void 0===l?void 0:l.outRemaining.gt(0)}),[null===l||void 0===l?void 0:l.outRemaining]),Y=u.useCallback((0,r.Z)(s().mark((function e(){var t,n,r,i,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Q&&l&&v){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,a.withdraw({user:v,dca:l.publicKey,outputMint:l.outputToken.address,withdrawOutAmount:null===l||void 0===l?void 0:l.outRemainingInBN});case 5:return t=e.sent,n=t.tx,e.next=9,j.getLatestBlockhash("confirmed");case 9:return r=e.sent,i=r.blockhash,c=r.lastValidBlockHeight,n.recentBlockhash=i,n.lastValidBlockHeight=c,n.feePayer=v,e.next=17,Z(n,{blockhash:i,lastValidBlockHeight:c,idl:f.xO,idlProgramId:f.PN["mainnet-beta"]},{errorMessage:o.ag._("Failed to withdraw balances. Please try again."),submittingMessage:o.ag._("Withdrawing balances"),successMessage:o.ag._("Successfully withdrawed {0} {1}",{0:l.outRemaining.toString(),1:l.outputToken.symbol}),referenceFee:"MEDIUM"===H?K.dca.m:"HIGH"===H?K.dca.h:"VERY_HIGH"===H?K.dca.vh:void 0});case 17:x.invalidateQueries({queryKey:["dca"]}),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0);case 23:if(e.prev=23,l){e.next=26;break}return e.abrupt("return");case 26:return C([l.inputToken.address,l.outputToken.address]),e.finish(23);case 28:case"end":return e.stop()}}),e,null,[[0,20,23,28]])}))),[Q,l,v,a,j,Z,x,H,K.dca.m,K.dca.h,K.dca.vh,C]),z=u.useCallback((0,r.Z)(s().mark((function e(){var t,n,r,i,c,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l&&v){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,a.closeDCA({dca:l.publicKey,user:v});case 5:return t=e.sent,n=t.tx,e.next=9,j.getLatestBlockhash("confirmed");case 9:return r=e.sent,i=r.blockhash,c=r.lastValidBlockHeight,n.recentBlockhash=i,n.lastValidBlockHeight=c,n.feePayer=v,e.next=17,Z(n,{blockhash:i,lastValidBlockHeight:c,idl:f.xO,idlProgramId:f.PN["mainnet-beta"]},{errorMessage:o.ag._("Failed to close order. Please try again."),submittingMessage:o.ag._("Closing DCA order"),successMessage:o.ag._("Successfully closed order"),referenceFee:"MEDIUM"===H?K.dca.m:"HIGH"===H?K.dca.h:"VERY_HIGH"===H?K.dca.vh:void 0,minimumFee:B.uo,requestComputeBudgetLimit:3e5});case 17:d=e.sent,d.success&&x.setQueryData(["dca",null===v||void 0===v?void 0:v.toString(),w],(function(e){return e?e.filter((function(e){return!e.publicKey.equals(l.publicKey)})):e})),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),console.log(e.t0);case 25:if(e.prev=25,l){e.next=28;break}return e.abrupt("return");case 28:return C([l.inputToken.address,l.outputToken.address]),e.finish(25);case 30:case"end":return e.stop()}}),e,null,[[0,22,25,30]])}))),[j,l,a,Z,H,v,x,K.dca.h,K.dca.m,K.dca.vh,C,w]),J=(0,T.b)(null===l||void 0===l?void 0:l.inputToken,null===l||void 0===l?void 0:l.outputToken).baseTokenInfo,$=u.useMemo((function(){var e;if(!A.d.find((function(e){var t,n;return e===(null===l||void 0===l||null===(t=l.inputToken)||void 0===t?void 0:t.address)||e===(null===l||void 0===l||null===(n=l.outputToken)||void 0===n?void 0:n.address)})))return null;var t=(null===l||void 0===l||null===(e=l.inputToken)||void 0===e?void 0:e.address)===(null===J||void 0===J?void 0:J.address);return{isFromBase:Boolean(t)}}),[null===J||void 0===J?void 0:J.address,null===l||void 0===l||null===(t=l.inputToken)||void 0===t?void 0:t.address,null===l||void 0===l||null===(n=l.outputToken)||void 0===n?void 0:n.address]);if(!l)return null;var X=l.inputToken,ee=l.outputToken,te=l.warnings,ne=te.hasUnknownToken,re=(te.tooFarFromExecution,te.lessThanDCALimit,l.createdAt),ie=l.totalFilled,ae=l.cycleFrequency,se=l.inWithdrawn,le=l.outWithdrawn,oe=l.outRemaining,ce=l.initialDeposited,de=l.avgPrice,ue=l.inverseAvgPrice,me=l.balance,xe=l.cyclesLeft,fe=l.filledPercentage,ve=l.nextCycleAt,he=l.minOutAmount,pe=l.maxOutAmount,be=l.inRemaining,ge=l.isLaunchToken,we=l.inAmountPerCycle;l.publicKey;return(0,E.jsxs)("div",{className:"bg-[#161B27] p-6 text-xs",children:[ne?(0,E.jsx)("div",{className:"rounded-lg bg-v2-lily/5 p-5 space-y-2  border border-v2-lily/5 mb-2",children:(0,E.jsxs)("div",{className:"text-warning text-xs flex space-x-1",children:[(0,E.jsx)("div",{className:"w-3 h-3 mt-0.5",children:(0,E.jsx)(V.Z,{width:12,height:12})}),(0,E.jsx)("span",{children:o.ag._("One or both tokens in your order can no longer be found on the token list.")})]})}):null,(0,E.jsx)(U,{data:l,fillHistory:c}),(0,E.jsxs)("div",{className:"rounded-lg bg-v2-lily/5 p-5 space-y-2  border border-v2-lily/5",children:[(0,E.jsxs)("div",{className:"flex justify-between",children:[(0,E.jsx)("span",{className:"text-white/50",children:o.ag._("DCA {0} balance",{0:X.symbol})}),(0,E.jsxs)("span",{className:"text-v2-lily/[.75] font-semibold",children:[me.toString()," ",X.symbol]})]}),(0,E.jsxs)("div",{className:"flex justify-between",children:[(0,E.jsx)("span",{className:"text-white/50",children:o.ag._("DCA {0} balance",{0:ee.symbol})}),(0,E.jsxs)("span",{className:"text-v2-lily/[.75] font-semibold",children:[oe.toString()," ",ee.symbol]})]}),(0,E.jsxs)("div",{className:"flex justify-between",children:[(0,E.jsx)("span",{className:"text-white/50",children:o.ag._("Amount Withdrawn")}),se?(0,E.jsxs)("div",{className:"flex flex-col",children:[(0,E.jsx)("span",{className:"text-v2-lily/[.75] font-semibold text-right",children:se?"".concat(se.toString()," ").concat(X.symbol):null}),(0,E.jsxs)("span",{className:"text-v2-lily/[.75] font-semibold text-right",children:[le.toString()," ",ee.symbol]})]}):(0,E.jsxs)("span",{className:"text-v2-lily/[.75] font-semibold text-right",children:[le.toString()," ",ee.symbol]})]})]}),(0,E.jsxs)("div",{className:"mt-5 space-y-3 text-v2-lily/30",children:[(0,E.jsxs)("div",{className:"flex justify-between",children:[(0,E.jsx)("span",{children:o.ag._("Total Deposited")}),(0,E.jsxs)("span",{children:[p.uf.format(ce.toNumber())," ",X.symbol]})]}),(0,E.jsxs)("div",{className:"flex justify-between",children:[(0,E.jsx)("span",{children:o.ag._("Total Spent")}),(0,E.jsxs)("span",{children:[p.uf.format(ie.toNumber())," ",X.symbol," (",new g.Z(fe).mul(100).round().toNumber(),"%)"]})]}),(0,E.jsxs)("div",{className:"flex justify-between",children:[(0,E.jsx)("span",{children:o.ag._("Each order size")}),(0,E.jsxs)("span",{children:[we.toString()," ",X.symbol]})]}),de.isNaN()?null:(0,E.jsxs)("div",{className:"flex justify-between",children:[(0,E.jsx)("span",{children:be.eq(0)?o.ag._("Average Price"):o.ag._("Current Average Price")}),(0,E.jsx)("span",{className:"cursor-pointer hover:text-v2-primary",onClick:function(){return S(!P)},children:P?o.ag._("{0}  {1} per {2}",{0:(0,F.M)({value:+ue.toSignificantDigits(6)}),1:ee.symbol,2:X.symbol}):o.ag._("{0}  {1} per {2}",{0:(0,F.M)({value:+de.toSignificantDigits(6)}),1:X.symbol,2:ee.symbol})})]}),(0,E.jsx)(q.Z,{}),(0,E.jsxs)("div",{className:"flex justify-between",children:[(0,E.jsx)("span",{children:o.ag._("Buying")}),(0,E.jsxs)("div",{className:"flex space-x-1",children:[(0,E.jsx)(M.Z,{info:ee,width:16,height:16}),(0,E.jsx)("span",{children:ee.symbol})]})]}),(0,E.jsxs)("div",{className:"flex justify-between",children:[(0,E.jsx)("span",{children:o.ag._("Interval")}),(0,E.jsx)("span",{children:o.ag._("Every {0}(s)",{0:(0,k.FM)(ae)})})]}),(0,E.jsxs)("div",{className:"flex justify-between",children:[(0,E.jsx)("span",{children:o.ag._("# of Orders Left")}),(0,E.jsx)("span",{children:xe.toNumber()})]}),ve?(0,E.jsxs)("div",{className:"flex justify-between",children:[(0,E.jsx)("span",{children:o.ag._("Next Order")}),ge&&ve.toString()===re.toString()&&!W?(0,E.jsx)("span",{children:"Start when trading is enabled"}):(0,E.jsx)("span",{children:(0,d.Z)(ve,"dd MMM y HH:mm")})]}):null,(0,E.jsxs)("div",{className:"flex justify-between",children:[(0,E.jsx)("span",{children:o.ag._("Created")}),(0,E.jsx)("span",{children:(0,d.Z)(re,"dd MMM y HH:mm")})]}),pe?(0,E.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E.jsx)("span",{children:o.ag._("Minimum Price")}),(0,E.jsx)("div",{className:"flex items-center h-2",children:"".concat(pe.toFixed(null!==$&&void 0!==$&&$.isFromBase?ee.decimals:X.decimals)," ").concat(null!==$&&void 0!==$&&$.isFromBase?ee.symbol:X.symbol)})]}):null,he?(0,E.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E.jsx)("span",{children:o.ag._("Maximum Price")}),(0,E.jsx)("div",{className:"flex items-center h-2",children:"".concat(he.toFixed(null!==$&&void 0!==$&&$.isFromBase?ee.decimals:X.decimals)," ").concat(null!==$&&void 0!==$&&$.isFromBase?ee.symbol:X.symbol)})]}):null]}),m?null:(0,E.jsxs)("div",{className:"mt-6 flex flex-col lg:flex-row w-full space-y-2 lg:space-y-0 lg:space-x-3",children:[Q?(0,E.jsx)("button",{onClick:Y,type:"button",className:"w-full px-4 py-1.5 rounded-lg text-sm text-white border border-v2-lily/10 bg-[#121D28] hover:bg-v2-primary/5 hover:bg-gradient-to-r from-[rgba(199,242,132,1))] to-[rgba(0,190,240,1)] dark:hover:border dark:hover:border-v2-primary disabled:opacity-50 disabled:cursor-not-allowed",children:o.ag._("Withdraw balance")}):null,(0,E.jsx)("button",{onClick:z,type:"button",className:"w-full px-4 py-1.5 rounded-lg text-sm text-white border border-v2-lily/10 bg-[#121D28] hover:bg-v2-primary/5 hover:bg-gradient-to-r from-[rgba(199,242,132,1))] to-[rgba(0,190,240,1)] dark:hover:border dark:hover:border-v2-primary",children:l.balance.gt(0)?o.ag._("Close and Withdraw"):o.ag._("Close DCA")})]})]})},Q=n(24628),Y=function(e){var t=e.fillHistory,n=t.inputMint,r=t.outputMint,i=t.inAmount,a=t.outAmount,s=t.confirmedAt,l=t.txId,o=e.inverseRate,c=e.setInverseRate,m=(0,h.Bn)().getTokenInfo,x=(0,h.oP)().getExplorer,f=u.useMemo((function(){return{fromTokenInfo:m(n.toString()),toTokenInfo:m(r.toString())}}),[m,n,r]),v=f.fromTokenInfo,b=f.toTokenInfo,w=u.useMemo((function(){return v?new g.Z(i).div(Math.pow(10,v.decimals)).toString():void 0}),[v,i]),j=u.useMemo((function(){return b?new g.Z(a).div(Math.pow(10,b.decimals)).toString():void 0}),[b,a]),y=u.useMemo((function(){return(0,d.Z)(s,"y/MM/dd HH:mm")}),[s]),N=u.useMemo((function(){return x(l)}),[x,l]),P=(0,u.useMemo)((function(){return v&&b?new g.Z(new g.Z(a).div(Math.pow(10,b.decimals))).div(new g.Z(i).div(Math.pow(10,v.decimals))):new g.Z(0)}),[v,i,a,b]);return(0,E.jsxs)("div",{className:"text-xs flex space-x-4 justify-between",children:[(0,E.jsx)("span",{className:"w-[80px] text-v2-lily/50 flex space-x-1 items-center",children:w?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("span",{children:(0,k.Om)(w,5)}),(0,E.jsx)(M.Z,{info:v,width:16,height:16})]}):"N/A"}),(0,E.jsx)("span",{className:"w-[80px] text-v2-lily/50 flex items-center cursor-pointer hover:text-v2-primary",onClick:function(){return c(!o)},children:P.gt(0)?o?(0,F.M)({value:+new g.Z(1).div(P).toSignificantDigits(6)}):(0,F.M)({value:+P.toSignificantDigits(6)}):"N/A"}),(0,E.jsx)("span",{className:(0,p.cn)("w-[100px] flex space-x-1 items-center",j?"":"text-v2-lily/50"),children:j?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("span",{children:(0,F.M)({value:+new g.Z(j).toSignificantDigits(6)})}),(0,E.jsx)(M.Z,{info:b,width:16,height:16})]}):"N/A"}),(0,E.jsx)("span",{className:"w-[120px] text-v2-lily/50 flex items-center",children:y}),(0,E.jsx)("div",{className:"w-3 flex items-center",children:(0,E.jsx)("a",{href:N,target:"_blank",rel:"noreferrer",className:"w-3 h-5 text-xs text-v2-lily/50 hover:text-v2-primary",children:(0,E.jsx)(Q.Z,{width:12,height:20})})})]})},z=function(e){var t=e.fillHistory,n=u.useState(!0),r=(0,i.Z)(n,2),a=r[0],s=r[1];return(0,E.jsxs)("div",{className:"p-6 bg-[#161B27] min-h-[300px]",children:[(0,E.jsxs)("div",{className:"flex w-full justify-between space-x-4 text-xs text-v2-lily/50",children:[(0,E.jsx)("span",{className:"w-[80px]",children:o.ag._("From")}),(0,E.jsx)("span",{className:"w-[80px]",children:o.ag._("Rate")}),(0,E.jsx)("span",{className:"w-[100px]",children:o.ag._("To")}),(0,E.jsx)("span",{className:"w-[120px]",children:o.ag._("Date/Time")}),(0,E.jsx)("div",{className:"w-3"})]}),(0,E.jsx)("div",{className:"mt-3 space-y-3 max-h-[300px] overflow-y-auto hideScrollbar",children:t&&(null===t||void 0===t?void 0:t.length)>0?null===t||void 0===t?void 0:t.map((function(e){return(0,E.jsx)(Y,{fillHistory:e,inverseRate:a,setInverseRate:s},e.txId)})):(0,E.jsx)("div",{className:"text-v2-lily/50 mt-4 text-xs flex items-center justify-center",children:o.ag._("No filled trades yet.")})})]})},J=n(64508),$=n.n(J),X=n(3955),ee=function(e){var t=e.data,n=e.dcaClient,a=e.hideButtons,l=u.useState(!1),c=(0,i.Z)(l,2),d=c[0],m=c[1],x=u.useState("Overview"),f=(0,i.Z)(x,2),v=f[0],p=f[1],b=t.inputToken,w=t.outputToken,k=t.netDeposited,N=t.filledPercentage,P=t.isLaunchToken,S=t.warnings,C=S.tooFarFromExecution,O=S.hasUnknownToken,T=(0,h.Os)().publicKey,A=(0,h.oP)().getExplorer,F=(0,D.KO)(_.P.refetchId),I=(0,i.Z)(F,1)[0],B=(0,K.a)(["dca-fill-history",null===T||void 0===T?void 0:T.toString(),t.publicKey.toString(),I],(function(){return T?t.fillHistory&&t.fillHistory.length>0?t.fillHistory:n.getFillHistory(t.publicKey.toString()):[]}),{keepPreviousData:!0}).data,L=(0,K.a)(["missing-signatures",t.publicKey.toString()],(0,r.Z)(s().mark((function e(){var n,r,i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://dca-api.jup.ag/missing-signatures/".concat(t.publicKey.toString()));case 3:if(!(n=e.sent).ok){e.next=13;break}return e.next=7,n.json();case 7:if(r=e.sent,i=r.data,!(a=i.missingSignatures).length){e.next=13;break}return e.next=13,fetch("https://dca-api.jup.ag/recover-signatures",{method:"POST",body:JSON.stringify({missingSignatures:a})});case 13:e.next=17;break;case 15:e.prev=15,e.t0=e.catch(0);case 17:case"end":return e.stop()}}),e,null,[[0,15]])}))),{enabled:!1}).refetch,R=u.useMemo((function(){return A(t.publicKey.toString(),"account")}),[A,t.publicKey]);return(0,E.jsxs)("div",{className:"bg-dca-item rounded-lg mb-2",children:[(0,E.jsxs)("button",{className:"flex justify-between items-center h-[64px] w-full text-xs px-2 md:px-4",onClick:function(){d||L(),m((function(e){return!e}))},children:[(0,E.jsxs)("div",{className:"text-left basis-2/12 flex items-center space-x-2",children:[!O&&!C||P?(0,E.jsxs)("div",{className:"flex -space-x-2 cursor-pointer",children:[(0,E.jsx)(M.Z,{info:b,height:20,width:20}),(0,E.jsx)(M.Z,{info:w,height:20,width:20})]}):(0,E.jsx)("div",{className:"text-warning fill-current",children:(0,E.jsx)(V.Z,{height:20,width:20})}),(0,E.jsxs)("div",{className:"flex items-center justify-center space-x-1.5 text-white",children:[(0,E.jsx)("span",{children:b.symbol}),(0,E.jsx)("div",{className:"text-v2-lily/50 fill-current",children:(0,E.jsx)(Z.Z,{width:10,height:10})}),(0,E.jsx)("span",{children:w.symbol})]}),(0,E.jsx)($(),{href:R,target:"_blank",className:"text-v2-lily/50 hover:text-v2-primary",children:(0,E.jsx)(Q.Z,{width:12,height:20})})]}),(0,E.jsxs)("div",{className:"text-white/[.75]",children:[k.toString()," ",b.symbol]}),(0,E.jsxs)("div",{className:"flex space-x-4",children:[(0,E.jsx)("div",{className:"bg-dca-fill-bg w-[60px] md:w-[106px] h-2 rounded-xl overflow-hidden",children:(0,E.jsx)("div",{className:"h-full rounded-xl bg-[#19C5E4]",style:{width:new g.Z(N).mul(100).toNumber()+"%"}})}),(0,E.jsx)("div",{className:(0,y.cn)(["text-v2-lily/[.35] fill-current",d?"":"-rotate-90"]),children:(0,E.jsx)(j.Z,{})})]})]}),(0,E.jsxs)("div",{className:(0,y.cn)("bg-dca-item rounded-b-lg overflow-hidden transition-max-height duration-200",d?"animate-fade-in":"animate-fade-out max-h-[0px]"),children:[(0,E.jsxs)("div",{className:"flex text-sm space-x-2 px-2 md:space-x-4 md:px-4",children:[(0,E.jsx)("button",{type:"button",onClick:function(){return p("Overview")},className:(0,y.cn)("text-v2-lily/50 p-3 border-b-2 border-transparent","Overview"===v?"font-semibold text-white border-b-v2-primary":""),children:o.ag._("Overview")}),(0,E.jsx)("button",{type:"button",onClick:function(){return p("Orders")},className:(0,y.cn)("text-v2-lily/50 p-3 border-b-2 border-transparent","Orders"===v?"font-semibold text-white border-b-v2-primary":""),children:o.ag._("Orders {0}",{0:null!==B&&void 0!==B&&B.length?"(".concat(null===B||void 0===B?void 0:B.length,")"):""})})]}),"Overview"===v?(0,E.jsx)(W,{dcaClient:n,data:t,hideButtons:a,fillHistory:B}):null,"Orders"===v?(0,E.jsx)(z,{fillHistory:B}):null]})]})},te=function(e){var t=e.dca,n=e.dcaClient,r=(0,h.Bn)(),a=r.getTokenInfo,s=r.newTokenListMap,l=(0,h.y6)().tokenPriceMap,c=u.useMemo((function(){return[a(t.account.inputMint.toString()),a(t.account.outputMint.toString())]}),[t.account.inputMint,t.account.outputMint,a]),d=(0,i.Z)(c,2),m=d[0],x=d[1],f=u.useMemo((function(){var e;return l&&m?null===(e=l[null===m||void 0===m?void 0:m.address])||void 0===e?void 0:e.usd:null}),[l,m]),v=(0,T.b)(m,x).baseTokenInfo,p=u.useMemo((function(){if(!A.d.find((function(e){return e===(null===m||void 0===m?void 0:m.address)||e===(null===x||void 0===x?void 0:x.address)})))return null;var e=(null===m||void 0===m?void 0:m.address)===(null===v||void 0===v?void 0:v.address);return{isFromBase:Boolean(e)}}),[null===v||void 0===v?void 0:v.address,null===m||void 0===m?void 0:m.address,null===x||void 0===x?void 0:x.address]),b=u.useMemo((function(){var e=t.account,n=e.inputMint,r=e.outputMint,i=e.createdAt,l=e.cycleFrequency,c=e.outReceived,d=e.outWithdrawn,u=e.inAmountPerCycle,m=e.inDeposited,x=e.inUsed,v=e.inWithdrawn,h=e.nextCycleAt,b=e.nextCycleAmountLeft,w=e.minOutAmount,j=e.maxOutAmount,y=m.sub(v).sub(x),k=a(n.toString()),N=a(r.toString()),P=k?new g.Z(x.toString()).div(Math.pow(10,k.decimals)).toFixed(k.decimals):new g.Z(0),S=N?new g.Z(c.toString()).div(Math.pow(10,N.decimals)).toFixed(N.decimals):new g.Z(0),C=new g.Z(P).div(new g.Z(S)),M=new g.Z(S).div(new g.Z(P)),Z=new g.Z(y.toString()).div(u.toString()).floor(),O=a(n.toString()),T=null!==O&&void 0!==O?O:(0,X.T)({address:n.toString()}),A=a(r.toString()),V=null!==A&&void 0!==A?A:(0,X.T)({address:r.toString()}),F=new g.Z(h.toString()).add(3600).lte(Date.now()/1e3);g.Z.set({rounding:g.Z.ROUND_DOWN});var I=new g.Z(m.div(u).toString()).round(),_=f&&k?new g.Z(m.toString()).div(I).mul(f).div(new g.Z(10).pow(k.decimals)):void 0,D=!!_&&_.lessThan(new g.Z(R.Ye)),B=new g.Z(m.toString()).minus(new g.Z(v.toString())).div(new g.Z(10).pow(T.decimals)),L=new g.Z(x.toString()).div(new g.Z(10).pow(T.decimals)),K=s.has(V.address)||s.has(T.address);return{publicKey:t.publicKey,inputToken:T,outputToken:V,isLaunchToken:K,warnings:{hasUnknownToken:!O||!A,tooFarFromExecution:F,lessThanDCALimit:D},inAmountPerCycle:new g.Z(u.toString()).div(Math.pow(10,T.decimals)),createdAt:new Date(1e3*i.toNumber()),cycleFrequency:l.toNumber(),balance:new g.Z(y.toString()).div(new g.Z(10).pow(T.decimals)),initialDeposited:new g.Z(m.toString()).div(Math.pow(10,T.decimals)),netDeposited:B,totalFilled:L,outReceived:new g.Z(c.toString()).div(new g.Z(10).pow(V.decimals)),outRemainingInBN:c.sub(d),outRemaining:new g.Z(c.sub(d).toString()).div(new g.Z(10).pow(V.decimals)),outWithdrawn:new g.Z(d.toString()).div(new g.Z(10).pow(V.decimals)),inRemaining:new g.Z(m.sub(x).sub(v).toString()).div(new g.Z(10).toPower(T.decimals)),avgPrice:C,inverseAvgPrice:M,filledPercentage:L.div(B),status:L.eq(B)?o.ag._("Completed"):o.ag._("Ongoing"),cyclesLeft:Z,nextCycleAt:new Date(1e3*h.toNumber()),adjustedNextCycleAmountLeft:h?new g.Z(b.toString()).div(new g.Z(10).pow(T.decimals)):null,minOutAmount:function(){var e;if(null!==p&&void 0!==p&&p.isFromBase){if(!j||j.eqn(0))return null;var t=new g.Z(u.toString()).div(Math.pow(10,(null===k||void 0===k?void 0:k.decimals)||0));return new g.Z(j.toString()).div(Math.pow(10,(null===N||void 0===N?void 0:N.decimals)||0)).div(t)}if(!w||w.eqn(0))return null;var n=new g.Z(u.toString()).div(Math.pow(10,null!==(e=null===k||void 0===k?void 0:k.decimals)&&void 0!==e?e:0)),r=new g.Z(w.toString()).div(Math.pow(10,(null===N||void 0===N?void 0:N.decimals)||0));return n.div(r)}(),maxOutAmount:function(){if(null!==p&&void 0!==p&&p.isFromBase){if(!w||w.eqn(0))return null;var e=new g.Z(u.toString()).div(Math.pow(10,(null===k||void 0===k?void 0:k.decimals)||0));return new g.Z(w.toString()).div(Math.pow(10,(null===N||void 0===N?void 0:N.decimals)||0)).div(e)}if(!j||j.eqn(0))return null;var t=new g.Z(u.toString()).div(Math.pow(10,(null===k||void 0===k?void 0:k.decimals)||0)),n=new g.Z(j.toString()).div(Math.pow(10,(null===N||void 0===N?void 0:N.decimals)||0));return t.div(n)}()}}),[t.account,t.publicKey,a,null===p||void 0===p?void 0:p.isFromBase,f,s]);return b?(0,E.jsx)(ee,{data:b,dcaClient:n}):null},ne=function(e){return e instanceof b.PublicKey?e:e?new b.PublicKey(e):void 0},re=n(56100),ie=function(e){var t,n=e.dcaClient,a=e.inputMint,l=e.outputMint,c=(0,h.Os)(),d=(0,D.KO)(_.P.refetchId),u=(0,i.Z)(d,1)[0],m=(0,D.KO)(_.P.isLoading),x=(0,i.Z)(m,2),f=x[0],v=x[1],p=(0,h.Bn)().requestTokenInfo,b=(0,K.a)(["dca",null===(t=c.publicKey)||void 0===t?void 0:t.toString(),u],(0,r.Z)(s().mark((function e(){var t,r,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.publicKey){e.next=19;break}return v(!0),e.prev=2,e.next=5,n.getCurrentByUser(c.publicKey,ne(a),ne(l));case 5:return t=e.sent,r=t.map((function(e){return e.account.inputMint})),i=t.map((function(e){return e.account.outputMint})),e.next=10,p(Array.from(new Set([].concat((0,C.Z)(r),(0,C.Z)(i)))).map((function(e){return e.toString()})));case 10:return e.abrupt("return",t.sort((function(e,t){return t.account.createdAt.cmp(e.account.createdAt)})));case 13:e.prev=13,e.t0=e.catch(2),console.log("DCA List failed to load",e.t0);case 16:return e.prev=16,v(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])}))),{enabled:Boolean(c.publicKey),keepPreviousData:!0}).data;return(0,E.jsxs)("div",{className:"mt-3 relative",children:[f&&!b&&(0,E.jsx)(re.O,{className:"mt-2"}),b&&b.length>0?(0,E.jsx)("div",{className:"w-full border-white/5 overflow-x-auto hideScrollbar",children:b&&(null===b||void 0===b?void 0:b.map((function(e){return(0,E.jsx)(te,{dca:e,dcaClient:n},e.publicKey.toString())})))}):null,b&&b.length>0&&f?(0,E.jsx)("div",{className:"absolute top-0 left-0 bg-black/10 backdrop-blur-sm w-full min-h-[620px]"}):null,0===(null===b||void 0===b?void 0:b.length)?(0,E.jsx)("div",{className:"bg-v2-lily/5 border border-v2-lily/10 rounded-lg text-white/20 text-sm h-full w-full flex items-center justify-center min-h-[180px]",children:(0,E.jsx)("span",{children:o.ag._("You have no active orders")})}):null]})},ae=n(32070),se=n(65558),le=function(e){var t,n=e.dcaClient,a=e.inputMint,l=e.outputMint,c=(0,h.Os)(),d=(0,h.Bn)().getTokenInfo,m=(0,D.KO)(_.P.refetchId),x=(0,i.Z)(m,1)[0],f=(0,D.KO)(_.P.isLoading),v=(0,i.Z)(f,2),p=v[0],b=v[1],w=(0,ae.N)({queryKey:["dcaclosed",null===(t=c.publicKey)||void 0===t?void 0:t.toString(),x],queryFn:function(){var e=(0,r.Z)(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.pageParam,b(!0),c.publicKey){e.next=4;break}return e.abrupt("return",[]);case 4:return e.next=6,n.getClosedByUser(c.publicKey,r,5,ne(a),ne(l)).finally((function(){return b(!1)}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getNextPageParam:function(e){if(e&&e.length>0)return new Date(1e3*e[e.length-1].account.createdAt.toNumber())}}),j=w.data,y=w.isFetching,k=w.hasNextPage,N=w.fetchNextPage,P=u.useMemo((function(){return null!==j&&void 0!==j&&j.pages?null===j||void 0===j?void 0:j.pages.flat().sort((function(e,t){return t.account.createdAt.cmp(e.account.createdAt)})).map((function(e){var t=e.account,n=t.inputMint,r=t.outputMint,i=t.createdAt,a=t.cycleFrequency,s=t.inAmountPerCycle,l=t.inDeposited,o=t.inFilled,c=t.outReceived,u=t.inWithdrawn,m=d(n.toString()),x=d(r.toString());if(!m||!x)return null;var f=new g.Z(l.toString()).div(Math.pow(10,m.decimals)),v=new g.Z(o.toString()).div(Math.pow(10,m.decimals)),h=new g.Z(c.toString()).div(Math.pow(10,x.decimals)),p=new g.Z(u.toString()).div(Math.pow(10,m.decimals)),b=new g.Z(l.toString()).div(new g.Z(10).pow(m.decimals));return{account:e.account,publicKey:e.publicKey,inputToken:m,outputToken:x,isLaunchToken:!1,warnings:{},createdAt:new Date(1e3*i.toNumber()),initialDeposited:f,inAmountPerCycle:new g.Z(s.toString()).div(Math.pow(10,m.decimals)),cycleFrequency:a.toNumber(),outReceived:h,totalFilled:v,inWithdrawn:p,outWithdrawn:h,avgPrice:v.div(h),inverseAvgPrice:h.div(v),filledPercentage:v.div(f),fills:e.fills,netDeposited:b,cyclesLeft:new g.Z(0),balance:new g.Z(0),outRemainingInBN:new se.BN(0),outRemaining:new g.Z(0),inRemaining:new g.Z(0),status:"closed",nextCycleAt:null,adjustedNextCycleAmountLeft:new g.Z(0),closedFills:e.fills}})).filter(Boolean):[]}),[null===j||void 0===j?void 0:j.pages,d]);return p&&!j?(0,E.jsx)(re.O,{className:"mt-2"}):(0,E.jsx)("div",{className:"mt-3 relative",children:P.length>0?(0,E.jsxs)("div",{className:"mt-3 w-full max-h-[400px] border-white/5 overflow-x-auto hideScrollbar",children:[P.map((function(e){return(0,E.jsx)(ee,{data:e,dcaClient:n,hideButtons:!0},e.publicKey.toString())})),y&&(0,E.jsx)(re.O,{}),k&&!y&&(0,E.jsx)("div",{className:"w-full flex items-center justify-center",children:(0,E.jsx)("button",{className:"w-1/2 py-2 rounded-2xl mt-3 text-white/20 text-sm dark:hover:!text-v2-primary",onClick:function(){return N()},children:o.ag._("Load More")})})]}):(0,E.jsx)("div",{className:"mt-3 bg-v2-lily/5 border border-v2-lily/10 rounded-lg text-white/20 text-sm h-full w-full flex items-center justify-center min-h-[180px]",children:(0,E.jsx)("span",{children:o.ag._("You have no closed orders")})})})},oe=n(13246),ce=n(11823),de=n(56720),ue=n(39268),me=n.n(ue),xe=n(72997),fe=n(1242),ve=n(72282),he=n(23632),pe=n(42082),be=n(89521),ge=n(68718),we=n(87148),je=n(3082),ye=function(e){var t,n=e.defaultDuration,r=(0,je.useRouter)(),i=(0,we.Z)(null===r||void 0===r||null===(t=r.query)||void 0===t?void 0:t.period);return{period:(0,u.useMemo)((function(){var e,t;if(null!==r&&void 0!==r&&null!==(e=r.query)&&void 0!==e&&e.period&&i!==(null===r||void 0===r||null===(t=r.query)||void 0===t?void 0:t.period))switch(r.query.period){case"minute":return"minute";case"hour":return"hour";case"day":return"day";case"week":return"week";case"month":return"month";default:return}}),[r.query]),duration:n}},ke=n(50269),Ne=n(54566),Pe=n(71130),Se=n(37124),Ce=n(78013),Me=n(96721),Ze=n(6397),Oe=n(85394),Te=n(60012),Ae=n(69825),Ve=n(95523),Fe=n(40558),Ie=n(55259),_e=n(32044),De=n(63956);function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){(0,De.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Re=n(33118),Ke=n(5564),Ee=n(53636),He=n(43723),Ue=n(55948),qe=n(28940),Ge=function(e){var t,n=e.fromValue,r=e.intervalNumber,i=e.selectedPeriodName,a=e.fromTokenInfo,s=e.toTokenInfo,c=e.orderInfo,d=e.atomFormState,u=e.isLaunchPage,m=e.jupiterResult,x=(0,qe.Z)(),f=x.showSummary,v=x.toggleSummary;return(0,E.jsxs)("div",{className:"w-full",children:[(0,E.jsx)("div",{className:"flex justify-center items-center mb-4 mt-3",children:(0,E.jsxs)("button",{type:"button",onClick:v,className:"flex items-center space-x-2 cursor-pointer text-white/25 hover:text-v2-primary",children:[(0,E.jsx)("div",{className:"h-4 w-4 flex items-center fill-current",children:f?(0,E.jsx)(He.Z,{}):(0,E.jsx)(Ue.Z,{})}),(0,E.jsx)("span",{className:"text-xs font-medium",children:(0,E.jsx)(l.cC,{id:"DCA Summary"})})]})}),f&&(0,E.jsx)("div",{className:"w-full p-5 rounded-lg border border-v2-lily/10 text-xs mt-3",children:(0,E.jsxs)("div",{className:"space-y-1",children:[(0,E.jsxs)("div",{className:"flex justify-between",children:[(0,E.jsx)("span",{className:"text-white/50",children:o.ag._("Sell total")}),(0,E.jsxs)("span",{className:"text-white/[.75]",children:[(0,E.jsx)(Ee.Z,{currency:!1,value:n.floatValue||"-"})," ",a.symbol]})]}),(0,E.jsxs)("div",{className:"flex justify-between",children:[(0,E.jsx)("span",{className:"text-white/50",children:o.ag._("Sell per order")}),(0,E.jsxs)("span",{className:"text-white/[.75] flex space-x-1",children:[(0,E.jsx)(Ee.Z,{currency:!1,value:(null===c||void 0===c?void 0:c.perCycle)||"-"}),(0,E.jsx)("span",{children:a.symbol})]})]}),(0,E.jsxs)("div",{className:"flex justify-between",children:[(0,E.jsx)("span",{className:"text-white/50",children:o.ag._("To buy")}),(0,E.jsx)("span",{className:"text-white/[.75]",children:s.symbol})]}),(0,E.jsxs)("div",{className:"flex justify-between",children:[(0,E.jsx)("span",{className:"text-white/50",children:o.ag._("Order interval")}),(0,E.jsx)("span",{className:"text-white/[.75]",children:o.ag._("{0} {selectedPeriodName}(s)",{0:r.formattedValue,selectedPeriodName:i})})]}),(0,E.jsxs)("div",{className:"flex justify-between",children:[(0,E.jsx)("span",{className:"text-white/50",children:o.ag._("Start date")}),(0,E.jsx)("span",{className:"text-white/[.75]",children:"pre-launch"===(null===d||void 0===d?void 0:d.marketStatus)?o.ag._("Start when trading is enabled"):o.ag._("Immediate")})]}),(0,E.jsxs)("div",{className:"flex justify-between",children:[(0,E.jsx)("span",{className:"text-white/50",children:o.ag._("Estimated end date")}),(0,E.jsx)("span",{className:"text-white/[.75]",children:"pre-launch"===(null===d||void 0===d?void 0:d.marketStatus)?o.ag._("TBD when trading is enabled"):(null===c||void 0===c?void 0:c.endDate)||"-"})]}),!u&&(0,E.jsxs)("div",{className:"flex justify-between",children:[(0,E.jsx)("span",{className:"text-white/50",children:o.ag._("Estimated price impact per order")}),(0,E.jsxs)("span",{className:"text-white/[.75] flex space-x-1",children:[(null===m||void 0===m||null===(t=m.priceImpactPct)||void 0===t?void 0:t.toFixed(2))||"-","%"]})]}),(0,E.jsxs)("div",{className:"flex justify-between",children:[(0,E.jsx)("span",{className:"text-white/50",children:o.ag._("Platform fee")}),(0,E.jsx)("span",{className:"text-v2-primary font-bold",children:"0.1%"})]}),(0,E.jsxs)("div",{className:"py-3 px-4 text-xs bg-black/15 dark:bg-white/5 text-black/75 dark:text-white/75 border border-black/[.15] dark:border-white/[.15] rounded-lg mt-3",children:[(0,E.jsx)(l.cC,{id:"You will receive exactly what you have specified, minus platform fees."}),(0,E.jsx)("a",{className:"ml-1 underline cursor-pointer",href:"https://station.jup.ag/guides/dca/how-dca-work",target:"_blank",children:o.ag._("Learn more")})]})]})})]})},We=me()((function(){return Promise.resolve().then(n.bind(n,60012))}),{ssr:!1,loadableGenerated:{webpack:function(){return[60012]}}}),Qe={fromTokenAddress:"",toTokenAddress:"",period:"minute",fromValue:{formattedValue:"",value:"",floatValue:void 0},intervalNumber:{formattedValue:"1",value:"1",floatValue:1},numberOfOrders:{formattedValue:"2",value:"2",floatValue:2},minValue:{formattedValue:"",value:"",floatValue:void 0},maxValue:{formattedValue:"",value:"",floatValue:void 0}},Ye="PAIRS_SELECT_TO_PAIR_MODAL_ID",ze=function(e){var t=e.inToken,n=e.outToken,a=e.type,C=(0,h.Os)(),M=(0,h.Rc)(),Z=u.useMemo((function(){return new f.DA(M,"mainnet-beta")}),[M]),T=(0,h.C9)(),A=(0,v._)("dca-interval-number",Qe.intervalNumber),V=(0,i.Z)(A,2),I=V[0],H=V[1],U=(0,v._)("dca-period",Qe.period),q=(0,i.Z)(U,2),W=q[0],Q=q[1],Y=(0,v._)("dca-number-of-orders",Qe.numberOfOrders),z=(0,i.Z)(Y,2),J=z[0],$=z[1],ee=(0,D.KO)(fe.dS),te=(0,i.Z)(ee,1)[0].GRAPH_PARAMS,ne=(0,m.cI)({defaultValues:Qe}),ae=ne.control,se=ne.setValue,ue=ne.handleSubmit,me=ne.formState,we=me.isDirty,je=me.isSubmitting,De=ne.watch,Be=(0,ve.hv)().appDomain,Ee=(0,h.Bn)(),He=Ee.getTokenInfo,Ue=Ee.newTokenListMap,qe=Ee.tokenMap,ze=(0,G.NL)(),Je=(0,pe.T)(),$e=(0,h.MG)().constants.MAX_INPUT_LIMIT,Xe=u.useMemo((function(){return Array.from(qe.values()).map((function(e){return e.address}))}),[qe]),et=(0,m.qo)({control:ae,name:"fromValue"}),tt=(0,m.qo)({control:ae,name:"fromTokenAddress"}),nt=(0,m.qo)({control:ae,name:"toTokenAddress"}),rt=(0,m.qo)({control:ae,name:"intervalNumber"}),it=(0,m.qo)({control:ae,name:"period"}),at=(0,m.qo)({control:ae,name:"numberOfOrders"}),st=(0,m.qo)({control:ae,name:"minValue"}),lt=(0,m.qo)({control:ae,name:"maxValue"}),ot="launch-page"===(null===a||void 0===a?void 0:a.mode),ct=(0,Ke.D)([t,n]).tokensWithTransferFee;u.useEffect((function(){var e=De((function(e,t){var n=e.intervalNumber,r=e.numberOfOrders,i=e.period,a=t.name;"intervalNumber"===a?H(n):"period"===a?Q(i):"numberOfOrders"===a&&r&&$(r)}));return function(){return e.unsubscribe()}}),[De,se,H,$,Q]),u.useEffect((function(){se("intervalNumber",I),se("period",W),se("numberOfOrders",J)}),[se]),u.useEffect((function(){t!==n&&(t&&se("fromTokenAddress",t.address),n&&se("toTokenAddress",n.address))}),[t,n,se,Je,tt,nt]);var dt=u.useMemo((function(){return{fromTokenInfo:He(tt)||(0,X.T)({address:tt}),toTokenInfo:He(nt)||(0,X.T)({address:nt})}}),[He,tt,nt]),ut=dt.fromTokenInfo,mt=dt.toTokenInfo,xt=u.useMemo((function(){return R.tc.find((function(e){return e.id===it}))}),[it]),ft=u.useMemo((function(){return{selectedPeriodName:(null===xt||void 0===xt?void 0:xt.name)||"",periodOption:R.tc.map((function(e){return e.id})),secondsInPeriod:(null===xt||void 0===xt?void 0:xt.secondsInPeriod)||0}}),[xt]),vt=ft.selectedPeriodName,ht=ft.periodOption,pt=ft.secondsInPeriod,bt=(0,h.y6)(),gt=bt.tokenPriceMap,wt=bt.getUSDValue,jt=bt.isLatest,yt=u.useMemo((function(){var e,t;if(!ut||!mt)return[null,null];var n=null===(e=gt[ut.address])||void 0===e?void 0:e.usd,r=null===(t=gt[mt.address])||void 0===t?void 0:t.usd;return n||wt(ut.address),r||wt(mt.address),[n,r]}),[ut,wt,mt,gt,jt]),kt=(0,i.Z)(yt,2),Nt=kt[0],Pt=kt[1],St=u.useMemo((function(){if(xt&&rt.value&&ut&&null!==et&&void 0!==et&&et.value&&null!==at&&void 0!==at&&at.value&&(0,p.Hd)(null===at||void 0===at?void 0:at.value)&&(0,p.Hd)(et.value)){var e=new g.Z(et.value).div(at.value).toDP(ut.decimals).toFixed(),t=new g.Z(rt.value).mul(xt.secondsInPeriod),n=Number(at.value)-1,r=(0,c.Z)(new Date,{seconds:new g.Z(t).mul(n).toNumber()});return{perCycle:e,endDate:(0,d.Z)(r,"dd MMM y HH:mm")}}}),[xt,rt.value,ut,et.value,null===at||void 0===at?void 0:at.value]),Ct=u.useMemo((function(){return Ue.has(tt)||Ue.has(nt)}),[Ue,tt,nt]),Mt=(0,h.FB)(tt).balance,Zt=(0,h.FB)(nt).hasBalance,Ot=u.useMemo((function(){return!(null===ut||void 0===ut?void 0:ut.decimals)||new g.Z((null===et||void 0===et?void 0:et.floatValue)||0).lessThanOrEqualTo(Mt)}),[Mt,null===ut||void 0===ut?void 0:ut.decimals,null===et||void 0===et?void 0:et.floatValue]),Tt=u.useCallback((function(){var e=new g.Z(Mt);tt===w.W4.toBase58()&&(e=e.minus(de.WO)),se("fromValue",{floatValue:e.toNumber(),formattedValue:e.toString(),value:e.toString()})}),[Mt,tt,se]),At=u.useMemo((function(){return null===ut||void 0===ut?void 0:ut.symbol}),[ut]),Vt=u.useMemo((function(){return null===mt||void 0===mt?void 0:mt.symbol}),[mt]),Ft=u.useRef(!1),It=(0,Me.s)({fromPair:tt,fromTokenInfo:ut,toTokenInfo:mt,side:null===a||void 0===a?void 0:a.side,isSubmitting:je}),_t=u.useCallback((function(e,t){if(e){var n=t?e.mul(t):e;se("maxValue",{formattedValue:n.toFixed(),value:n.toFixed(),floatValue:n.toNumber()}),se("minValue",{formattedValue:"0",value:"0",floatValue:0})}}),[se]),Dt=u.useCallback((function(e,t){if(e){var n=t?e.mul(t):e;se("maxValue",{formattedValue:"0",value:"0",floatValue:0}),se("minValue",{formattedValue:n.toFixed(),value:n.toFixed(),floatValue:n.toNumber()})}}),[se]),Bt=It.rateDecimals,Lt=It.isBaseQuoteMode,Rt=It.isFetchingMarketPrice,Kt=It.quoteTokenInfo,Et=It.baseTokenInfo,Ht=function(e,t){var n=t.swapMarketPrice,r=t.jupSwapMarketPrice,a=t.fromTokenPrice,s=t.toTokenPrice,l=t.side,o=t.isEditingTargetPrice,c=t.onClickSetMaxPrice,d=t.onClickSetMinPrice,m=(0,D.KO)(fe.dS),x=(0,i.Z)(m,1)[0],f=x.GRAPH_PARAMS,v=x.FORM_CONFIG.DCA,h=u.useState({marketStatus:"unset",swapMarketPrice:new g.Z(f.i),hasNewToken:!1,constants:v.PRE_LAUNCH_CONSTANTS}),p=(0,i.Z)(h,2),b=p[0],w=p[1];return u.useEffect((function(){e&&w((function(e){return Le(Le({},e),{},{constants:v.PRE_LAUNCH_CONSTANTS,marketStatus:"unset",swapMarketPrice:n||null})}))}),[w,n,v,e]),u.useEffect((function(){if(e){if("unset"===b.marketStatus&&!r){if("buy"===l&&!a)return;if("sell"===l&&!s)return;if(w((function(e){return Le(Le({},e),{},{marketStatus:"pre-launch"})})),o.current)return;"buy"===l?b.constants.initialPrice&&c(new g.Z(b.constants.initialPrice||0).div(a||0)):d(new g.Z(b.constants.minPrice||0).div(s||0))}if(("unset"===b.marketStatus||"pre-launch"===b.marketStatus)&&r&&r.mul(.99).lt(f.m)){if(w((function(e){return Le(Le({},e),{},{constants:v.IN_RANGE_CONSTANTS,marketStatus:"in-range",swapMarketPrice:r})})),o.current)return;"buy"===l?c(new g.Z(r||0)):d(new g.Z(b.constants.minPrice||0).div(s||0))}if(r&&r.mul(.99).gte(f.m)){if(w((function(e){return Le(Le({},e),{},{constants:v.OUT_OF_RANGE_CONSTANTS,marketStatus:"out-of-range",swapMarketPrice:r})})),o.current)return;c(new g.Z(0)),d(new g.Z(0))}}}),[v,b.constants.initialPrice,b.constants.minPrice,b.marketStatus,b.swapMarketPrice,a,c,d,w,s,f,r,o,l,e]),e?b:null}(ot,{swapMarketPrice:It.swapMarketPrice,jupSwapMarketPrice:It.jupSwapMarketPrice,fromTokenPrice:Nt,toTokenPrice:Pt,side:null===a||void 0===a?void 0:a.side,isEditingTargetPrice:Ft,onClickSetMaxPrice:_t,onClickSetMinPrice:Dt});u.useMemo((function(){Ft.current=!1,ut&&se("fromTokenAddress",ut.address),mt&&se("toTokenAddress",mt.address)}),[null===ut||void 0===ut?void 0:ut.address,null===mt||void 0===mt?void 0:mt.address,null===a||void 0===a?void 0:a.side,ot]);var Ut=(0,Te.useIsAccountFrozen)(ut),qt=(0,Te.useIsAccountFrozen)(mt),Gt=(0,he.Z)().fetchPrice,Wt=(0,k.Nr)(u.useMemo((function(){return{fromTokenPrice:Nt,toTokenPrice:Pt,quoteTokenInfo:Kt,baseTokenInfo:Et,isBaseQuoteMode:Lt,rateDecimals:Bt,fromValue:et,numberOfOrders:at}}),[Nt,Pt,Kt,Et,Lt,Bt,et,at]),200),Qt=(0,K.a)(["jupiter-quote",Wt],(0,r.Z)(s().mark((function e(){var t,n,r,i,a,l,o,c,d,u,m,x,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=Wt.fromTokenPrice,n=Wt.toTokenPrice,r=Wt.quoteTokenInfo,i=Wt.baseTokenInfo,a=Wt.isBaseQuoteMode,l=Wt.rateDecimals,o=Wt.fromValue,c=Wt.numberOfOrders,t&&n&&r&&i&&o.value&&null!==c&&void 0!==c&&c.value){e.next=4;break}return e.abrupt("return",null);case 4:return d=null!==a&&void 0!==a&&a.isFromBase?{fromTokenInfo:i,toTokenInfo:r}:{fromTokenInfo:r,toTokenInfo:i},u=d.fromTokenInfo,m=d.toTokenInfo,x=new g.Z(o.value).div(new g.Z(c.value)).mul(Math.pow(10,u.decimals)).toFixed(0),null!==a&&void 0!==a&&a.isFromBase,f={fromTokenInfo:u,toTokenInfo:m,amount:x,decimals:l},e.next=9,Gt(f);case 9:return e.abrupt("return",e.sent);case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[0,12]])}))),{enabled:!je,keepPreviousData:!0}),Yt=Qt.data,zt=Qt.isLoading,Jt=(0,O.R3)(),$t=(0,D.KO)(B.yz),Xt=(0,i.Z)($t,1)[0],en=(0,L.gs)().priorityLevel,tn=u.useCallback(function(){var e=(0,r.Z)(s().mark((function e(t){var n,r,i,a,o,c,d,u,m,x,v,h,p;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("",e.prev=1,n=t.fromValue,r=t.minValue,i=t.maxValue,!(ut&&mt&&n.floatValue&&null!==at&&void 0!==at&&at.floatValue&&C.signTransaction&&C.publicKey)){e.next=24;break}return a=new g.Z(n.floatValue).mul(Math.pow(10,ut.decimals)),o=a.div(at.floatValue),c=function(){if(null!==Lt&&void 0!==Lt&&Lt.isFromBase){if(!r.floatValue)return null;var e=new g.Z(o).div(Math.pow(10,ut.decimals)),t=new g.Z(r.floatValue),n=e.mul(t).mul(Math.pow(10,mt.decimals)).floor().toFixed(0);return BigInt(n)}if(!i.floatValue)return null;var a=new g.Z(o).div(Math.pow(10,ut.decimals)),s=new g.Z(i.floatValue),l=a.div(s).mul(Math.pow(10,mt.decimals)).floor().toFixed(0);return BigInt(l)}(),d=function(){if(null!==Lt&&void 0!==Lt&&Lt.isFromBase){if(!i.floatValue)return null;var e=new g.Z(o).div(Math.pow(10,ut.decimals)),t=new g.Z(i.floatValue),n=e.mul(t).mul(Math.pow(10,mt.decimals)).floor().toFixed(0);return BigInt(n)}if(!r.floatValue)return null;var a=new g.Z(o).div(Math.pow(10,ut.decimals)),s=new g.Z(r.floatValue),l=a.div(s).mul(Math.pow(10,mt.decimals)).floor().toFixed(0);return BigInt(l)}(),u=Ze.Zt.address===nt?void 0:!!Zt||void 0,e.next=11,Z.createDcaV2({inAmount:BigInt(a.toFixed(0)),cycleSecondsApart:BigInt(pt*((null===rt||void 0===rt?void 0:rt.floatValue)||1)),inAmountPerCycle:BigInt(o.toFixed(0)),inputMint:new b.PublicKey(tt),outputMint:new b.PublicKey(nt),minOutAmountPerCycle:c,maxOutAmountPerCycle:d,startAt:null,user:C.publicKey,payer:C.publicKey},!0,u);case 11:return m=e.sent,x=m.tx,e.next=15,M.getLatestBlockhash("confirmed");case 15:return v=e.sent,h=v.blockhash,p=v.lastValidBlockHeight,x.recentBlockhash=h,x.lastValidBlockHeight=p,x.feePayer=C.publicKey,e.next=23,Jt(x,{blockhash:h,idl:f.xO,idlProgramId:f.PN["mainnet-beta"],lastValidBlockHeight:p},{successMessage:(0,E.jsx)(l.cC,{id:"DCA created for {0} {1} to {2} over {3} orders",values:{0:n.floatValue,1:ut.symbol,2:mt.symbol,3:at.floatValue}}),submittingMessage:(0,E.jsx)(l.cC,{id:"Creating DCA"}),errorMessage:(0,E.jsx)(l.cC,{id:"Failed to create DCA"}),referenceFee:"MEDIUM"===en?Xt.dca.m:"HIGH"===en?Xt.dca.h:"VERY_HIGH"===en?Xt.dca.vh:void 0,minimumFee:B.uo,requestComputeBudgetLimit:3e5});case 23:ze.invalidateQueries({queryKey:["dca"]});case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(1),console.error(e.t0);case 29:if(e.prev=29,t){e.next=32;break}return e.abrupt("return");case 32:return T([t.fromTokenAddress,t.toTokenAddress]),e.finish(29);case 34:case"end":return e.stop()}}),e,null,[[1,26,29,34]])})));return function(t){return e.apply(this,arguments)}}(),[ut,mt,null===at||void 0===at?void 0:at.floatValue,C.signTransaction,C.publicKey,nt,Zt,Z,pt,null===rt||void 0===rt?void 0:rt.floatValue,tt,M,Jt,ze,null===Lt||void 0===Lt?void 0:Lt.isFromBase,en,Xt.dca,T]),nn=u.useState("Active DCAs"),rn=(0,i.Z)(nn,2),an=rn[0],sn=rn[1],ln=(0,be.Z)();u.useEffect((function(){ln&&se("fromValue",{formattedValue:ln,value:ln,floatValue:Number(ln)})}),[se,ln]);var on=ye({defaultDuration:10}),cn=on.period,dn=on.duration;u.useEffect((function(){cn&&dn&&(se("period",cn),se("numberOfOrders",{value:String(dn),floatValue:dn,formattedValue:String(dn)}))}),[se,cn,dn]);var un=u.useMemo((function(){return Math.min(((null===ut||void 0===ut?void 0:ut.decimals)||0)+((null===mt||void 0===mt?void 0:mt.decimals)||0),12)||6}),[null===ut||void 0===ut?void 0:ut.decimals,null===mt||void 0===mt?void 0:mt.decimals]),mn=u.useCallback((function(){Je(mt,ut)}),[mt,ut,Je]),xn=u.useMemo((function(){var e=new g.Z(0);if(null===Ht||void 0===Ht||!Ht.swapMarketPrice)return e;if("buy"===(null===a||void 0===a?void 0:a.side)&&!lt.floatValue)return e;if("sell"===(null===a||void 0===a?void 0:a.side)&&!st.floatValue)return e;var t="buy"===(null===a||void 0===a?void 0:a.side)?new g.Z(lt.floatValue||0).sub(Ht.swapMarketPrice).div(Ht.swapMarketPrice):new g.Z(st.floatValue||0).sub(Ht.swapMarketPrice).div(Ht.swapMarketPrice);return(e=new g.Z(100).mul(t).toDP(2)).isFinite()?e:new g.Z(0)}),[null===Ht||void 0===Ht?void 0:Ht.swapMarketPrice,lt.floatValue,st.floatValue,null===a||void 0===a?void 0:a.side]),fn=u.useMemo((function(){return xn.gt(1e4)?">10000":"".concat(xn.toNumber()>0?"+":"").concat(xn.toDP(2).toString())}),[xn]),vn=u.useMemo((function(){return null!==Lt&&void 0!==Lt&&Lt.isFromBase?xn.toNumber()<0:xn.toNumber()>0}),[null===Lt||void 0===Lt?void 0:Lt.isFromBase,xn]),hn=u.useMemo((function(){return null!==Lt&&void 0!==Lt&&Lt.isFromBase?xn.toNumber()>0:xn.toNumber()<0}),[null===Lt||void 0===Lt?void 0:Lt.isFromBase,xn]),pn=u.useMemo((function(){return"pre-launch"!==(null===Ht||void 0===Ht?void 0:Ht.marketStatus)&&vn||hn}),[null===Ht||void 0===Ht?void 0:Ht.marketStatus,vn,hn]),bn=u.useRef(),gn=u.useRef(null),wn=u.useRef(null),jn=u.useState(!1),yn=(0,i.Z)(jn,2),kn=yn[0],Nn=yn[1],Pn=(0,D.KO)(_.P.refetchId),Sn=(0,i.Z)(Pn,2),Cn=(Sn[0],Sn[1]),Mn=(0,D.KO)(_.P.isLoading),Zn=(0,i.Z)(Mn,1)[0],On=function(){Cn((function(e){return e+1}))},Tn=u.useMemo((function(){var e=[];"pre-launch"===(null===Ht||void 0===Ht?void 0:Ht.marketStatus)&&(!("buy"!==(null===a||void 0===a?void 0:a.side)||!lt.floatValue)&&new g.Z(lt.floatValue).mul(Nt||0).lt(new g.Z(te.m).mul(.99))&&e.push(o.ag._("Your DCA will most likely NOT FILL, try setting a higher max price")));return e}),[null===Ht||void 0===Ht?void 0:Ht.marketStatus,Nt,lt.floatValue,null===a||void 0===a?void 0:a.side,te]),An=u.useMemo((function(){if(!gt||void 0===(null===at||void 0===at?void 0:at.floatValue)||!xt||!St||!rt.floatValue)return{isIntervalTooLow:!rt.floatValue,isPerCycleTooLow:!1,isNumberOfOrdersTooLow:!1,isMinBiggerThanMax:!1,isNewMintPerOrderTooLow:!1};var e=new g.Z(et.floatValue||0).mul(Nt||0).div(at.floatValue),t="pre-launch"===(null===Ht||void 0===Ht?void 0:Ht.marketStatus)||"in-range"===(null===Ht||void 0===Ht?void 0:Ht.marketStatus);return{isIntervalTooLow:!rt.floatValue,isPerCycleTooLow:!Ct&&e.lt(R.Ye),isNewMintPerOrderTooLow:!!Ct&&e.lt(t?Ht.constants.minUSDPerOrder:R.Pf),isNumberOfOrdersTooLow:Number((null===at||void 0===at?void 0:at.floatValue)||0)<R.YB,isMinBiggerThanMax:!(!st.floatValue||!lt.floatValue)&&new g.Z(st.floatValue||0).gte(lt.floatValue||0)}}),[Ct,Nt,St,rt,et.floatValue,gt,null===at||void 0===at?void 0:at.floatValue,xt,st,lt,Ht]),Vn=An.isNumberOfOrdersTooLow,Fn=An.isIntervalTooLow,In=An.isPerCycleTooLow,_n=An.isMinBiggerThanMax,Dn=An.isNewMintPerOrderTooLow,Bn=u.useMemo((function(){var e=[],t="pre-launch"===(null===Ht||void 0===Ht?void 0:Ht.marketStatus)||"in-range"===(null===Ht||void 0===Ht?void 0:Ht.marketStatus);if(null!==ct&&void 0!==ct&&ct.length)return e.push((0,E.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,E.jsx)(l.cC,{id:"Token2022 tokens with transfer fee extensions enabled will result in repetitive fees (and can be updated anytime), please trade other tokens."}),ct.map((function(e){return(0,E.jsxs)("p",{className:"mt-1",children:["- ",e.symbol," (",e.fee,"%)"]},e.address)}))]})),e;t&&(!("buy"!==(null===a||void 0===a?void 0:a.side)||!Ht.constants.minPrice)&&new g.Z(lt.floatValue||0).mul(Nt||0).lt(Ht.constants.minPrice)&&(lt.floatValue||0)>0&&e.push(o.ag._("Max price is below the minimum price of {0} USD",{0:Ht.constants.minPrice})));if(ot?("buy"===a.side&&0===lt.floatValue&&e.push(o.ag._("Please enter a Maximum Price greater than 0")),"sell"===a.side&&0===st.floatValue&&e.push(o.ag._("Please enter a Maximum Price greater than 0"))):(0===st.floatValue&&e.push(o.ag._("Please enter a Minimum Price greater than 0")),0===lt.floatValue&&e.push(o.ag._("Please enter a Maximum Price greater than 0")),_n&&e.push(o.ag._("Minimum Price must be lower than Maximum Price."))),Fn&&e.push(o.ag._("Please enter an interval above 0")),Vn&&e.push(o.ag._("Number of Orders cannot be lower than 2")),C.connected&&et.floatValue&&null!==at&&void 0!==at&&at.floatValue){if(Dn){var n,r=t?null===Ht||void 0===Ht||null===(n=Ht.constants)||void 0===n?void 0:n.minUSDPerOrder:R.Pf;e.push(o.ag._("Minimum {minimumValue} USD per order required, increase your allocation to at least {0} USD for {1} orders",{0:at.floatValue*r,1:null===at||void 0===at?void 0:at.floatValue,minimumValue:r}))}In&&e.push(o.ag._("Minimum {MINIMUM_VALUE_PER_ORDER} USD per order required, increase your allocation to at least {0} USD for {1} orders",{0:at.floatValue*R.Ye,1:null===at||void 0===at?void 0:at.floatValue,MINIMUM_VALUE_PER_ORDER:R.Ye})),Ot||e.push((0,E.jsxs)("div",{className:"space-y-1",children:[o.ag._("Insufficient balance, you have {balance} {fromTokenSymbol}.",{balance:Mt,fromTokenSymbol:At}),(0,E.jsx)("br",{}),(0,E.jsx)("button",{type:"button",className:"underline cursor-pointer",onClick:Tt,children:o.ag._("Use available balance")})]}))}return function(){if("pre-launch"===(null===Ht||void 0===Ht?void 0:Ht.marketStatus)||"in-range"===(null===Ht||void 0===Ht?void 0:Ht.marketStatus)){if("sell"===(null===a||void 0===a?void 0:a.side))return;if(!Ht.constants.maxPrice)return;new g.Z(lt.floatValue||0).mul(Nt||0).mul(.99).gt(Ht.constants.maxPrice||0)&&e.push(o.ag._("Max Price is more than the pool max price."))}}(),e}),[ct,null===Ht||void 0===Ht?void 0:Ht.marketStatus,null===Ht||void 0===Ht?void 0:Ht.constants,Fn,Vn,C.connected,et.floatValue,null===at||void 0===at?void 0:at.floatValue,null===a||void 0===a?void 0:a.side,lt.floatValue,Nt,ot,st.floatValue,_n,Dn,In,Ot,Mt,At,Tt]),Ln=u.useMemo((function(){return Boolean(!et.floatValue||Bn.length>0||Vn||Ut||qt)}),[Bn.length,et.floatValue,Vn,Ut,qt]),Rn=(0,ge.Z)({tokens:[]}),Kn=u.useCallback((function(e){se("fromValue",{floatValue:e.toNumber(),formattedValue:e.toString(),value:e.toString()},{shouldDirty:!0})}),[se]),En=u.useCallback((function(e){e&&se("fromTokenAddress",e)}),[se]);return ot?(0,E.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-between text-v2-lily",children:[(0,E.jsx)("form",{className:"flex flex-col items-center justify-between w-full",onSubmit:ue(tn),children:(0,E.jsx)("div",{className:"w-full text-lg lg:text-2xl",children:(0,E.jsxs)("div",{className:"flex-col space-y-2 relative",children:[(0,E.jsxs)("div",{className:"flex justify-between items-center",children:[(0,E.jsxs)("label",{htmlFor:"fromValue",className:"text-xs md:text-sm font-medium text-black/90 dark:text-white flex items-center",children:[(0,E.jsx)(l.cC,{id:"I want to allocate"}),(0,E.jsx)(Fe.Z,{content:o.ag._("The higher the amount per order, the higher the priority fee, the higher the chances of getting filled."),children:(0,E.jsx)("div",{className:"-mt-0.5 md:mt-0 ml-2 text-white/20 fill-current",children:(0,E.jsx)(ke.Z,{width:12,height:12})})})]}),(0,E.jsxs)("div",{className:"flex space-x-2",children:[(0,E.jsx)("div",{className:"flex item-center ml-1 cursor-pointer hover:text-white-50",onClick:Tt,children:(0,E.jsx)(_e.Z,{tokenInfo:ut,className:"hover:text-white-50"})}),(0,E.jsx)(ce.oi,{mint:tt,onBalanceChange:Kn})]})]}),(0,E.jsx)("div",{className:(0,y.cn)("p-4 h-[72px] border border-transparent relative bg-v2-background-dark rounded-xl flex flex-col space-y-3 group","focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:(0,E.jsxs)("div",{className:"flex",children:[(0,E.jsx)(oe.Z,{onChange:En,fromTokenAddress:tt,toTokenAddress:nt,modalId:Ye,name:"fromTokenAddress",mintsList:Xe,type:"tokenAndInput",disabled:"sell"===a.side}),(0,E.jsx)("span",{className:"flex-1 text-right",children:(0,E.jsx)(m.Qr,{name:"fromValue",control:ae,rules:{required:"Required"},render:function(e){var t=e.field,n=t.onChange,r=t.value,i=t.onBlur;return(0,E.jsx)(Ie.Z,{onBlur:i,onChange:n,tokenAddress:tt,value:r,name:"fromValue"})}})})]})}),(0,E.jsxs)("div",{className:"flex justify-between items-center",children:[(0,E.jsx)("label",{className:"text-xs md:text-sm font-medium text-black/90 dark:text-white",children:(0,E.jsx)(l.cC,{id:"To buy"})}),(0,E.jsx)("div",{className:"flex",children:(0,E.jsx)(_e.Z,{tokenInfo:mt})})]}),(0,E.jsx)("div",{className:"h-[72px] border border-[#EFF0F0] dark:border-0 bg-v2-background-dark rounded-xl flex flex-col space-y-3",children:(0,E.jsx)(oe.Z,{onChange:En,fromTokenAddress:tt,toTokenAddress:nt,modalId:Ye,name:"toTokenAddress",mintsList:Xe,type:"tokenSelectOnly",disabled:"buy"===a.side})}),(0,E.jsxs)("div",{className:"flex space-x-2 items-end",children:[(0,E.jsxs)("div",{className:"flex flex-col justify-between w-full",children:[(0,E.jsx)("label",{className:"text-xs md:text-sm font-medium text-black/90 dark:text-white",children:(0,E.jsx)(l.cC,{id:"Every"})}),(0,E.jsx)(m.Qr,{control:ae,name:"intervalNumber",render:function(e){var t=e.field,n=t.onChange,r=t.value;return(0,E.jsx)("div",{className:(0,y.cn)("h-[54px] mt-2 rounded-xl flex space-x-3 items-center px-2 bg-v2-background-dark","text-sm lg:text-base","group-hover/select:border-v2-active-state group-hover/select:bg-[rgba(199,242,132,0.2)] group-hover/select:shadow-swap-input-dark"),children:(0,E.jsx)(x.Z,{className:"w-full py-3 px-4 bg-transparent !outline-none",value:null===r||void 0===r?void 0:r.floatValue,onValueChange:n,thousandSeparator:","===k.A5?".":",",decimalSeparator:","===k.A5?",":".",decimalScale:0,allowNegative:!1,allowLeadingZeros:!1,isAllowed:function(e){var t=e.floatValue;return!t||t<=1e4}})})}})]}),(0,E.jsx)("div",{className:"flex flex-col justify-between w-full",children:(0,E.jsx)(m.Qr,{control:ae,name:"period",render:function(e){var t=e.field,n=(t.name,t.onChange),r=(t.onBlur,t.value);return(0,E.jsx)("div",{className:(0,y.cn)("h-[54px] mt-2 rounded-xl flex space-x-3 items-center px-2 bg-v2-background-dark","text-sm lg:text-base","group-hover/select:border-v2-active-state group-hover/select:bg-[rgba(199,242,132,0.2)] group-hover/select:shadow-swap-input-dark"),children:(0,E.jsxs)(P.Z,{onChange:n,className:"!bg-transparent !px-3 !py-1 !text-v2-lily flex justify-between !w-full text-sm",contentClassName:"!w-full",data:ht,value:r,rowRenderer:function(e){return(0,E.jsx)("div",{className:"text-sm",children:e})},children:[r,(0,E.jsx)("div",{className:"ml-auto text-black/25 dark:text-white/25 group-hover/select:text-[#00D1DF] dark:group-hover/select:text-dark-active-state fill-current",children:(0,E.jsx)(j.Z,{})})]})})}})}),(0,E.jsxs)("div",{className:" flex-col justify-between w-full hidden md:flex",children:[(0,E.jsxs)("label",{className:"text-xs md:text-sm font-medium text-black/90 dark:text-white flex items-center",children:[(0,E.jsx)(l.cC,{id:"Over"}),(0,E.jsx)(Fe.Z,{content:o.ag._("To minimise the predictability of your DCA strategy, orders are filled within a randomised padding of +/- 26 seconds."),children:(0,E.jsx)("div",{className:"-mt-0.5 md:mt-0 ml-2 text-white/20 fill-current",children:(0,E.jsx)(ke.Z,{width:12,height:12})})})]}),(0,E.jsx)(m.Qr,{control:ae,name:"numberOfOrders",render:function(e){var t=e.field,n=t.onChange,r=t.value;return(0,E.jsxs)("div",{className:(0,y.cn)("h-[54px] mt-2 rounded-xl flex space-x-3 items-center px-2 bg-v2-background-dark","text-sm lg:text-base","group-hover/select:border-v2-active-state group-hover/select:bg-[rgba(199,242,132,0.2)] group-hover/select:shadow-swap-input-dark"),children:[(0,E.jsx)(x.Z,{className:"w-full py-3 pl-2 bg-transparent !outline-none",value:null===r||void 0===r?void 0:r.floatValue,onValueChange:n,thousandSeparator:","===k.A5?".":",",decimalSeparator:","===k.A5?",":".",decimalScale:0,allowNegative:!1,isAllowed:function(e){var t=e.floatValue;return!t||t<=1e6}}),(0,E.jsx)("div",{className:"text-sm",children:o.ag._("orders")})]})}})]})]}),(0,E.jsxs)("div",{className:"flex flex-col w-full md:hidden",children:[(0,E.jsxs)("label",{className:"text-xs md:text-sm font-medium text-black/90 dark:text-white flex items-center",children:[(0,E.jsx)(l.cC,{id:"Over"}),(0,E.jsx)(Fe.Z,{content:o.ag._("To minimise the predictability of your DCA strategy, orders are filled within a randomised padding of +/- 26 seconds."),children:(0,E.jsx)("div",{className:"-mt-0.5 md:mt-0 ml-2 text-white/20 fill-current",children:(0,E.jsx)(ke.Z,{width:12,height:12})})})]}),(0,E.jsx)(m.Qr,{control:ae,name:"numberOfOrders",render:function(e){var t=e.field,n=t.onChange,r=t.value;return(0,E.jsxs)("div",{className:(0,y.cn)("h-[54px] mt-2 rounded-xl flex space-x-3 items-center px-2 bg-v2-background-dark","text-sm lg:text-base","group-hover/select:border-v2-active-state group-hover/select:bg-[rgba(199,242,132,0.2)] group-hover/select:shadow-swap-input-dark"),children:[(0,E.jsx)(x.Z,{className:"w-full py-3 pl-2 bg-transparent !outline-none",value:null===r||void 0===r?void 0:r.floatValue,onValueChange:n,thousandSeparator:","===k.A5?".":",",decimalSeparator:","===k.A5?",":".",decimalScale:0,allowNegative:!1,isAllowed:function(e){var t=e.floatValue;return!t||t<=1e6}}),(0,E.jsx)("div",{className:"text-sm",children:o.ag._("orders")})]})}})]}),(0,E.jsx)("div",{children:"buy"===a.side?(0,E.jsxs)("div",{className:"flex flex-col justify-between w-full",children:[(0,E.jsxs)("label",{className:"text-xs md:text-sm font-medium text-black/90 dark:text-white flex items-center",children:[(0,E.jsx)(l.cC,{id:"Max Price"}),(0,E.jsx)(Fe.Z,{content:o.ag._("Max Price of the token you want to buy. If the price of the token is higher than the Max Price, the order will not be executed."),children:(0,E.jsx)("div",{className:"-mt-0.5 md:mt-0 ml-2 text-white/20 fill-current",children:(0,E.jsx)(ke.Z,{width:12,height:12})})})]}),(0,E.jsx)(m.Qr,{control:ae,name:"maxValue",render:function(e){var t=e.field,n=t.onChange,r=t.value;return(0,E.jsxs)("div",{className:(0,y.cn)("mt-2 w-full bg-jupiter-input-light dark:bg-v2-background-dark pt-2 px-4 pb-6 rounded-xl flex flex-col justify-center relative","border border-transparent focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),ref:gn,children:[(0,E.jsxs)("div",{className:"flex justify-between",children:[(0,E.jsx)("button",{type:"button",className:"absolute right-2 top-2 hover:text-white-75 text-white-35 hover:text-black text-xxs cursor-pointer underline rounded",onClick:function(){Ft.current=!0,"unset"!==(null===Ht||void 0===Ht?void 0:Ht.marketStatus)&&"pre-launch"!==(null===Ht||void 0===Ht?void 0:Ht.marketStatus)||_t(new g.Z((null===Ht||void 0===Ht?void 0:Ht.constants.maxPrice)||0).div(Nt||0)),"in-range"!==(null===Ht||void 0===Ht?void 0:Ht.marketStatus)&&"out-of-range"!==(null===Ht||void 0===Ht?void 0:Ht.marketStatus)||_t(new g.Z((null===Ht||void 0===Ht?void 0:Ht.swapMarketPrice)||0))},children:"unset"===(null===Ht||void 0===Ht?void 0:Ht.marketStatus)||"pre-launch"===(null===Ht||void 0===Ht?void 0:Ht.marketStatus)?(0,E.jsx)(l.cC,{id:"Use Max"}):(0,E.jsx)(l.cC,{id:"Use Market"})}),(0,E.jsx)(x.Z,{className:"w-full bg-transparent !outline-none text-lg font-semibold",value:null===r||void 0===r?void 0:r.floatValue,onValueChange:n,thousandSeparator:","===k.A5?".":",",decimalSeparator:","===k.A5?",":".",decimalScale:un,allowNegative:!1,onFocus:function(){Ft.current=!0}}),Kt?(0,E.jsx)("div",{className:"flex items-center absolute top-6 right-2",children:(0,E.jsx)("span",{className:"font-semibold text-sm",children:null===Kt||void 0===Kt?void 0:Kt.symbol})}):(0,E.jsx)(re.O,{className:"w-11 h-6"})]}),Kt&&(0,E.jsxs)("div",{className:"text-xs text-v2-lily/30 absolute bottom-2 flex gap-x-1",children:[(0,E.jsx)(Ne.default,{tokenInfo:Kt,amount:r.floatValue,maxDecimals:un}),pn?(0,E.jsx)("div",{className:(0,y.cn)("flex items-center text-xs font-medium text-v2-lily/30",{}),children:"(".concat(fn,"%)")}):null]})]})}}),(0,E.jsx)("div",{className:"pr-2 text-xxs text-black-50 dark:text-[#CFF3FF] dark:text-opacity-[0.35] flex justify-end",children:o.ag._("{toTokenSymbol} / {fromTokenSymbol}",{toTokenSymbol:Vt,fromTokenSymbol:At})})]}):(0,E.jsxs)("div",{className:"flex flex-col justify-between w-full",children:[(0,E.jsxs)("label",{className:"text-xs md:text-sm font-medium text-black/90 dark:text-white flex justify-between items-center",children:[(0,E.jsx)(l.cC,{id:"Min Price"}),(0,E.jsx)(Fe.Z,{content:o.ag._("Min Price of the token you want to sell. If the price of the token is lower than the Min Price, the order will not be executed."),children:(0,E.jsx)("div",{className:"-mt-0.5 md:mt-0 ml-2 text-white/20 fill-current",children:(0,E.jsx)(ke.Z,{width:12,height:12})})})]}),(0,E.jsx)(m.Qr,{control:ae,name:"minValue",render:function(e){var t=e.field,n=t.onChange,r=t.value;return(0,E.jsxs)("div",{className:(0,y.cn)("mt-2 w-full bg-jupiter-input-light dark:bg-v2-background-dark pt-2 px-4 pb-6 rounded-xl flex flex-col justify-center relative","border border-transparent focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),ref:wn,children:[(0,E.jsxs)("div",{className:"flex justify-between",children:[(0,E.jsxs)("div",{className:"flex items-center",children:[Et?(0,E.jsxs)("p",{className:"text-v2-lily/50 text-xs flex items-center",children:[null!==Lt&&void 0!==Lt&&Lt.isFromBase?(0,E.jsx)(l.cC,{id:"Sell"}):(0,E.jsx)(l.cC,{id:"Buy"})," ",(0,E.jsx)(l.cC,{id:"{0} at rate",values:{0:null===Et||void 0===Et?void 0:Et.symbol}}),Rt?(0,E.jsx)(Oe.Z,{className:"ml-1",width:8,height:8}):null]}):(0,E.jsx)(re.O,{className:"h-4 w-2"}),pn?(0,E.jsx)("div",{className:(0,y.cn)("flex items-center text-xs ml-1 font-medium text-v2-lily/50",{}),children:"(".concat(fn,"%)")}):null]}),(0,E.jsx)("button",{type:"button",className:"dark:text-white-35 dark:hover:text-white-75 text-black-35 hover:text-black text-xxs cursor-pointer underline rounded",onClick:function(){"in-range"===(null===Ht||void 0===Ht?void 0:Ht.marketStatus)||"out-of-range"===(null===Ht||void 0===Ht?void 0:Ht.marketStatus)?Dt(new g.Z((null===Ht||void 0===Ht?void 0:Ht.swapMarketPrice)||0).div(Pt||0)):null!==Ht&&void 0!==Ht&&Ht.constants.minPrice&&Dt(new g.Z(null===Ht||void 0===Ht?void 0:Ht.constants.minPrice).div(Pt||0))},children:"in-range"===(null===Ht||void 0===Ht?void 0:Ht.marketStatus)||"out-of-range"===(null===Ht||void 0===Ht?void 0:Ht.marketStatus)?(0,E.jsx)(l.cC,{id:"Use Market"}):(0,E.jsx)(l.cC,{id:"Use Default"})})]}),(0,E.jsxs)("div",{className:"flex justify-between",children:[(0,E.jsx)(x.Z,{className:"w-full bg-transparent !outline-none text-sm font-semibold",value:null===r||void 0===r?void 0:r.floatValue,onValueChange:n,thousandSeparator:","===k.A5?".":",",decimalSeparator:","===k.A5?",":".",decimalScale:un,allowNegative:!1,isAllowed:function(e){var t=e.floatValue;return!t||t<=1e4}}),Kt?(0,E.jsx)("div",{className:"flex items-center",children:(0,E.jsx)("span",{className:"font-semibold text-sm",children:null===Kt||void 0===Kt?void 0:Kt.symbol})}):(0,E.jsx)(re.O,{className:"w-11 h-6"})]}),Kt&&(0,E.jsx)("div",{className:"text-xs text-v2-lily/30 absolute bottom-2",children:(0,E.jsx)(Ne.default,{prefix:"\u2248 ",tokenInfo:Kt,amount:r.floatValue,maxDecimals:un})})]})}}),(0,E.jsx)("div",{className:"pr-2 text-xxs text-black-50 dark:text-[#CFF3FF] dark:text-opacity-[0.35] flex justify-end",children:o.ag._("{toTokenSymbol} / {fromTokenSymbol}",{toTokenSymbol:Vt,fromTokenSymbol:At})})]})}),we&&Tn.length>0&&(0,E.jsxs)("div",{className:"mt-3 py-3 pl-2 rounded-lg text-xs flex items-center text-white space-x-2 w-full bg-warning",children:[(0,E.jsx)("div",{className:"h-3 w-3 mt-0.5 fill-current",children:(0,E.jsx)(S.Z,{fill:"inherit"})}),(0,E.jsx)("div",{className:"flex flex-col space-y-1",children:Tn.map((function(e,t){return(0,E.jsx)("div",{children:e},t)}))})]}),Ln&&we&&Bn.length>0?(0,E.jsxs)("div",{className:"mb-4 py-3 px-2 rounded-lg text-xs flex items-center text-white space-x-2 w-full bg-[#F04A44]",children:[(0,E.jsx)("div",{className:"h-3 w-3 mt-0.5 fill-current",children:(0,E.jsx)(S.Z,{fill:"inherit"})}),(0,E.jsx)("div",{className:"flex flex-col space-y-1",children:Bn.map((function(e,t){return(0,E.jsx)("div",{children:e},t)}))})]}):null,(0,E.jsx)(Pe.Z,{className:"text-v2-lily/60 text-xs !px-0",iconSize:12,message:o.ag._("Priority fees are only used to create new orders, and will not improve your chances of getting filled.")}),C.connected?(0,E.jsx)(N.Z,{disabled:Ln,loading:je,type:"submit",className:"border border-v2-lily/20 w-full",children:o.ag._("Start DCA")}):(0,E.jsx)(Re.Z,{})]})})}),(0,E.jsx)("div",{className:"mt-3 w-full flex flex-col justify-center text-lg lg:text-2xl",children:(0,E.jsx)("div",{className:"w-full max-w-full overflow-hidden",children:kn?(0,E.jsx)("div",{className:"md:flex flex-row justify-between px-5 lg:px-0",children:C.connected?(0,E.jsxs)(Ce.Z,{tabs:["Active DCAs","Past DCAs"],activeTab:an,setActiveTab:sn,isLoading:Zn,refetch:On,children:["Active DCAs"===an?(0,E.jsx)(ie,{dcaClient:Z,inputMint:a.targetToken,outputMint:a.targetToken}):null,"Past DCAs"===an?(0,E.jsx)(le,{dcaClient:Z,inputMint:a.targetToken,outputMint:a.targetToken}):null]}):null}):(0,E.jsx)("div",{className:"w-full mt-3 text-xs overflow-x-auto border rounded-lg border-white/5 flex flex-col justify-center items-center p-4",children:(0,E.jsx)(N.Z,{type:"button",size:"sm",className:"w-auto px-4 bg-[#121D28] border border-transparent",onClick:function(){On(),Nn(!0)},children:(0,E.jsx)("span",{className:"text-sm",children:"View Orders"})})})})})]}):(0,E.jsx)("div",{className:"w-full h-full flex flex-col items-center justify-between text-lg lg:text-2xl text-v2-lily",children:(0,E.jsxs)("div",{className:"w-full z-10",children:[(0,E.jsx)("form",{className:"flex flex-col items-center justify-between w-full",onSubmit:ue(tn),children:(0,E.jsxs)("div",{className:"w-full",children:[(0,E.jsxs)("div",{className:"flex-col space-y-2 relative",children:[(0,E.jsxs)("div",{className:"flex flex-col",children:[(0,E.jsxs)("div",{className:(0,y.cn)("min-h-[124px] flex flex-col space-y-3 p-4 border border-transparent relative rounded-xl","bg-uiv2 focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:[(0,E.jsxs)("div",{className:"flex justify-between items-center",children:[(0,E.jsx)("span",{className:"text-sm font-medium text-v2-lily",children:(0,E.jsx)(l.cC,{id:"I Want To Allocate"})}),(0,E.jsxs)("div",{className:"flex space-x-2",children:[(0,E.jsx)(_e.Z,{tokenInfo:ut}),(0,E.jsx)(ce.oi,{mint:tt,onBalanceChange:Kn})]})]}),(0,E.jsxs)("div",{className:"flex-1 flex items-center space-x-2",children:[(0,E.jsx)(oe.Z,{onChange:En,fromTokenAddress:tt,toTokenAddress:nt,modalId:Ye,name:"fromTokenAddress",mintsList:Xe,type:"tokenAndInput"}),(0,E.jsx)("span",{className:"flex-1 text-right",children:(0,E.jsx)(m.Qr,{name:"fromValue",control:ae,rules:{required:"Required"},render:function(e){var t=e.field,n=t.onChange,r=t.value,i=t.onBlur;return(0,E.jsx)(Ie.Z,{onBlur:i,onChange:n,tokenAddress:tt,value:r,name:"fromValue",tokenAmountClassname:"font-semibold text-v2-lily",usdValueClassname:"!text-xs font-normal text-v2-lily/50"})}})})]})]}),(0,E.jsx)(We,{tokenInfo:ut,className:"mt-2"}),(0,E.jsxs)("div",{className:"relative flex justify-center my-1",children:[(0,E.jsx)("hr",{className:"absolute w-full border-uiv2/50 top-[calc(50%-1px)] -z-0"}),(0,E.jsx)("div",{className:"inline-block z-10",children:(0,E.jsx)("button",{type:"button",className:(0,y.cn)("group/flip bg-v2-background-page w-8 h-8 rounded-full cursor-pointer flex flex-col justify-center border-[3px] border-uiv2 text-v2-lily/50","dark:hover:border-v2-primary dark:hover:shadow-swap-input-dark"),onClick:mn,children:(0,E.jsx)("span",{className:"w-full text-v2-lily/50 fill-current flex justify-center transition-none group-hover/flip:text-v2-primary/50 dark:group-hover/flip:text-v2-primary",children:(0,E.jsx)(Ve.Z,{})})})})]}),(0,E.jsxs)("div",{className:(0,y.cn)("min-h-[124px] pt-4 bg-uiv2 rounded-xl flex flex-col border border-transparent","group hover:border-v2-primary/50 hover:shadow-swap-input-dark"),children:[(0,E.jsxs)("div",{className:"mb-2 px-4 flex justify-between items-center",children:[(0,E.jsx)("span",{className:"text-sm font-medium text-v2-lily",children:(0,E.jsx)(l.cC,{id:"To Buy"})}),(0,E.jsx)(_e.Z,{tokenInfo:mt})]}),(0,E.jsx)("div",{className:"flex-1 flex items-center",children:(0,E.jsx)(oe.Z,{onChange:En,fromTokenAddress:tt,toTokenAddress:nt,modalId:Ye,mintsList:Xe,name:"toTokenAddress",type:"tokenSelectOnly"})})]}),(0,E.jsx)(We,{tokenInfo:mt,className:"mt-2"})]}),(0,E.jsxs)("div",{className:"flex space-x-2",children:[(0,E.jsxs)("div",{className:(0,y.cn)("basis-1/2 flex flex-col space-y-2","p-4 bg-uiv2 rounded-xl flex flex-col border border-transparent","group focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:[(0,E.jsx)("label",{className:"text-xs font-medium text-v2-lily/50",children:(0,E.jsx)(l.cC,{id:"Every"})}),(0,E.jsxs)("div",{className:"w-full flex justify-between items-center",children:[(0,E.jsx)(m.Qr,{control:ae,name:"intervalNumber",render:function(e){var t=e.field,n=t.onChange,r=t.value;return(0,E.jsx)(x.Z,{value:null===r||void 0===r?void 0:r.floatValue,onValueChange:n,thousandSeparator:","===k.A5?".":",",decimalSeparator:","===k.A5?",":".",decimalScale:0,allowNegative:!1,allowLeadingZeros:!1,isAllowed:function(e){var t=e.floatValue;return!t||t<=1e4},className:"!w-full !bg-transparent !outline-none !text-sm !font-semibold !text-v2-lily"})}}),(0,E.jsx)("div",{className:"flex justify-end items-center",children:(0,E.jsx)(m.Qr,{control:ae,name:"period",render:function(e){var t=e.field,n=t.onChange,r=t.value;return(0,E.jsxs)(P.Z,{onChange:n,className:"!bg-transparent !px-0 !py-0 !text-sm !font-semibold !text-v2-lily",contentClassName:"!min-w-[124px]",data:ht,value:r,rowRenderer:function(e){return(0,E.jsx)("div",{className:"text-sm",children:e})},children:[r,(0,E.jsx)("div",{className:"ml-2 fill-current text-v2-lily/25 hover:text-v2-lily",children:(0,E.jsx)(j.Z,{})})]})}})})]})]}),(0,E.jsxs)("div",{className:(0,y.cn)("basis-1/2 flex flex-col space-y-2","p-4 bg-uiv2 rounded-xl flex flex-col border border-transparent","group focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:[(0,E.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,E.jsx)("label",{className:"text-xs font-medium text-v2-lily/50",children:(0,E.jsx)(l.cC,{id:"Over"})}),(0,E.jsx)(Fe.Z,{content:o.ag._("To minimise the predictability of your DCA strategy, orders are filled within a randomised padding of +/- 26 seconds."),children:(0,E.jsx)("div",{className:"fill-current text-v2-lily/25",children:(0,E.jsx)(ke.Z,{width:12,height:12})})})]}),(0,E.jsxs)("div",{className:"flex justify-between items-center",children:[(0,E.jsx)(m.Qr,{control:ae,name:"numberOfOrders",render:function(e){var t=e.field,n=t.onChange,r=t.value;return(0,E.jsx)(x.Z,{value:null===r||void 0===r?void 0:r.floatValue,onValueChange:n,thousandSeparator:","===k.A5?".":",",decimalSeparator:","===k.A5?",":".",decimalScale:0,allowNegative:!1,isAllowed:function(e){var t=e.floatValue;return!t||t<=1e6},className:"!w-full !bg-transparent !outline-none !text-sm !font-semibold !text-v2-lily"})}}),(0,E.jsx)("span",{className:"text-sm font-semibold text-v2-lily",children:o.ag._("orders")})]})]})]}),(0,E.jsxs)("div",{className:(0,y.cn)("w-full flex flex-col space-y-2","p-4 bg-uiv2 rounded-xl flex flex-col border border-transparent","group focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:[(0,E.jsx)("span",{className:"text-xs font-medium text-v2-lily/50",children:(0,E.jsx)(l.cC,{id:"Setup Price Range (optional)"})}),(0,E.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E.jsx)(m.Qr,{control:ae,name:"minValue",render:function(e){var t=e.field,n=t.onChange,r=t.value;return(0,E.jsx)(Ae.Z,{placeholder:o.ag._("Min Price"),value:r.value,onChange:n,decimals:Bt,isAllowed:function(e){var t=e.floatValue;return!t||t<=$e},allowNegative:!1,className:"py-3 px-4 bg-transparent !outline-none !bg-uiv2-background !rounded-lg !text-sm !font-semibold !text-left placeholder:!text-v2-lily/25 !text-v2-lily"})}}),(0,E.jsx)("span",{className:"flex text-sm font-semibold text-v2-lily",children:"-"}),(0,E.jsx)(m.Qr,{control:ae,name:"maxValue",render:function(e){var t=e.field,n=t.onChange,r=t.value;return(0,E.jsx)(Ae.Z,{value:r.value,onChange:n,placeholder:o.ag._("Max Price"),isAllowed:function(e){var t=e.floatValue;return!t||t<=$e},ref:bn,decimals:Bt,allowNegative:!1,className:"py-3 px-4 bg-transparent !outline-none !bg-uiv2-background !rounded-lg !text-sm !font-semibold !text-left placeholder:!text-v2-lily/25 !text-v2-lily"})}})]})]}),(0,E.jsxs)("div",{children:[(0,E.jsxs)("div",{className:"text-xs text-white/50 flex items-center justify-between h-4 mt-1",children:[Et?(0,E.jsxs)("p",{children:[null!==Lt&&void 0!==Lt&&Lt.isFromBase?(0,E.jsx)(l.cC,{id:"Current sell"}):(0,E.jsx)(l.cC,{id:"Current buy"})," ",(0,E.jsx)(l.cC,{id:"{0} rate",values:{0:null===Et||void 0===Et?void 0:Et.symbol}})]}):(0,E.jsx)(re.O,{className:"h-4 w-2"}),zt?(0,E.jsx)(re.O,{className:"!h-3 !w-12"}):Yt?(0,E.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,E.jsx)(F.ZP,{value:null!==Lt&&void 0!==Lt&&Lt.isFromBase?new g.Z(1).div(Yt.marketRate).toNumber():Yt.marketRate.toNumber(),maxSuffix:6}),(0,E.jsx)("span",{children:null!==Lt&&void 0!==Lt&&Lt.isFromBase?"".concat(At," / ").concat(Vt):"".concat(Vt," / ").concat(At)})]}):"-"]}),(0,E.jsxs)("div",{className:"my-2 py-2 px-4 bg-v2-lily/5 rounded-lg text-xs flex items-center text-white space-x-2 w-full",children:[(0,E.jsx)("div",{className:"h-3 w-3 mt-0.5 fill-white/40",children:(0,E.jsx)(S.Z,{fill:"inherit"})}),(0,E.jsx)("div",{className:"text-white/40",children:(0,E.jsx)("p",{children:o.ag._("DCA will only be executed if the price falls within the range of your pricing strategy.")})})]}),Ct&&(0,E.jsxs)("div",{className:"my-2 py-2 px-4 bg-warning/80 rounded-lg text-xs flex items-center text-white space-x-2 w-full leading-tight",children:[(0,E.jsx)("div",{className:"h-3 w-3 mt-0.5 fill-current",children:(0,E.jsx)(S.Z,{fill:"inherit"})}),(0,E.jsx)("div",{className:"space-y-2",children:(0,E.jsx)("p",{children:(0,E.jsx)(l.cC,{id:"Given the new token's high volatility during its price discovery phase, please exercise caution while trading. You should use <0>pricing strategy</0> to prevent buying or selling at an unfavorable price.",components:{0:(0,E.jsx)("b",{})}})})})]})]})]}),(0,E.jsxs)("div",{className:"flex flex-col items-center justify-center w-full mt-3",children:[Ln&&Bn.length>0?(0,E.jsxs)("div",{className:"mb-4 py-3 px-2 rounded-lg text-xs flex items-center text-white space-x-2 w-full bg-[#F04A44]",children:[(0,E.jsx)("div",{className:"h-3 w-3 mt-0.5 fill-current",children:(0,E.jsx)(S.Z,{fill:"inherit"})}),(0,E.jsx)("div",{className:"flex flex-col space-y-1",children:Bn.map((function(e,t){return(0,E.jsx)("div",{children:e},t)}))})]}):null,Rn?(0,E.jsx)(ge.y,{}):C.connected?(0,E.jsx)(Se.Z,{disabled:Ln,loading:je,type:"submit",children:Ut||qt?(0,E.jsx)(l.cC,{id:"Token account frozen"}):o.ag._("Start DCA")}):(0,E.jsx)(Re.Z,{}),(0,E.jsx)(Ge,{fromValue:et,intervalNumber:rt,selectedPeriodName:vt,fromTokenInfo:ut,toTokenInfo:mt,orderInfo:St,atomFormState:Ht,isLaunchPage:ot,jupiterResult:Yt})]})]})}),C.connected?(0,ve.mD)(Be)&&Be.container.leftContainerHistories&&Be.container.leftContainerHistories.current&&(0,xe.createPortal)((0,E.jsxs)(Ce.Z,{tabs:["Active DCAs","Past DCAs"],activeTab:an,setActiveTab:sn,isLoading:Zn,refetch:On,children:["Active DCAs"===an?(0,E.jsx)(ie,{dcaClient:Z}):null,"Past DCAs"===an?(0,E.jsx)(le,{dcaClient:Z}):null]}),Be.container.leftContainerHistories.current):null,C.connected?(0,ve.mD)(Be)&&Be.container.bottomPageHistories&&Be.container.bottomPageHistories.current&&(0,xe.createPortal)((0,E.jsxs)(Ce.Z,{tabs:["Active DCAs","Past DCAs"],activeTab:an,setActiveTab:sn,isLoading:Zn,refetch:On,children:["Active DCAs"===an?(0,E.jsx)(ie,{dcaClient:Z}):null,"Past DCAs"===an?(0,E.jsx)(le,{dcaClient:Z}):null]}),Be.container.bottomPageHistories.current):null]})})}},55259:function(e,t,n){var r=n(72215),i=n(93981),a=n(24201),s=n(56100),l=n(82625),o=n(69825),c=n(29541);t.Z=function(e){var t=e.onChange,n=e.onBlur,d=e.tokenAddress,u=e.loading,m=e.value,x=e.name,f=e.disabled,v=e.tokenAmountClassname,h=e.usdValueClassname,p=(0,r.Bn)().getTokenInfo,b=i.useRef(null),g=i.useMemo((function(){return p(d)}),[p,d]);return(0,c.jsxs)("div",{className:"flex flex-col text-right h-full",children:[u||!g?(0,c.jsx)(s.O,{className:"ml-2 w-24 h-6 self-end"}):(0,c.jsx)(o.Z,{name:x,className:(0,a.cn)("outline-none",v),decimals:g.decimals,onChange:t,value:m.value,disabled:f,ref:b,onBlur:n}),u?(0,c.jsx)(s.O,{className:"ml-2 mt-0.5 w-8 h-4 self-end"}):null!==m&&void 0!==m&&m.value?(0,c.jsx)("div",{className:(0,a.cn)("text-xs text-black-35 dark:text-white-35"),onClick:function(){var e;return null===b||void 0===b||null===(e=b.current)||void 0===e?void 0:e.focus()},children:(0,c.jsx)(l.Z,{tokenAddress:d,value:m,className:h})}):null]})}},13246:function(e,t,n){var r=n(93981),i=n(72215),a=n(70006),s=n(94660),l=n(59978),o=n(10361),c=n(1242),d=n(20255),u=n(42082),m=n(69667),x=n(24201),f=n(67768),v=n(29541),h=function(e){var t=e.showAllPairs,n=e.currentTokenInfo,r=e.disabled;return(0,v.jsx)("div",{className:"flex justify-between items-center group/select",children:(0,v.jsxs)("button",{disabled:r,type:"button",className:(0,x.cn)("py-2 px-3 h-10 rounded-xl flex space-x-3 items-center  border border-transparent",r?"cursor-default":"bg-v2-background-page dark:group-hover/select:border-v2-primary/50 dark:group-hover/select:bg-[rgba(199,242,132,0.2)] dark:group-hover/select:shadow-swap-input-dark"),onClick:t,children:[(0,v.jsx)("div",{className:"rounded-full",children:(null===n||void 0===n?void 0:n.logoURI)&&(0,v.jsx)(l.Z,{width:24,height:24,info:n})}),(0,v.jsx)("div",{className:"font-semibold text-sm",translate:"no",children:null===n||void 0===n?void 0:n.symbol}),!r&&(0,v.jsx)("div",{className:"text-black/25 dark:text-white/25 group-hover/select:text-[#00D1DF] dark:group-hover/select:text-v2-primary fill-current",children:(0,v.jsx)(m.Z,{})})]})})},p=function(e){var t=e.showAllPairs,n=e.currentTokenInfo,r=e.disabled;return(0,v.jsx)("div",{className:"rounded-lg flex justify-between items-center w-full h-full",children:(0,v.jsxs)("button",{type:"button",className:(0,x.cn)("pt-2 pb-4 px-4 h-full rounded-xl flex space-x-3 items-center border border-transparent w-full",r?"cursor-default":""),onClick:t,children:[(0,v.jsx)("div",{className:"rounded-full",children:(null===n||void 0===n?void 0:n.logoURI)&&(0,v.jsx)(l.Z,{width:24,height:24,info:n})}),(0,v.jsx)("div",{className:"font-semibold text-base",translate:"no",children:null===n||void 0===n?void 0:n.symbol}),!r&&(0,v.jsx)("div",{className:"!ml-auto text-black/25 dark:text-white/25 group-hover:text-v2-primary fill-current",children:(0,v.jsx)(m.Z,{})})]})})};t.Z=function(e){var t=e.fromTokenAddress,n=e.toTokenAddress,l=e.onChange,m=e.name,x=e.modalId,b=e.mintsList,g=e.type,w=e.disabled,j=(0,i.Bn)(),y=(j.unknownTokenMap,j.getTokenInfo),k=(0,d.B)(),N=k.add,P=k.get,S=(0,a.JT)(),C=S.openModal,M=S.closeModal,Z=S.openContextualModal,O=S.setContextValue,T=S.ModalContextConsumer,A=(0,u.T)(),V=(0,r.useMemo)((function(){return"fromTokenAddress"===m?t:n}),[t,n,m]),F=(0,r.useMemo)((function(){return y(V)}),[y,V]),I=function(e){if(e){var r,i,a,s,c=(0,f.tr)(e)||(0,f.kL)(e),d=P(e.address);if("fromTokenAddress"===m)n===e.address?(r=e,i=y(t)):(r=e,i=y(n));else t===e.address?(r=y(n),i=e):(r=y(t),i=e);if(c&&!d)setTimeout((function(){C((0,v.jsx)(o.ZP,{tokensInfo:[e],onClickReject:_,onClickAccept:function(){var t,n;l("fromTokenAddress"===m?null===(t=r)||void 0===t?void 0:t.address:null===(n=i)||void 0===n?void 0:n.address),N(e.address),A(r,i),M()},preventToken2022WithTransferTaxExtension:!0}),{canDismiss:!1,containerStyle:{background:"none"}})}),0);else l("fromTokenAddress"===m?null===(a=r)||void 0===a?void 0:a.address:null===(s=i)||void 0===s?void 0:s.address),A(r,i),M()}},_=function(){T&&!w&&(O(x,b),Z(x,b,(0,v.jsx)(T,{children:function(e){return(0,v.jsx)(s.ZP,{onSubmit:I,mintsList:e,bestTokens:c.KG})}}),{position:"top",noCloseButton:!0}))};return"tokenAndInput"===g?(0,v.jsx)(h,{disabled:w,showAllPairs:_,currentTokenInfo:F}):(0,v.jsx)(p,{disabled:w,showAllPairs:_,currentTokenInfo:F})}},32044:function(e,t,n){var r=n(72215),i=(n(93981),n(96404)),a=n(51633),s=n(24201),l=n(29541);t.Z=function(e){var t=e.className,n=e.tokenInfo;if(!(0,r.Os)().connected||!n)return null;var o=n.address;return(0,l.jsxs)("div",{className:"flex space-x-1 items-center",children:[(0,l.jsx)("div",{className:"mb-px fill-current text-white-75",children:(0,l.jsx)(a.Z,{width:12,height:12})}),(0,l.jsxs)("div",{className:(0,s.cn)("text-xs font-normal text-v2-lily/50 whitespace-nowrap",t),children:[(0,l.jsx)(i.Z,{mintAddress:o})," ",(0,l.jsx)("span",{children:null===n||void 0===n?void 0:n.symbol})]})]})}},57722:function(e,t,n){n.d(t,{Pf:function(){return l},YB:function(){return a},Ye:function(){return s},hl:function(){return o},tc:function(){return d}});var r,i=n(7761),a=2,s=3,l=20,o=.5,c=86400,d=[{id:"minute",name:i.ag._("minute"),secondsInPeriod:60},{id:"hour",name:i.ag._("hour"),secondsInPeriod:3600},{id:"day",name:i.ag._("day"),secondsInPeriod:c},{id:"week",name:i.ag._("week"),secondsInPeriod:604800},{id:"month",name:i.ag._("month"),secondsInPeriod:2592e3}];!function(e){e.DCA="DCA",e.VA="VA"}(r||(r={}))},3955:function(e,t,n){n.d(t,{T:function(){return s}});var r=n(63956),i=n(7744);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var s=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({address:e.address||i.PublicKey.default.toString(),decimals:0,name:"Unknown",chainId:101,symbol:"Unknown"},e)}},96721:function(e,t,n){n.d(t,{Z:function(){return pe},s:function(){return ve}});var r=n(63956),i=n(70107),a=n(27195),s=n(97620),l=n(8857),o=n.n(l),c=n(73360),d=n(7761),u=n(26174),m=n(11823),x=n(56720),f=n(92956),v=n(72215),h=n(27177),p=n(40993),b=n(25224),g=n(7744),w=n(45009),j=n(65558),y=n(13838),k=n(3011),N=n(9319),P=n.n(N),S=n(93981),C=n(13215),M=n(13170),Z=n(1242),O=n(41118),T=n(90342),A=n(66956),V=n(33130),F=n(77798),I=n(23632),_=n(42082),D=n(50269),B=n(94223),L=n(71932),R=n(24201),K=n(25546),E=n(54566),H=n(70006),U=n(71130),q=n(99438),G=n(11003),W=n(29541),Q=function(e){var t=e.actions;return(0,W.jsx)("div",{className:(0,R.cn)("flex bg-black/60 rounded-lg overflow-hidden shadow-xl backdrop-blur-lg"),children:t.map((function(e,n){return(0,W.jsx)("button",{type:"button",onClick:e.onClick,className:(0,R.cn)("text-xs w-13 p-2 flex justify-center font-semibold hover:bg-white/20",0!==n&&n!==t.length?"border-l border-r border-white/20":""),children:e.text},n)}))})},Y=n(12939),z=n(56100),J=n(85394),$=n(96404),X=n(69825),ee=n(59295),te=n(59394),ne=n(78013),re=n(59243),ie=n(46267),ae=n(63068),se=n(36404),le=n(78232),oe=n(91511),ce=function(){var e=(0,a.Z)(o().mark((function e(t){var n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("standard"in t)||!("fuse:getEphemeralSigners"in t.wallet.features)){e.next=10;break}return n=t.wallet.features["fuse:getEphemeralSigners"],e.next=4,n.getEphemeralSigners(1);case 4:return r=e.sent,i=(0,s.Z)(r,1),a=i[0],e.abrupt("return",{publicKey:new g.PublicKey(a)});case 10:return e.abrupt("return",g.Keypair.generate());case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=n(33118);function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fe(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ve=function(e){var t=e.fromPair,n=e.fromTokenInfo,r=e.toTokenInfo,i=e.side,a=e.isSubmitting,l=(0,v.Bn)().newTokenListMap,o=(0,A.b)(n,r),c=o.quoteTokenInfo,d=o.baseTokenInfo,u=o.quoteTokenPrice,m=o.baseTokenPrice,x=o.rateDecimals,f=(0,k.KO)(Z.dS),h=(0,s.Z)(f,1)[0].GRAPH_PARAMS,p=(0,S.useMemo)((function(){return!(!c||!d)&&(l.has(c.address)||l.has(d.address))}),[l,c,d]),b=(0,S.useMemo)((function(){if(!O.d.find((function(e){return e===(null===n||void 0===n?void 0:n.address)||e===(null===r||void 0===r?void 0:r.address)})))return null;var e=t===(null===d||void 0===d?void 0:d.address);return{isFromBase:Boolean(e)}}),[null===d||void 0===d?void 0:d.address,t,null===n||void 0===n?void 0:n.address,null===r||void 0===r?void 0:r.address]),g=(0,I.s)({quoteTokenInfo:c,baseTokenInfo:d,quoteTokenPrice:u,baseTokenPrice:m,isBaseQuoteMode:b,rateDecimals:x,isSubmitting:a}),w=g.swapMarketPrice,j=g.isFetching,N=g.isFetched,P=(0,S.useMemo)((function(){if(p&&!w){var e=Number(h.i),t="buy"===i?u:"sell"===i?null!==b&&void 0!==b&&b.isFromBase?u:m:void 0;return t?"sell"!==i||null!==b&&void 0!==b&&b.isFromBase?new y.Z(e).div(t):new y.Z(t).div(e):null}return w}),[m,p,null===b||void 0===b?void 0:b.isFromBase,w,u,i,h]);return{rateDecimals:x,isBaseQuoteMode:b,swapMarketPrice:P,isMarketPriceFetched:N,isFetchingMarketPrice:j,jupSwapMarketPrice:w,quoteTokenInfo:c,baseTokenInfo:d}},he=function(e){var t,n=e.limitOrder,r=e.fromTokenInfo,i=e.toTokenInfo,l=e.onOrderCreationFailed,h=e.onOrderCreationStart,N=e.onOrderCreationSuccess,O=e.side,A=e.description,I=e.setForm,q=(0,w.a)(["limit-order-fee-structure"],(0,a.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getFee();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{staleTime:1/0}),G=(0,C.cI)({defaultValues:{fromPair:r.address,toPair:i.address,fromPairValue:"100",targetPrice:"",toPairValue:"",expiry:"Never"}}),te=G.control,ne=G.handleSubmit,ae=G.watch,se=G.setValue,oe=G.formState,ue=(0,_.T)(),xe=(0,H.JT)(),fe=(xe.openContextualModal,xe.ModalContextConsumer,xe.openModal),he=(xe.closeModal,(0,f.O)()),pe=he.wallet,be=he.signTransaction,ge=he.signAllTransactions,we=(0,S.createRef)(),je=(0,v.Bn)(),ye=je.tokenMap,ke=je.connection,Ne=(0,S.useState)({day:0,hour:0,minute:0}),Pe=(Ne[0],Ne[1],(0,S.useState)(!1)),Se=(Pe[0],Pe[1],(0,S.useRef)(!1)),Ce=(0,S.useMemo)((function(){var e=new Array(ye.size);return ye.forEach((function(t){(0,b.kL)(t)||e.push(t.address)})),e}),[ye]),Me=ae(),Ze=(0,V.R3)(),Oe=(0,k.KO)(p.yz),Te=(0,s.Z)(Oe,1)[0],Ae=(0,T.gs)().priorityLevel,Ve=S.useCallback((function(e){var t=e,n=i;i.address===e.address&&(t=i,n=r),n&&ue(t,n)}),[ue,r,i]),Fe=S.useCallback((function(e){var t=r,n=e;r.address===e.address&&(t=i,n=r),t&&ue(t,n)}),[ue,r,i]),Ie=(0,S.useMemo)((function(){return(0,b.Hd)(Me.targetPrice)?Number(Me.targetPrice):0}),[Me.targetPrice]),_e=(0,k.KO)(Z.dS),De=(0,s.Z)(_e,1)[0],Be=De.RECOMMENDED_PARAMS,Le=De.GRAPH_PARAMS,Re=De.FORM_CONFIG.LIMIT_ORDER,Ke=(0,S.useState)({marketStatus:"unset",swapMarketPrice:new y.Z(Le.i),hasNewToken:!1,constants:Re.PRE_LAUNCH_CONSTANTS}),Ee=Ke[0],He=Ke[1],Ue=ve({fromPair:Me.fromPair,fromTokenInfo:r,toTokenInfo:i,side:O,isSubmitting:oe.isSubmitting}),qe=Ue.rateDecimals,Ge=Ue.isBaseQuoteMode,We=Ue.isFetchingMarketPrice,Qe=Ue.quoteTokenInfo,Ye=Ue.baseTokenInfo;(0,S.useEffect)((function(){He((function(e){return me(me({},e),{},{swapMarketPrice:Ue.swapMarketPrice||null})}))}),[He,Ue.swapMarketPrice]);var ze=S.useCallback((function(e){(0,b.Hd)(e)&&se("toPairValue",e)}),[se]),Je=(0,v.y6)(),$e=Je.tokenPriceMap,Xe=Je.getUSDValue,et=Je.isLatest,tt=S.useMemo((function(){var e,t;if(!r||!i)return[null,null];var n=null===(e=$e[r.address])||void 0===e?void 0:e.usd,a=null===(t=$e[i.address])||void 0===t?void 0:t.usd;return n||Xe(r.address),a||Xe(i.address),[n,a]}),[r,Xe,i,$e,et]),nt=(0,s.Z)(tt,2),rt=nt[0],it=nt[1],at=(0,S.useCallback)((function(e){if(e){var t=(0,K.KU)(Number(e));se("targetPrice",new y.Z(e).toFixed(Math.min(qe,t+5))),ze(null!==Ge&&void 0!==Ge&&Ge.isFromBase?new y.Z(e.toFixed()).mul(Me.fromPairValue||0).toDP(qe).toFixed():new y.Z(Me.fromPairValue||0).div(e).toDP(qe).toFixed())}}),[null===Ge||void 0===Ge?void 0:Ge.isFromBase,ze,qe,se,Me.fromPairValue]),st=(0,S.useCallback)((function(e,t){if(e){var n=(0,K.KU)(Number(e)),r=t?new y.Z(e.toFixed()).mul(t):e;se("targetPrice",new y.Z(r).toFixed(Math.min(qe,n+5))),ze(null!==Ge&&void 0!==Ge&&Ge.isFromBase?new y.Z(r.toFixed()).mul(Me.fromPairValue||0).toDP(qe).toFixed():new y.Z(Me.fromPairValue||0).div(r).toDP(qe).toFixed())}}),[se,qe,ze,null===Ge||void 0===Ge?void 0:Ge.isFromBase,Me.fromPairValue]);(0,S.useEffect)((function(){if("unset"===Ee.marketStatus&&!Ue.jupSwapMarketPrice){if(He((function(e){return me(me({},e),{},{marketStatus:"pre-launch"})})),Se.current)return;if("buy"===O){if(Re.PRE_LAUNCH_CONSTANTS.initialPrice){var e=new y.Z(Re.PRE_LAUNCH_CONSTANTS.initialPrice||0).div(rt||0);at(e)}}else se("targetPrice","")}if("pre-launch"===Ee.marketStatus&&Ue.jupSwapMarketPrice&&Ue.jupSwapMarketPrice.mul(.99).lt(Le.m)){if(He((function(e){return me(me({},e),{},{constants:Re.IN_RANGE_CONSTANTS,marketStatus:"in-range"})})),Se.current)return;st(Ue.jupSwapMarketPrice,"buy"===O?Re.IN_RANGE_CONSTANTS.initialFactor:1)}if(Ue.jupSwapMarketPrice&&Ue.jupSwapMarketPrice.mul(.99).gte(Le.m)){if(He((function(e){return me(me({},e),{},{constants:Re.OUT_OF_RANGE_CONSTANTS,marketStatus:"out-of-range"})})),Se.current)return;st(Ue.jupSwapMarketPrice,"buy"===O?Re.OUT_OF_RANGE_CONSTANTS.initialFactor:1)}}),[Ee.constants.initialFactor,Ee.marketStatus,Ee.swapMarketPrice,st,Ue.jupSwapMarketPrice,He,Re,Le,O,rt,at,se]);var lt=(0,F.E)(),ot=(0,S.useMemo)((function(){var e=new y.Z(0);if(!Me.targetPrice||!Ee.swapMarketPrice)return e;var t=new y.Z(Ie).sub(Ee.swapMarketPrice).div(Ee.swapMarketPrice);return(e=new y.Z(100).mul(t).toDP(2)).isFinite()?e:new y.Z(0)}),[Me.targetPrice,Ee.swapMarketPrice,Ie]),ct=(0,S.useMemo)((function(){return ot.gt(1e4)?">10000":"".concat(ot.toNumber()>0?"+":"").concat(ot.toDP(2).toString())}),[ot]),dt=(0,S.useMemo)((function(){return null!==Ge&&void 0!==Ge&&Ge.isFromBase?ot.toNumber()<0:ot.toNumber()>0}),[null===Ge||void 0===Ge?void 0:Ge.isFromBase,ot]),ut=(0,S.useMemo)((function(){return null!==Ge&&void 0!==Ge&&Ge.isFromBase?ot.toNumber()>0:ot.toNumber()<0}),[null===Ge||void 0===Ge?void 0:Ge.isFromBase,ot]),mt=(0,S.useMemo)((function(){return"pre-launch"!==Ee.marketStatus&&dt||ut}),[Ee.marketStatus,dt,ut]),xt=(0,S.useMemo)((function(){if(lt){if("unset"===Ee.marketStatus||"pre-launch"===Ee.marketStatus)return;if(!Ee.swapMarketPrice)return(0,W.jsx)(c.cC,{id:"Could not retrieve market price for this pair. Trade with caution"});var e=(0,W.jsx)("button",{type:"button",onClick:function(){I("swap")},className:"font-semibold underline",children:d.ag._("Jupiter Swap")}),t=(0,W.jsx)(c.cC,{id:"Limit price is {0}% {1} than market, you are {2} at a much {3} rate. We recommend that you use {swapLink} instead",values:{0:ot.absoluteValue(),1:null!==Ge&&void 0!==Ge&&Ge.isFromBase?"lower":"higher",2:null!==Ge&&void 0!==Ge&&Ge.isFromBase?"selling":"buying",3:null!==Ge&&void 0!==Ge&&Ge.isFromBase?"lower":"higher",swapLink:e}});if(null!==Ge&&void 0!==Ge&&Ge.isFromBase){if(ot.toNumber()<=-.5)return t}else if(ot.toNumber()>=.5)return t}}),[lt,Ee.marketStatus,Ee.swapMarketPrice,ot,null===Ge||void 0===Ge?void 0:Ge.isFromBase,I]),ft=(0,v.FB)(r.address).balance,vt=S.useCallback((function(e){var t;e.preventDefault(),t=Me.fromPair===M.W4.toBase58()?new y.Z(ft).gt(x.WO)?new y.Z(ft).minus(x.WO).toString():"0":String(ft),se("fromPairValue",t);var n=null!==Ge&&void 0!==Ge&&Ge.isFromBase?Ie:Ie?1/Ie:0;se("toPairValue",new y.Z(t).mul(n).toFixed())}),[Me.fromPair,se,null===Ge||void 0===Ge?void 0:Ge.isFromBase,Ie,ft]),ht=(0,S.useMemo)((function(){if(null===pe||void 0===pe||!pe.adapter.connected)return!1;if((null===r||void 0===r?void 0:r.address)!==M.W4.toBase58())return!1;if(!(0,b.Hd)(Me.fromPairValue))return!1;var e=new y.Z(ft).minus(x.WO);return new y.Z(Me.fromPairValue||0).gt(e)}),[null===r||void 0===r?void 0:r.address,ft,null===pe||void 0===pe?void 0:pe.adapter.connected,Me.fromPairValue]),pt=(0,S.useMemo)((function(){return new y.Z(Me.fromPairValue||0).lte(ft)}),[ft,Me.fromPairValue]),bt=(0,S.useMemo)((function(){var e=re.CO.includes(r.address)&&re.CO.includes(i.address),t=re.Jx.includes(r.address)&&re.Jx.includes(i.address);return q.data?e||t?new y.Z(q.data.makerStableFee.toString()).div(100).toFixed(2)+"%":new y.Z(q.data.makerFee.toString()).div(100).toFixed(2)+"%":null}),[r.address,i.address,q.data]);(0,S.useMemo)((function(){Se.current=!1,r&&se("fromPair",r.address),i&&se("toPair",i.address),se("targetPrice",""),se("toPairValue","")}),[r.address,i.address,O]);var gt=S.useRef(null),wt=S.useState(!1),jt=(0,s.Z)(wt,2),yt=jt[0],kt=jt[1];(0,b.O3)(gt,(function(){kt(!1)}));var Nt=(0,S.useMemo)((function(){return new y.Z(Me.fromPairValue||0).mul(rt||0)}),[rt,Me.fromPairValue]),Pt=S.useMemo((function(){return{isFromValueTooLow:Nt.lt(.99*Ee.constants.minUSD)}}),[Ee.constants.minUSD,Nt]).isFromValueTooLow,St=(0,S.useMemo)((function(){var e=[];"pre-launch"===Ee.marketStatus&&("buy"===O&&new y.Z(rt||0).mul(Ie).lt((null===Be||void 0===Be?void 0:Be.min)||0)&&Be&&e.push((0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("p",{children:d.ag._("Your Limit Order will most likely NOT FILL")}),(0,W.jsxs)("p",{children:["Recommended Range: ",(0,W.jsxs)("span",{className:"font-semibold",children:[Be.min," USDC"]})," -"," ",(0,W.jsxs)("span",{className:"font-semibold",children:[Be.max," USDC"]})]})]})));return e}),[Be,Ee.marketStatus,rt,O,Ie]),Ct=(0,S.useMemo)((function(){var e,t=[];return null!==pe&&void 0!==pe&&null!==(e=pe.adapter)&&void 0!==e&&e.publicKey&&Me.fromPairValue&&Pt&&t.push(d.ag._("Minimum {0} USD required",{0:Ee.constants.minUSD})),function(){if(Ie){if("pre-launch"===Ee.marketStatus||"in-range"===Ee.marketStatus){if(!Ee.constants.maxPrice)return void t.push(d.ag._("Missing maxPrice"));if("buy"===O){if(!rt)return void t.push(d.ag._("Missing fromTokenPrice"));var e=new y.Z(rt).mul(Ie);e.gt(Ee.constants.maxPrice)&&t.push(d.ag._("Your Limit Order price is higher than the max price of {0} USD.",{0:Ee.constants.maxPrice})),Ee.constants.minPrice&&e.lt(Ee.constants.minPrice)&&t.push(d.ag._("Your Limit Order price is lower than the minimum price of {0} USD.",{0:Ee.constants.minPrice}))}if("sell"===O){if(!it)return void t.push(d.ag._("Missing toTokenPrice"));var n=new y.Z(it).mul(Ie);Ee.constants.minPrice&&n.lt(Ee.constants.minPrice)&&t.push(d.ag._("Your Limit Order price is lower than the min price of {0} USD.",{0:Ee.constants.minPrice}))}}}else t.push(d.ag._("Please enter a target price"))}(),function(){if(Ie&&("in-range"===Ee.marketStatus||"out-of-range"===Ee.marketStatus)){if(!Ee.constants.maxGuardRails)return void t.push(d.ag._("maxGuardRails is not defined"));(null!==Ge&&void 0!==Ge&&Ge.isFromBase?ot.toNumber()<-Ee.constants.maxGuardRails:ot.toNumber()>Ee.constants.maxGuardRails)&&t.push(d.ag._("Your Limit Order price is {0} than the max allowed percentage of {1}%",{0:null!==Ge&&void 0!==Ge&&Ge.isFromBase?"higher":"lower",1:Ee.constants.maxGuardRails}))}}(),pt||t.push((0,W.jsxs)("div",{className:"space-y-1",children:[d.ag._("Insufficient balance, you have {maxBalance} {0}.",{0:r.symbol,maxBalance:ft}),(0,W.jsx)("br",{}),(0,W.jsx)("button",{type:"button",className:"underline cursor-pointer",onClick:vt,children:d.ag._("Use available balance")})]})),t}),[null===pe||void 0===pe||null===(t=pe.adapter)||void 0===t?void 0:t.publicKey,Me.fromPairValue,Ie,Pt,Ee.marketStatus,Ee.constants.minUSD,Ee.constants.maxPrice,Ee.constants.minPrice,Ee.constants.maxGuardRails,pt,ft,r.symbol,vt,O,rt,it,null===Ge||void 0===Ge?void 0:Ge.isFromBase,ot]),Mt=(0,S.useMemo)((function(){var e=Me.fromPairValue,t=Me.targetPrice,n=Me.toPairValue;return Number(e)<=0||Number(n)<=0||Number(t)<=0||oe.isSubmitting||!pt||ht||Ct.length>0}),[oe.isSubmitting,Me,pt,ht,Ct]),Zt=(0,S.useCallback)(function(){var e=(0,a.Z)(o().mark((function e(t){var a,s,m,x,f,v,b,w,k,S,C,M,Z;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(pe&&pe.adapter.publicKey&&be&&ge&&r&&i){e.next=2;break}return e.abrupt("return");case 2:return a=new j.BN(new y.Z(t.fromPairValue).mul(Math.pow(10,r.decimals)).round().toString()),s=new j.BN(new y.Z(t.toPairValue).mul(Math.pow(10,i.decimals)).round().toString()),m=g.PublicKey.default,e.prev=5,e.next=8,ce(pe.adapter);case 8:return x=e.sent,e.next=11,n.createOrder({owner:pe.adapter.publicKey,inAmount:a,outAmount:s,inputMint:new g.PublicKey(t.fromPair),outputMint:new g.PublicKey(t.toPair),expiredAt:null,base:x.publicKey});case 11:return f=e.sent,v=f.tx,b=f.orderPubKey,h({publicKey:m=b,account:{oriMakingAmount:a,makingAmount:a,takingAmount:s,oriTakingAmount:s,inputMint:new g.PublicKey(t.fromPair),outputMint:new g.PublicKey(t.toPair),expiredAt:null}}),e.next=18,ke.getLatestBlockhash("confirmed");case 18:return w=e.sent,e.next=21,new Promise((function(e){var t=(0,ee.c)({inAmount:P().BigInt(s.toString()),inputDecimal:i.decimals,outAmount:P().BigInt(a.toString()),outputDecimal:r.decimals},!0),n="buy"===O?rt?new y.Z(rt).mul(Me.targetPrice):null:"sell"===O&&it?new y.Z(it).mul(Me.targetPrice):null;fe((0,W.jsx)(le.Z,{quotedRate:t,onConfirm:function(){return e(!0)},inputAmount:new y.Z(a.toString()).div(Math.pow(10,r.decimals)).toString(),outputAmount:new y.Z(s.toString()).div(Math.pow(10,i.decimals)).toString(),inputPair:r,outputPair:i,usdRate:n}),{onClose:function(){e(!1)},containerStyle:{borderRadius:"12px"}})}));case 21:if(e.sent){e.next=25;break}return l(m),e.abrupt("return");case 25:return e.next=27,w;case 27:return k=e.sent,S=k.blockhash,C=k.lastValidBlockHeight,M=new g.Transaction({feePayer:pe.adapter.publicKey,blockhash:S,lastValidBlockHeight:C}).add(v),e.next=33,Ze(M,{extraSigners:"secretKey"in x?[x]:[],blockhash:S,lastValidBlockHeight:C,idl:u.xO,idlProgramId:u.zy["mainnet-beta"],skipPreflight:!0},{successMessage:(0,W.jsx)(c.cC,{id:"Limit order placed for {0} {1} @ {2} {3}",values:{0:new y.Z(t.fromPairValue).toDP(2).toString(),1:r.symbol,2:new y.Z(t.toPairValue).toDP(i.decimals).toString(),3:i.symbol}}),submittingMessage:(0,W.jsx)(c.cC,{id:"Placing limit order"}),errorMessage:d.ag._("Failed to create order"),referenceFee:"MEDIUM"===Ae?Te.lo.m:"HIGH"===Ae?Te.lo.h:"VERY_HIGH"===Ae?Te.lo.vh:void 0,minimumFee:p.uo,requestComputeBudgetLimit:3e5});case 33:if(Z=e.sent,Z.success){e.next=37;break}throw new Error("Failed to create order");case 37:N(m),e.next=44;break;case 40:e.prev=40,e.t0=e.catch(5),console.error(e.t0),l(m);case 44:case"end":return e.stop()}}),e,null,[[5,40]])})));return function(t){return e.apply(this,arguments)}}(),[pe,be,ge,r,i,n,h,ke,Ze,N,fe,O,rt,Me.targetPrice,it,l,Ae,Te.lo.m,Te.lo.h,Te.lo.vh]);return(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)("form",{className:"flex flex-col justify-center h-auto w-full",onSubmit:ne(Zt),children:[A,(0,W.jsxs)("div",{children:[(0,W.jsxs)("div",{className:"flex justify-between items-end",children:[(0,W.jsx)("div",{className:"text-black/50 dark:text-white text-xs md:text-sm",children:(0,W.jsx)(c.cC,{id:"You're Selling"})}),(0,W.jsxs)("div",{className:"text-black-25 dark:text-[#CFF3FF]/[0.35] text-xs flex items-center",children:[(0,W.jsx)("div",{children:(0,W.jsx)(B.Z,{width:12,height:12})}),i.address?(0,W.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,W.jsxs)("div",{className:"flex item-center ml-1 cursor-pointer dark:hover:text-white-50 hover:text-black-50",onClick:vt,children:[(0,W.jsx)($.Z,{mintAddress:r.address}),(0,W.jsx)("span",{className:"ml-1",children:r.symbol})]}),(0,W.jsx)(m.oi,{mint:r.address,onBalanceChange:function(e){se("fromPairValue",e.toString());var t=null!==Ge&&void 0!==Ge&&Ge.isFromBase?Ie:Ie?1/Ie:0;se("toPairValue",new y.Z(e).mul(t).toFixed())}})]}):(0,W.jsx)("span",{children:"0.00"})]})]}),(0,W.jsx)("div",{className:"mt-2 border-b border-transparent",children:(0,W.jsx)("div",{className:(0,R.cn)("p-4 border border-transparent rounded-xl bg-jupiter-input-light dark:bg-v2-background-dark group","focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:(0,W.jsx)(ie.Z,{disableTokenSelect:"sell"===O,testId:"fromPair",pair:r,pairName:"fromPairValue",disabled:!1,control:te,onSubmit:Ve,mintsList:Ce,modalId:re.r$,watchAllFields:Me,onChangeCalculate:function(e){var t=(0,b.Hd)(e)?e:0,n=null!==Ge&&void 0!==Ge&&Ge.isFromBase?Ie:Ie?1/Ie:0;se("fromPairValue",t||"",{shouldDirty:!0}),se("toPairValue",new y.Z(t).mul(n).toDP(i.decimals).toFixed())}})})}),ht?(0,W.jsxs)("div",{className:"mt-2 flex items-center fill-current text-v2-lily/60 text-xs mb-2 gap-2",children:[(0,W.jsx)(D.Z,{}),(0,W.jsx)(c.cC,{id:"We recommend having at least ${MINIMUM_SOL_BALANCE} SOL for any transaction",values:{MINIMUM_SOL_BALANCE:x.WO}})]}):null,(0,W.jsx)("div",{className:"mt-2 sm:space-x-3 space-y-2 sm:space-y-0 flex-col-reverse sm:flex sm:flex-row mb-2 relative",children:(0,W.jsxs)("div",{className:(0,R.cn)("w-full bg-jupiter-input-light dark:bg-v2-background-dark space-y-1 pt-2 pb-6 px-4 rounded-xl flex flex-col justify-center relative","border border-transparent focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:[(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsxs)("div",{className:"flex items-center",children:[Ye?(0,W.jsxs)("div",{className:"text-v2-lily/50 text-xs flex items-center",children:[null!==Ge&&void 0!==Ge&&Ge.isFromBase?(0,W.jsx)(c.cC,{id:"Sell"}):(0,W.jsx)(c.cC,{id:"Buy"})," ",(0,W.jsx)(c.cC,{id:"{0} at rate",values:{0:null===Ye||void 0===Ye?void 0:Ye.symbol}}),We?(0,W.jsx)(J.Z,{className:"ml-1",width:8,height:8}):null]}):(0,W.jsx)(z.O,{className:"h-4 w-2"}),mt?(0,W.jsx)("div",{className:(0,R.cn)("flex items-center text-xs ml-1 font-medium text-v2-lily/50",{}),children:"(".concat(ct,"%)")}):null]}),Ee.swapMarketPrice&&("in-range"===Ee.marketStatus||"out-of-range"===Ee.marketStatus)&&(0,W.jsx)("button",{type:"button",className:"dark:text-white-35 dark:hover:text-white-75 text-black-35 hover:text-black text-xxs cursor-pointer underline rounded",onClick:function(){return st(Ee.swapMarketPrice)},children:(0,W.jsx)(c.cC,{id:"Use Market"})})]}),(0,W.jsx)(C.Qr,{name:"targetPrice",control:te,render:function(e){var t=e.field,n=t.onChange,r=t.value;return(0,W.jsxs)("div",{className:"",ref:gt,onFocus:function(){return kt(!0)},children:[(0,W.jsxs)("div",{className:"flex items-end",children:[(0,W.jsx)(X.Z,{testId:"targetPrice",decimals:qe,onChangeWithoutEffect:function(e){(0,b.Hd)(e)&&ze(null!==Ge&&void 0!==Ge&&Ge.isFromBase?new y.Z(e).mul(Me.fromPairValue||0).toDP(qe).toFixed():new y.Z(Me.fromPairValue||0).div(e).toDP(qe).toFixed()),n(e)},onFocus:function(){return Se.current=!0},value:r,disabled:!1,ref:we,className:"!text-left !text-sm flex-1"}),Qe?(0,W.jsx)("div",{className:"flex items-center",children:(0,W.jsx)("span",{className:"font-semibold text-sm",children:null===Qe||void 0===Qe?void 0:Qe.symbol})}):(0,W.jsx)(z.O,{className:"w-11 h-6"})]}),Qe&&(0,W.jsx)("div",{className:"text-xs text-v2-lily/30 absolute bottom-2",children:(0,W.jsx)(E.default,{prefix:"\u2248 ",tokenInfo:Qe,amount:Number(r),maxDecimals:6})}),"buy"===O&&(0,W.jsx)("div",{className:(0,R.cn)("absolute pointer-events-none opacity-0 left-0 -bottom-6 transition-all duration-100 ease-in-out",yt?"pointer-events-auto opacity-100":""),children:(0,W.jsx)(Q,{actions:Ee.constants.quickPrice.map((function(e){return{text:e.text,onClick:function(){st(Ee.swapMarketPrice,e.factor)}}}))})})]})}})]})}),"pre-launch"===Ee.marketStatus&&(null===Be||void 0===Be?void 0:Be.min)&&Be.max&&(0,W.jsxs)("div",{className:"flex items-center fill-current text-v2-lily/60 text-xs mb-2 gap-2",children:[(0,W.jsx)(D.Z,{}),(0,W.jsxs)("span",{children:["Recommended Range: ",(0,W.jsxs)("span",{className:"font-semibold",children:[Be.min," USDC"]})," -"," ",(0,W.jsxs)("span",{className:"font-semibold",children:[Be.max," USDC"]})]})]}),(0,W.jsx)("div",{className:(0,R.cn)("bg-transparent transition-all duration-700 align-bottom my-4",{"opacity-0 h-0":!Boolean(xt),"opacity-100":Boolean(xt)}),children:xt&&(0,W.jsx)("div",{className:(0,R.cn)("border-yellow-500 bg-yellow-300/25 rounded-xl px-3 border text-yellow-500 transition-all duration-500 text-xs font-medium align-middle py-2"),children:xt})})]}),(0,W.jsxs)("div",{className:"flex flex-col",children:[(0,W.jsxs)("div",{className:"border-b border-transparent",children:[(0,W.jsxs)("div",{className:"flex justify-between items-end",children:[(0,W.jsx)("div",{className:"text-black/50 dark:text-white text-xs md:text-sm",children:(0,W.jsx)(c.cC,{id:"To receive"})}),(0,W.jsxs)("div",{className:"text-black-25 dark:text-[#CFF3FF]/[0.35] text-xs flex",children:[(0,W.jsx)("div",{className:"mt-[1px]",children:(0,W.jsx)(B.Z,{width:12,height:12})}),i.address?(0,W.jsxs)("div",{className:"ml-1",children:[(0,W.jsx)($.Z,{mintAddress:i.address}),(0,W.jsx)("span",{className:"ml-1",children:i.symbol})]}):(0,W.jsx)("span",{children:"0.00"})]})]}),(0,W.jsx)("div",{className:"mt-2 border-b border-transparent",children:(0,W.jsx)("div",{className:(0,R.cn)("p-4 border border-transparent rounded-xl bg-jupiter-input-light dark:bg-v2-background-dark group","focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:(0,W.jsx)(ie.Z,{disableTokenSelect:"buy"===O,testId:"toPair",pair:i,pairName:"toPairValue",control:te,onSubmit:Fe,mintsList:Ce,modalId:re.re,watchAllFields:Me,onChangeCalculate:function(e){var t=(0,b.Hd)(e)?e:0,n=null!==Ge&&void 0!==Ge&&Ge.isFromBase?Ie:Ie?1/Ie:0;se("toPairValue",0===t?"":t,{shouldDirty:!0}),se("fromPairValue",0===t?"0":new y.Z(t).div(n).toFixed())}})})})]}),(0,W.jsx)("div",{className:"flex justify-between mt-3",children:(0,W.jsx)(c.cC,{id:"<0>Platform fee:{0}</0>",values:{0:q.isLoading?(0,W.jsx)(z.O,{className:"w-20 h-4"}):(0,W.jsx)("span",{className:"ml-1 text-v2-primary",children:bt})},components:{0:(0,W.jsx)("span",{className:"text-black-50 dark:text-white-50 text-[11px] font-medium inline"})}})}),oe.isDirty&&St.length>0&&(0,W.jsxs)("div",{className:"mt-3 py-3 pl-2 rounded-lg text-xs flex items-center text-white space-x-2 w-full bg-warning/80",children:[(0,W.jsx)("div",{className:"h-3 w-3 mt-0.5 fill-current",children:(0,W.jsx)(L.Z,{fill:"inherit"})}),(0,W.jsx)("div",{className:"flex flex-col space-y-1",children:St.map((function(e,t){return(0,W.jsx)("div",{children:e},t)}))})]}),oe.isDirty&&Ct.length>0&&(0,W.jsxs)("div",{className:"my-3 py-3 pl-2 rounded-lg text-xs flex items-center text-white space-x-2 w-full bg-[#F04A44]",children:[(0,W.jsx)("div",{className:"h-3 w-3 mt-0.5 fill-current",children:(0,W.jsx)(L.Z,{fill:"inherit"})}),(0,W.jsx)("div",{className:"flex flex-col space-y-1",children:Ct.map((function(e,t){return(0,W.jsx)("div",{children:e},t)}))})]}),(0,W.jsx)(U.Z,{className:"text-v2-lily/60 text-xs !px-0",iconSize:12,message:d.ag._("Priority fees are only used to create new orders, and will not improve your chances of getting filled.")}),null!==pe&&void 0!==pe&&pe.adapter.publicKey?(0,W.jsx)("button",{type:"submit",className:(0,R.cn)("w-full mt-3 bg-[#121D28] border border-transparent dark:hover:border dark:hover:border-v2-primary rounded-xl",{"opacity-50 cursor-not-allowed":Mt}),disabled:Mt,children:(0,W.jsx)("div",{className:"flex items-center justify-center px-8 py-4 rounded-xl dark:bg-[rgba(18,29,40,1)]",children:(0,W.jsx)("span",{className:"text-center",children:ht||!pt?(0,W.jsx)(c.cC,{id:"Insufficient {0}",values:{0:null===r||void 0===r?void 0:r.symbol}}):(0,W.jsx)(Y.Z,{children:(0,W.jsx)(c.cC,{id:"Place Limit Order"})})})})}):(0,W.jsx)(de.Z,{})]})]})})},pe=function(e){var t=e.side,n=e.fromTokenInfo,r=e.toTokenInfo,l=e.targetToken,m=e.description,x=e.setForm,j=(0,f.O)(),N=j.wallet,P=j.signAllTransactions,C=j.publicKey,Z=(0,v.Bn)(),O=Z.getTokenInfo,A=Z.connection,F=(0,h.lm)(),I=F.toast,_=F.close,D=(0,S.useMemo)((function(){return new u.vN(A)}),[A]),B=(0,T.gs)().priorityLevel,L=(0,S.useState)("Open Orders"),R=L[0],E=L[1],H=(0,S.useState)(0),U=H[0],Q=H[1];(0,S.useEffect)((function(){Q(0)}),[R]);var Y=(0,S.useState)(!1),z=Y[0],J=Y[1],$=S.useState(1),X=(0,s.Z)($,2),ee=X[0],ie=X[1],le=(0,w.a)([(null===C||void 0===C?void 0:C.toString())||"",l,ee],(0,a.Z)(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,D.getOrders([(0,u.Gt)(C)]);case 4:return t=e.sent,n=t.filter((function(e){var t=e.account,n=t.outputMint;return t.inputMint.toString()===l||n.toString()===l})),e.abrupt("return",n||[]);case 7:case"end":return e.stop()}}),e)}))),{enabled:z&&Boolean(C)&&"Open Orders"===R,refetchInterval:!1,keepPreviousData:!0}),ce=le.data,de=le.isFetching,ue=le.refetch,me=(0,S.useMemo)((function(){return null!==ce&&void 0!==ce&&ce.length?Math.ceil(ce.length/M.eN):0}),[ce]),fe=(0,S.useMemo)((function(){return ce||[]}),[ce]),ve=(0,S.useMemo)((function(){return fe?fe.slice(U*M.eN,U*M.eN+10):[]}),[U,fe]),pe=oe.d.orderWithTradeHistoryWithItemsCount.useQuery({wallet:C?null===C||void 0===C?void 0:C.toString():"",inputMint:l,outputMint:l,pageIndex:U},{enabled:Boolean(C)&&"Order History"===R,refetchInterval:!1,refetchOnWindowFocus:!1,keepPreviousData:!0}),be=pe.data,ge=pe.isFetching,we=pe.refetch,je=(0,S.useMemo)((function(){return null!==be&&void 0!==be&&be.itemsCount?Math.ceil((null===be||void 0===be?void 0:be.itemsCount)/M.eN):0}),[be]),ye=(0,S.useState)([]),ke=ye[0],Ne=ye[1];(0,S.useEffect)((function(){Ne((function(e){return e.filter((function(e){return!Boolean(null===ce||void 0===ce?void 0:ce.find((function(t){return t.publicKey&&e.publicKey.equals(t.publicKey)})))}))}))}),[ce,Ne]);var Pe=(0,V.R3)(),Se=(0,k.KO)(p.yz),Ce=(0,s.Z)(Se,1)[0],Me=(0,S.useCallback)(function(){var e=(0,a.Z)(o().mark((function e(t){var n,r,i,s,l,m,x,f,v,h,w,j,k,S,C,M,Z,T;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="cancel-limit-order-toast",r=(0,W.jsx)(W.Fragment,{}),i=[],s=[],ie((function(e){return e+1})),N&&N.adapter.publicKey&&P&&ce&&0!==t.length){e.next=7;break}return e.abrupt("return");case 7:if(!(l=1===t.length?ce.find((function(e){return e.publicKey.equals(t[0])})):null)||!l.publicKey){e.next=23;break}return e.prev=9,m=O(l.account.inputMint.toString()),x=O(l.account.outputMint.toString()),e.next=14,D.cancelOrder({owner:N.adapter.publicKey,orderPubKey:new g.PublicKey(l.publicKey)});case 14:i[0]=e.sent,m&&x?(f=(0,b.lt)(l.account.makingAmount||0,m.decimals),v=(0,b.lt)(l.account.takingAmount||0,x.decimals),r=(0,W.jsx)("p",{children:(0,W.jsx)(c.cC,{id:"Cancelling order for {0} {1} @ {2} {3}",values:{0:new y.Z(f).toDP(2).toString(),1:m.symbol,2:new y.Z(v).toDP(2).toString(),3:x.symbol}})})):r=(0,W.jsx)("p",{children:(0,W.jsx)(c.cC,{id:"Cancelling order"})}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(9),console.log(e.t0);case 21:e.next=29;break;case 23:if(!(t.length>1)){e.next=29;break}return r=(0,W.jsx)("div",{children:t.length>re.TC?(0,W.jsxs)("div",{className:"flex flex-col",children:[(0,W.jsx)("p",{children:(0,W.jsx)(c.cC,{id:"You may need to approve"})}),(0,W.jsx)("p",{children:(0,W.jsx)(c.cC,{id:"multiple transactions."})})]}):(0,W.jsx)("p",{children:(0,W.jsx)(c.cC,{id:"Cancelling {0} orders...",values:{0:t.length}})})}),h=(0,K.OZ)(t,re.TC),e.next=28,Promise.all(h.map(function(){var e=(0,a.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.batchCancelOrder({owner:N.adapter.publicKey,ordersPubKey:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 28:i=e.sent;case 29:if(i){e.next=31;break}throw new Error("Failed to get cancel order instructions");case 31:e.prev=31,w=xe(i),e.prev=33,w.s();case 35:if((j=w.n()).done){e.next=47;break}return k=j.value,e.next=39,A.getLatestBlockhash("confirmed");case 39:return S=e.sent,C=S.blockhash,M=S.lastValidBlockHeight,Z=new g.Transaction({feePayer:N.adapter.publicKey,blockhash:C,lastValidBlockHeight:M}).add(k),e.next=45,Pe(Z,{blockhash:C,idl:u.xO,idlProgramId:u.zy["mainnet-beta"],lastValidBlockHeight:M},{successMessage:(0,W.jsx)(c.cC,{id:"Orders cancelled"}),submittingMessage:r,errorMessage:(0,W.jsx)(c.cC,{id:"Failed to cancel orders"}),referenceFee:"MEDIUM"===B?Ce.lo.m:"HIGH"===B?Ce.lo.h:"VERY_HIGH"===B?Ce.lo.vh:void 0,minimumFee:p.uo,requestComputeBudgetLimit:3e5});case 45:e.next=35;break;case 47:e.next=52;break;case 49:e.prev=49,e.t1=e.catch(33),w.e(e.t1);case 52:return e.prev=52,w.f(),e.finish(52);case 55:_(n),e.next=64;break;case 58:e.prev=58,e.t2=e.catch(31),_(n),T=t.length>1?d.ag._("Failed to cancel some orders"):d.ag._("Failed to cancel order"),I({duration:5e3,title:T,description:(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("p",{children:e.t2.message}),s.map((function(e,t){return(0,W.jsx)("p",{children:(0,W.jsx)(te.Z,{txid:e})},t)}))]}),closeOnClick:!1,variant:G.Lb.INFO}),console.error({err:e.t2});case 64:return e.prev=64,ue(),e.finish(64);case 67:case"end":return e.stop()}}),e,null,[[9,18],[31,58,64,67],[33,49,52,55]])})));return function(t){return e.apply(this,arguments)}}(),[N,P,ce,O,D,_,A,Pe,B,Ce.lo.m,Ce.lo.h,Ce.lo.vh,I,ue]),Ze=(0,S.useMemo)((function(){return!ce||0===ce.length||"Order History"===R}),[R,ce]),Oe=(0,S.useCallback)((function(){if(ce&&!Ze){var e=ce.map((function(e){return e.publicKey})).filter(Boolean);Me(e)}}),[Ze,ce,Me]),Te=(0,S.useCallback)((function(){ue(),we()}),[ue,we]),Ae=(0,S.useCallback)((function(e){Ne((function(t){return t.filter((function(t){return!t.publicKey.equals(e)}))}))}),[Ne]),Ve=(0,S.useCallback)((function(e){Ne((function(t){return[].concat((0,i.Z)(t),[e])}))}),[Ne]),Fe=(0,S.useCallback)((function(e){Ne((function(t){return t.filter((function(t){return!t.publicKey.equals(e)}))})),Te()}),[Ne,Te]);return n&&r?(0,W.jsxs)("div",{children:[(0,W.jsx)(he,{side:t,setForm:x,limitOrder:D,fromTokenInfo:n,toTokenInfo:r,onOrderCreationFailed:Ae,onOrderCreationStart:Ve,onOrderCreationSuccess:Fe,description:m}),z?(0,W.jsxs)(ne.Z,{tabs:["Open Orders","Order History"],activeTab:R,setActiveTab:E,isLoading:de||ge,cancelAllOrderDisabled:Ze,cancelAllOrder:Oe,refetch:Te,className:"!py-0 mt-3",children:["Open Orders"===R?(0,W.jsx)(ae.Z,{orders:ve,cancelOrder:Me,ongoingSubmission:ke,loading:de,pageIndex:U,setPageIndex:Q,pageCount:me,isV2:!0}):null,"Order History"===R?(0,W.jsx)(se.Z,{orders:(null===be||void 0===be?void 0:be.orders)||[],loading:ge,pageIndex:U,setPageIndex:Q,pageCount:je,isV2:!0}):null]}):(0,W.jsx)("div",{className:"w-full mt-3 text-xs overflow-x-auto border rounded-lg border-white/5 flex flex-col justify-center items-center p-4",children:(0,W.jsx)(q.Z,{type:"button",size:"sm",className:"w-auto px-4 bg-[#121D28] border border-transparent",onClick:function(){return J(!0)},children:(0,W.jsx)("span",{className:"text-sm",children:"View Orders"})})})]}):null}},26260:function(e,t,n){var r=n(97620),i=n(93981),a=n(30610),s=n(24201),l=n(25546),o=n(29541);t.Z=function(e){var t=e.className,n=e.children,c=e.data,d=e.rowRenderer,u=(e.value,e.onChange),m=e.contentClassName,x=e.rowClassName,f=e.filter,v=e.disabled,h=i.useState(!1),p=(0,r.Z)(h,2),b=p[0],g=p[1],w=i.useState(""),j=(0,r.Z)(w,2),y=j[0],k=j[1],N=(0,l.Nr)(y,150),P=i.useMemo((function(){return f&&N?f(c,N):c}),[c,N,f]);return(0,o.jsx)(a.Z,{isOpen:b,onClose:function(){return g(!1)},id:"settings-button",placement:"bottom-start",matchWidth:!0,buttonContent:(0,o.jsx)("button",{type:"button",onClick:function(){return g((function(e){return!e}))},className:(0,s.cn)("flex items-center py-3 pl-4 pr-5 space-x-2 rounded-lg bg-jupiter-light dark:bg-white/10 text-white/75",t),disabled:v,children:n}),buttonContentClassName:"!w-full",popoverContent:(0,o.jsxs)("div",{className:"mt-1 bg-jupiter-light rounded-lg dark:bg-white/10",children:[f?(0,o.jsx)("div",{className:"sticky top-0 flex",children:(0,o.jsx)("input",{placeholder:"Search...",className:"w-full py-2 px-4 bg-v2-background-dark text-white text-sm !outline-none",value:y,onChange:function(e){return k(e.target.value)}})}):null,P.map((function(e,t){return(0,o.jsx)("button",{onClick:function(){u(e),g(!1)},className:(0,s.cn)("first:pt-3 last:pb-3 w-full flex items-center py-1.5 pl-4 pr-3 space-x-2 text-white/75 hover:bg-porcelain dark:hover:bg-shark",x),children:d(e)},t)}))]}),contentClassName:(0,s.cn)("!bg-transparent !shadow-none z-50 webkit-scrollbar",m)})}},94223:function(e,t,n){n(93981);var r=n(29541);t.Z=function(e){var t=e.width,n=void 0===t?32:t,i=e.height,a=void 0===i?32:i;return(0,r.jsx)("svg",{width:n,height:a,viewBox:"0 0 32 32",fill:"inherit",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.1425 8.45597H5.22047L5.22025 8.45592C4.66944 8.40838 4.15821 8.1496 3.79392 7.73368C3.52351 7.52371 3.34106 7.22064 3.28188 6.88329C3.24718 5.65089 4.6625 4.79883 5.9425 4.79883H22.3996C23.1264 4.80107 23.8229 5.09067 24.3368 5.60455C24.8507 6.11843 25.1403 6.81496 25.1425 7.54168V8.45597ZM26.0564 10.2846H5.02779C4.54289 10.2846 4.07777 10.092 3.73473 9.74912C3.39187 9.40605 3.19922 8.94094 3.19922 8.45605V25.8275C3.19922 26.555 3.4882 27.2526 4.00248 27.7671C4.51698 28.2814 5.21451 28.5703 5.94208 28.5703H26.0564C26.7839 28.5703 27.4814 28.2814 27.996 27.7671C28.5102 27.2526 28.7992 26.555 28.7992 25.8275V23.0846H24.2278C22.9213 23.0846 21.7139 22.3875 21.0607 21.2561C20.4074 20.1246 20.4074 18.7303 21.0607 17.5989C21.7139 16.4675 22.9213 15.7703 24.2278 15.7703H28.7992V13.0275C28.7992 12.2999 28.5102 11.6024 27.996 11.0879C27.4815 10.5736 26.7839 10.2846 26.0564 10.2846ZM22.4014 19.4277C22.4014 19.9126 22.594 20.3777 22.9369 20.7208C23.2799 21.0636 23.7451 21.2563 24.2299 21.2563H28.8014V17.5991H24.2299C23.745 17.5991 23.2799 17.7918 22.9369 18.1346C22.594 18.4777 22.4014 18.9428 22.4014 19.4277Z",fill:"currentColor"})})}},71932:function(e,t,n){var r=n(63956),i=n(54423),a=(n(93981),n(29541)),s=["width","height"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.width,n=void 0===t?"12":t,r=e.height,l=void 0===r?"12":r,c=(0,i.Z)(e,s);return(0,a.jsx)("svg",o(o({width:n,height:l,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c),{},{children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 10C18 14.4183 14.4183 18 10 18C5.58172 18 2 14.4183 2 10C2 5.58172 5.58172 2 10 2C14.4183 2 18 5.58172 18 10ZM9.93793 12.1728C9.47107 12.1733 9.08835 11.8037 9.07186 11.3372L8.86888 5.61643C8.86042 5.3813 8.94838 5.15338 9.11162 4.98422C9.27485 4.81507 9.49982 4.71992 9.73494 4.71992H10.1409C10.376 4.71992 10.601 4.81507 10.7642 4.98422C10.9275 5.15338 11.0154 5.38131 11.007 5.61643L10.804 11.3372C10.7875 11.8037 10.4048 12.1733 9.93793 12.1728ZM9.93783 15.4176C10.6106 15.4176 11.1557 14.8725 11.1557 14.1997C11.1557 13.5269 10.6106 12.9818 9.93783 12.9818C9.26502 12.9818 8.71992 13.5269 8.71992 14.1997C8.71992 14.8725 9.26502 15.4176 9.93783 15.4176Z",fill:"currentColor"})}))}},82574:function(e,t,n){n.d(t,{P:function(){return i}});var r=n(9364),i={refetchId:(0,r.cn)(0),isLoading:(0,r.cn)(!1)}}}]);
//# sourceMappingURL=8330-48ab7742926b408f.js.map