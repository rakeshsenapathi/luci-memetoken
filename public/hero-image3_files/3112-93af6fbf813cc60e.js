"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3112],{23112:function(e,n,i){i.d(n,{xO:function(){return f},Rn:function(){return S},v4:function(){return P},D9:function(){return A},JK:function(){return v},AU:function(){return x}});var t=i(97175),a=i(7744),r=i(66414),u=i(37153),m=i(84134),s=i(52466),o=i(39983),p=i(795).Buffer;const c=(0,s.struct)([(0,s.u8)("instruction")]);function d(e,n=r.H_){const i=[{pubkey:e,isSigner:!1,isWritable:!0}],t=p.alloc(c.span);return c.encode({instruction:o.c.SyncNative},t),new a.TransactionInstruction({keys:i,programId:n,data:t})}var l=i(41912),g=i(81423),y=i(42754),M=i(795).Buffer,k=(e,n,i)=>new Promise(((t,a)=>{var r=e=>{try{m(i.next(e))}catch(n){a(n)}},u=e=>{try{m(i.throw(e))}catch(n){a(n)}},m=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,u);m((i=i.apply(e,n)).next())})),f={version:"0.1.0",name:"limit_order_2",instructions:[{name:"updateFee",accounts:[{name:"admin",isMut:!0,isSigner:!0},{name:"feeAuthority",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"params",type:{defined:"UpdateFeeParams"}}]},{name:"withdrawFee",accounts:[{name:"admin",isMut:!0,isSigner:!0},{name:"feeAuthority",isMut:!1,isSigner:!1,docs:["CHECK"]},{name:"programFeeAccount",isMut:!0,isSigner:!1},{name:"adminTokenAcocunt",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1}],args:[]},{name:"initializeOrder",accounts:[{name:"payer",isMut:!0,isSigner:!0},{name:"maker",isMut:!1,isSigner:!0},{name:"order",isMut:!0,isSigner:!1},{name:"inputMintReserve",isMut:!0,isSigner:!1},{name:"makerInputMintAccount",isMut:!0,isSigner:!1},{name:"fee",isMut:!1,isSigner:!1},{name:"referral",isMut:!1,isSigner:!1,isOptional:!0},{name:"inputMint",isMut:!1,isSigner:!1},{name:"outputMint",isMut:!1,isSigner:!1},{name:"inputTokenProgram",isMut:!1,isSigner:!1},{name:"outputTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"eventAuthority",isMut:!1,isSigner:!1},{name:"program",isMut:!1,isSigner:!1}],args:[{name:"params",type:{defined:"InitializeOrderParams"}}]},{name:"cancelOrder",accounts:[{name:"signer",isMut:!1,isSigner:!0},{name:"maker",isMut:!0,isSigner:!1},{name:"order",isMut:!0,isSigner:!1},{name:"inputMintReserve",isMut:!0,isSigner:!1},{name:"makerInputMintAccount",isMut:!0,isSigner:!1,isOptional:!0},{name:"inputMint",isMut:!1,isSigner:!1},{name:"inputTokenProgram",isMut:!1,isSigner:!1},{name:"eventAuthority",isMut:!1,isSigner:!1},{name:"program",isMut:!1,isSigner:!1}],args:[]},{name:"preFlashFillOrder",accounts:[{name:"taker",isMut:!1,isSigner:!0},{name:"order",isMut:!0,isSigner:!1},{name:"inputMintReserve",isMut:!0,isSigner:!1},{name:"takerInputMintAccount",isMut:!0,isSigner:!1},{name:"inputMint",isMut:!1,isSigner:!1},{name:"inputTokenProgram",isMut:!1,isSigner:!1},{name:"instruction",isMut:!1,isSigner:!1}],args:[{name:"params",type:{defined:"PreFlashFillOrderParams"}}]},{name:"flashFillOrder",accounts:[{name:"taker",isMut:!0,isSigner:!0},{name:"maker",isMut:!0,isSigner:!1},{name:"order",isMut:!0,isSigner:!1},{name:"inputMintReserve",isMut:!0,isSigner:!1},{name:"makerOutputMintAccount",isMut:!0,isSigner:!1,isOptional:!0},{name:"takerOutputMintAccount",isMut:!0,isSigner:!1,isOptional:!0},{name:"feeAccount",isMut:!0,isSigner:!1},{name:"inputTokenProgram",isMut:!1,isSigner:!1},{name:"outputMint",isMut:!1,isSigner:!1},{name:"outputTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"eventAuthority",isMut:!1,isSigner:!1},{name:"program",isMut:!1,isSigner:!1}],args:[{name:"params",type:{defined:"FlashFillOrderParams"}}]}],accounts:[{name:"order",type:{kind:"struct",fields:[{name:"maker",type:"publicKey"},{name:"inputMint",type:"publicKey"},{name:"outputMint",type:"publicKey"},{name:"inputTokenProgram",type:"publicKey"},{name:"outputTokenProgram",type:"publicKey"},{name:"inputMintReserve",type:"publicKey"},{name:"uniqueId",type:"u64"},{name:"oriMakingAmount",type:"u64"},{name:"oriTakingAmount",type:"u64"},{name:"makingAmount",type:"u64"},{name:"takingAmount",type:"u64"},{name:"borrowMakingAmount",type:"u64"},{name:"expiredAt",type:{option:"i64"}},{name:"feeBps",type:"u16"},{name:"feeAccount",type:"publicKey"},{name:"createdAt",type:"i64"},{name:"updatedAt",type:"i64"},{name:"bump",type:"u8"}]}},{name:"fee",type:{kind:"struct",fields:[{name:"normalFeeBps",type:"u16"},{name:"stableFeeBps",type:"u16"}]}}],types:[{name:"FlashFillOrderParams",type:{kind:"struct",fields:[{name:"maxTakingAmount",type:"u64"}]}},{name:"InitializeOrderParams",type:{kind:"struct",fields:[{name:"uniqueId",type:"u64"},{name:"makingAmount",type:"u64"},{name:"takingAmount",type:"u64"},{name:"expiredAt",type:{option:"i64"}},{name:"feeBps",type:{option:"u16"}}]}},{name:"PreFlashFillOrderParams",type:{kind:"struct",fields:[{name:"makingAmount",type:"u64"}]}},{name:"UpdateFeeParams",type:{kind:"struct",fields:[{name:"normalFeeBps",type:"u16"},{name:"stableFeeBps",type:"u16"}]}}],events:[{name:"TradeEvent",fields:[{name:"orderKey",type:"publicKey",index:!1},{name:"taker",type:"publicKey",index:!1},{name:"remainingMakingAmount",type:"u64",index:!1},{name:"remainingTakingAmount",type:"u64",index:!1},{name:"makingAmount",type:"u64",index:!1},{name:"takingAmount",type:"u64",index:!1}]},{name:"CancelOrderEvent",fields:[{name:"orderKey",type:"publicKey",index:!1}]},{name:"CreateOrderEvent",fields:[{name:"orderKey",type:"publicKey",index:!1},{name:"maker",type:"publicKey",index:!1},{name:"inputMint",type:"publicKey",index:!1},{name:"outputMint",type:"publicKey",index:!1},{name:"inputTokenProgram",type:"publicKey",index:!1},{name:"outputTokenProgram",type:"publicKey",index:!1},{name:"makingAmount",type:"u64",index:!1},{name:"takingAmount",type:"u64",index:!1},{name:"expiredAt",type:{option:"i64"},index:!1},{name:"feeBps",type:"u16",index:!1},{name:"feeAccount",type:"publicKey",index:!1}]}],errors:[{code:6e3,name:"InvalidMakingAmount"},{code:6001,name:"InvalidTakingAmount"},{code:6002,name:"InvalidMaxTakingAmount"},{code:6003,name:"InvalidInputAccount"},{code:6004,name:"InvalidMakerOutputAccount"},{code:6005,name:"InvalidTakerOutputAccount"},{code:6006,name:"InvalidPair"},{code:6007,name:"OrderExpired"},{code:6008,name:"OrderNotExpired"},{code:6009,name:"InvalidAdmin"},{code:6010,name:"InvalidKeeper"},{code:6011,name:"MathOverflow"},{code:6012,name:"ProgramMismatch"},{code:6013,name:"UnknownInstruction"},{code:6014,name:"MissingRepayInstructions"},{code:6015,name:"InstructionNotAllowed"},{code:6016,name:"InvalidOrder"},{code:6017,name:"InvalidBorrowMakingAmount"},{code:6018,name:"InvalidExpiredDate"},{code:6019,name:"FeeBpsTooLow"},{code:6020,name:"FeeBpsTooHigh"},{code:6021,name:"TransferTaxMint"},{code:6022,name:"InvalidOutputMint"}]},S=((0,g.K5)({links:[(0,g.N8)({url:"https://jup.ag/api/trpc"})],transformer:y.ZP}),new a.PublicKey("j1o2qRpjcyUwEvwtcfhEQefh773ZgjxcVRry7LDqg5X")),A=e=>k(void 0,[e],(function*({params:e,maker:n,payer:i=n,inputMint:s,outputMint:o,inputTokenProgram:p=r.H_,outputTokenProgram:c=r.H_,wrapAndUnwrapSol:g=!0,referral:y=null,connection:k}){const A=new t.Y7(k,{},t.Y7.defaultOptions()),P=new t.$r(f,S,A),v=a.PublicKey.findProgramAddressSync([M.from("order"),n.toBuffer(),e.uniqueId.toArrayLike(M,"le",8)],S)[0],x=(0,u.MO)(s,v,!0,p),O=(0,u.MO)(s,n,!0,p),b=(0,u.MO)(o,n,!0,c);let I=a.PublicKey.findProgramAddressSync([M.from("fee")],S)[0],K=[],T=null;s.equals(r.Gd)&&g&&(K=[(0,m.ji)(n,O,n,r.Gd),a.SystemProgram.transfer({fromPubkey:n,toPubkey:O,lamports:Number(e.makingAmount)}),d(O)],T=(0,l.Zu)(O,n,n)),K.push((0,m.ji)(n,b,n,o,c));return{setupIxs:K,ix:yield P.methods.initializeOrder(e).accounts({maker:n,payer:i,order:v,inputMintReserve:x,makerInputMintAccount:O,fee:I,referral:y,inputMint:s,outputMint:o,inputTokenProgram:p,outputTokenProgram:c}).instruction(),cleanupIx:T,orderPubKey:v}})),P=e=>k(void 0,[e],(function*({maker:e,order:{account:n,publicKey:i},inputTokenProgram:a=r.H_,connection:s}){const o=new t.Y7(s,{},t.Y7.defaultOptions()),p=new t.$r(f,S,o);let c=null,d=null;if(!n.inputMint.equals(r.Gd)){const i=(0,u.MO)(n.inputMint,e,!0,a);d=i;c=(0,m.ji)(e,i,e,n.inputMint,a)}return{cancelIx:yield p.methods.cancelOrder().accounts({maker:e,signer:e,inputMintReserve:n.inputMintReserve,order:i,makerInputMintAccount:d,inputMint:n.inputMint,inputTokenProgram:a}).instruction(),setupIx:c}})),v=e=>k(void 0,null,(function*(){const n=new t.Y7(e,{},t.Y7.defaultOptions()),i=new t.$r(f,S,n);let r=a.PublicKey.findProgramAddressSync([M.from("fee")],S)[0];return yield i.account.fee.fetch(r)})),x=(...e)=>k(void 0,[...e],(function*(e=[],n){const i=new t.Y7(n,{},t.Y7.defaultOptions()),a=new t.$r(f,S,i);return yield a.account.order.all(e)}))}}]);
//# sourceMappingURL=3112-93af6fbf813cc60e.js.map