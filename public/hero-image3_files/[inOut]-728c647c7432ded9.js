(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6467,4566],{54566:function(e,t,n){"use strict";n.r(t);var s=n(93981),r=n(13838),a=n(72215),i=n(25546),l=n(29541);t.default=function(e){var t,n=e.tokenInfo,o=e.amount,c=e.maxDecimals,d=e.prefix,u=(0,a.y6)(),x=u.tokenPriceMap,m=u.getUSDValue,f=n.address;(0,s.useEffect)((function(){f&&m([f])}),[f,m]);var v=f&&(null===(t=x[f])||void 0===t?void 0:t.usd)||0,h=new r.Z(o||0).mul(v);return!h||h.lte(0)?(0,l.jsx)(l.Fragment,{children:""}):c&&new r.Z(h).lte(.1)?(0,l.jsxs)(l.Fragment,{children:[d,"$",parseFloat(i.uf.format(h,c))]}):(0,l.jsxs)(l.Fragment,{children:[d,"$",i.uf.format(h,2)]})}},53636:function(e,t,n){"use strict";var s=n(63956),r=n(54423),a=n(93981),i=n(87821),l=n(25546),o=n(29541),c=["currency"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.currency,n=void 0===t||t,s=(0,r.Z)(e,c),d=a.useMemo((function(){return","===l.A5?".":","}),[]);return(0,o.jsx)(i.Z,u(u({displayType:"text",prefix:n?"$":""},s),{},{decimalSeparator:l.A5,thousandSeparator:d}))}},55259:function(e,t,n){"use strict";var s=n(72215),r=n(93981),a=n(24201),i=n(56100),l=n(82625),o=n(69825),c=n(29541);t.Z=function(e){var t=e.onChange,n=e.onBlur,d=e.tokenAddress,u=e.loading,x=e.value,m=e.name,f=e.disabled,v=e.tokenAmountClassname,h=e.usdValueClassname,p=(0,s.Bn)().getTokenInfo,j=r.useRef(null),b=r.useMemo((function(){return p(d)}),[p,d]);return(0,c.jsxs)("div",{className:"flex flex-col text-right h-full",children:[u||!b?(0,c.jsx)(i.O,{className:"ml-2 w-24 h-6 self-end"}):(0,c.jsx)(o.Z,{name:m,className:(0,a.cn)("outline-none",v),decimals:b.decimals,onChange:t,value:x.value,disabled:f,ref:j,onBlur:n}),u?(0,c.jsx)(i.O,{className:"ml-2 mt-0.5 w-8 h-4 self-end"}):null!==x&&void 0!==x&&x.value?(0,c.jsx)("div",{className:(0,a.cn)("text-xs text-black-35 dark:text-white-35"),onClick:function(){var e;return null===j||void 0===j||null===(e=j.current)||void 0===e?void 0:e.focus()},children:(0,c.jsx)(l.Z,{tokenAddress:d,value:x,className:h})}):null]})}},13246:function(e,t,n){"use strict";var s=n(93981),r=n(72215),a=n(70006),i=n(94660),l=n(59978),o=n(10361),c=n(1242),d=n(20255),u=n(42082),x=n(69667),m=n(24201),f=n(67768),v=n(29541),h=function(e){var t=e.showAllPairs,n=e.currentTokenInfo,s=e.disabled;return(0,v.jsx)("div",{className:"flex justify-between items-center group/select",children:(0,v.jsxs)("button",{disabled:s,type:"button",className:(0,m.cn)("py-2 px-3 h-10 rounded-xl flex space-x-3 items-center  border border-transparent",s?"cursor-default":"bg-v2-background-page dark:group-hover/select:border-v2-primary/50 dark:group-hover/select:bg-[rgba(199,242,132,0.2)] dark:group-hover/select:shadow-swap-input-dark"),onClick:t,children:[(0,v.jsx)("div",{className:"rounded-full",children:(null===n||void 0===n?void 0:n.logoURI)&&(0,v.jsx)(l.Z,{width:24,height:24,info:n})}),(0,v.jsx)("div",{className:"font-semibold text-sm",translate:"no",children:null===n||void 0===n?void 0:n.symbol}),!s&&(0,v.jsx)("div",{className:"text-black/25 dark:text-white/25 group-hover/select:text-[#00D1DF] dark:group-hover/select:text-v2-primary fill-current",children:(0,v.jsx)(x.Z,{})})]})})},p=function(e){var t=e.showAllPairs,n=e.currentTokenInfo,s=e.disabled;return(0,v.jsx)("div",{className:"rounded-lg flex justify-between items-center w-full h-full",children:(0,v.jsxs)("button",{type:"button",className:(0,m.cn)("pt-2 pb-4 px-4 h-full rounded-xl flex space-x-3 items-center border border-transparent w-full",s?"cursor-default":""),onClick:t,children:[(0,v.jsx)("div",{className:"rounded-full",children:(null===n||void 0===n?void 0:n.logoURI)&&(0,v.jsx)(l.Z,{width:24,height:24,info:n})}),(0,v.jsx)("div",{className:"font-semibold text-base",translate:"no",children:null===n||void 0===n?void 0:n.symbol}),!s&&(0,v.jsx)("div",{className:"!ml-auto text-black/25 dark:text-white/25 group-hover:text-v2-primary fill-current",children:(0,v.jsx)(x.Z,{})})]})})};t.Z=function(e){var t=e.fromTokenAddress,n=e.toTokenAddress,l=e.onChange,x=e.name,m=e.modalId,j=e.mintsList,b=e.type,g=e.disabled,w=(0,r.Bn)(),y=(w.unknownTokenMap,w.getTokenInfo),N=(0,d.B)(),k=N.add,C=N.get,S=(0,a.JT)(),Z=S.openModal,O=S.closeModal,V=S.openContextualModal,A=S.setContextValue,P=S.ModalContextConsumer,M=(0,u.T)(),T=(0,s.useMemo)((function(){return"fromTokenAddress"===x?t:n}),[t,n,x]),D=(0,s.useMemo)((function(){return y(T)}),[y,T]),I=function(e){if(e){var s,r,a,i,c=(0,f.tr)(e)||(0,f.kL)(e),d=C(e.address);if("fromTokenAddress"===x)n===e.address?(s=e,r=y(t)):(s=e,r=y(n));else t===e.address?(s=y(n),r=e):(s=y(t),r=e);if(c&&!d)setTimeout((function(){Z((0,v.jsx)(o.ZP,{tokensInfo:[e],onClickReject:B,onClickAccept:function(){var t,n;l("fromTokenAddress"===x?null===(t=s)||void 0===t?void 0:t.address:null===(n=r)||void 0===n?void 0:n.address),k(e.address),M(s,r),O()},preventToken2022WithTransferTaxExtension:!0}),{canDismiss:!1,containerStyle:{background:"none"}})}),0);else l("fromTokenAddress"===x?null===(a=s)||void 0===a?void 0:a.address:null===(i=r)||void 0===i?void 0:i.address),M(s,r),O()}},B=function(){P&&!g&&(A(m,j),V(m,j,(0,v.jsx)(P,{children:function(e){return(0,v.jsx)(i.ZP,{onSubmit:I,mintsList:e,bestTokens:c.KG})}}),{position:"top",noCloseButton:!0}))};return"tokenAndInput"===b?(0,v.jsx)(h,{disabled:g,showAllPairs:B,currentTokenInfo:D}):(0,v.jsx)(p,{disabled:g,showAllPairs:B,currentTokenInfo:D})}},32044:function(e,t,n){"use strict";var s=n(72215),r=(n(93981),n(96404)),a=n(51633),i=n(24201),l=n(29541);t.Z=function(e){var t=e.className,n=e.tokenInfo;if(!(0,s.Os)().connected||!n)return null;var o=n.address;return(0,l.jsxs)("div",{className:"flex space-x-1 items-center",children:[(0,l.jsx)("div",{className:"mb-px fill-current text-white-75",children:(0,l.jsx)(a.Z,{width:12,height:12})}),(0,l.jsxs)("div",{className:(0,i.cn)("text-xs font-normal text-v2-lily/50 whitespace-nowrap",t),children:[(0,l.jsx)(r.Z,{mintAddress:o})," ",(0,l.jsx)("span",{children:null===n||void 0===n?void 0:n.symbol})]})]})}},57722:function(e,t,n){"use strict";n.d(t,{Pf:function(){return l},YB:function(){return a},Ye:function(){return i},hl:function(){return o},tc:function(){return d}});var s,r=n(7761),a=2,i=3,l=20,o=.5,c=86400,d=[{id:"minute",name:r.ag._("minute"),secondsInPeriod:60},{id:"hour",name:r.ag._("hour"),secondsInPeriod:3600},{id:"day",name:r.ag._("day"),secondsInPeriod:c},{id:"week",name:r.ag._("week"),secondsInPeriod:604800},{id:"month",name:r.ag._("month"),secondsInPeriod:2592e3}];!function(e){e.DCA="DCA",e.VA="VA"}(s||(s={}))},3955:function(e,t,n){"use strict";n.d(t,{T:function(){return i}});var s=n(63956),r=n(7744);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var i=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({address:e.address||r.PublicKey.default.toString(),decimals:0,name:"Unknown",chainId:101,symbol:"Unknown"},e)}},37124:function(e,t,n){"use strict";var s=n(63956),r=n(25224),a=n(93981),i=n(29541),l=(0,a.forwardRef)((function(e,t){var n,a=e.children,l=e.onClick,o=e.size,c=void 0===o?"md":o,d=e.type,u=e.disabled,x=e.loading,m=e.className;return(0,i.jsx)("button",{ref:t,type:d,disabled:u||x,onClick:l,className:(0,r.cn)("h-full w-full flex justify-center items-center rounded-xl","bg-v2-primary text-uiv2-text/75",!x&&!u&&"hover:bg-v2-primary/80",u&&"opacity-50","disabled:cursor-not-allowed disabled:hover:bg-none",(n={},(0,s.Z)(n,"py-5 text-lg font-semibold leading-none","md"===c),(0,s.Z)(n,"p-[calc(1rem-1px)] py-3 text-sm font-semibold leading-none","sm"===c),(0,s.Z)(n,"p-[calc(0.75rem-1px)] py-2 text-xs font-semibold leading-none","xs"===c),n),m),children:(0,i.jsx)("div",{children:a})})}));t.Z=l},33118:function(e,t,n){"use strict";var s=n(73360),r=n(22525),a=n(99438),i=n(67768),l=n(29541);t.Z=function(e){var t=e.className;return(0,l.jsx)(r.uS,{buttonClassName:"!bg-transparent w-full",overrideContent:(0,l.jsx)(a.Z,{className:(0,i.cn)("w-full !bg-v2-primary/10",t),size:"md",children:(0,l.jsx)("span",{className:"text-v2-primary",children:(0,l.jsx)(s.cC,{id:"Connect Wallet"})})})})}},26260:function(e,t,n){"use strict";var s=n(97620),r=n(93981),a=n(30610),i=n(24201),l=n(25546),o=n(29541);t.Z=function(e){var t=e.className,n=e.children,c=e.data,d=e.rowRenderer,u=(e.value,e.onChange),x=e.contentClassName,m=e.rowClassName,f=e.filter,v=e.disabled,h=r.useState(!1),p=(0,s.Z)(h,2),j=p[0],b=p[1],g=r.useState(""),w=(0,s.Z)(g,2),y=w[0],N=w[1],k=(0,l.Nr)(y,150),C=r.useMemo((function(){return f&&k?f(c,k):c}),[c,k,f]);return(0,o.jsx)(a.Z,{isOpen:j,onClose:function(){return b(!1)},id:"settings-button",placement:"bottom-start",matchWidth:!0,buttonContent:(0,o.jsx)("button",{type:"button",onClick:function(){return b((function(e){return!e}))},className:(0,i.cn)("flex items-center py-3 pl-4 pr-5 space-x-2 rounded-lg bg-jupiter-light dark:bg-white/10 text-white/75",t),disabled:v,children:n}),buttonContentClassName:"!w-full",popoverContent:(0,o.jsxs)("div",{className:"mt-1 bg-jupiter-light rounded-lg dark:bg-white/10",children:[f?(0,o.jsx)("div",{className:"sticky top-0 flex",children:(0,o.jsx)("input",{placeholder:"Search...",className:"w-full py-2 px-4 bg-v2-background-dark text-white text-sm !outline-none",value:y,onChange:function(e){return N(e.target.value)}})}):null,C.map((function(e,t){return(0,o.jsx)("button",{onClick:function(){u(e),b(!1)},className:(0,i.cn)("first:pt-3 last:pb-3 w-full flex items-center py-1.5 pl-4 pr-3 space-x-2 text-white/75 hover:bg-porcelain dark:hover:bg-shark",m),children:d(e)},t)}))]}),contentClassName:(0,i.cn)("!bg-transparent !shadow-none z-50 webkit-scrollbar",x)})}},82625:function(e,t,n){"use strict";var s=n(72215),r=n(93981),a=n(24201),i=n(54566),l=n(29541);t.Z=function(e){var t=e.value,n=e.tokenAddress,o=e.className,c=(0,s.Bn)().getTokenInfo,d=r.useMemo((function(){return c(n)}),[c,n]);return(0,l.jsx)(l.Fragment,{children:t?(0,l.jsx)("div",{className:(0,a.cn)("text-xs text-black/40 dark:text-white-25 font-medium",o),children:d&&(0,l.jsx)(i.default,{tokenInfo:d,amount:Number(t.floatValue)})}):null})}},95523:function(e,t,n){"use strict";n(93981);var s=n(29541);t.Z=function(e){var t=e.width,n=void 0===t?21:t,r=e.height,a=void 0===r?22:r;return(0,s.jsxs)("svg",{width:n,height:a,viewBox:"0 0 21 22",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M6.51043 7.47998V14.99H7.77043V7.47998L9.66043 9.36998L10.5505 8.47994L7.5859 5.51453C7.3398 5.26925 6.94114 5.26925 6.69504 5.51453L3.73047 8.47994L4.62051 9.36998L6.51043 7.47998Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M14.4902 14.52V7.01001H13.2302V14.52L11.3402 12.63L10.4502 13.5201L13.4148 16.4855C13.6609 16.7308 14.0595 16.7308 14.3056 16.4855L17.2702 13.5201L16.3802 12.63L14.4902 14.52Z",fill:"currentColor"})]})}},3561:function(e,t,n){"use strict";n(93981);var s=n(29541);t.Z=function(e){var t=e.fill,n=void 0===t?"white":t,r=e.width,a=void 0===r?12:r,i=e.height,l=void 0===i?12:i;return(0,s.jsxs)("svg",{width:a,height:l,viewBox:"0 0 12 12",fill:n,xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("g",{clipPath:"url(#clip0_9115_125056)",children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 6C12 9.31371 9.31371 12 6 12C2.68629 12 0 9.31371 0 6C0 2.68629 2.68629 0 6 0C9.31371 0 12 2.68629 12 6ZM5.95362 7.63052C5.60347 7.63083 5.31644 7.35363 5.30407 7.0038L5.15183 2.7132C5.14549 2.53686 5.21146 2.36591 5.33389 2.23905C5.45631 2.11218 5.62504 2.04082 5.80138 2.04082H6.10586C6.2822 2.04082 6.45093 2.11218 6.57336 2.23905C6.69578 2.36591 6.76175 2.53686 6.75541 2.7132L6.60317 7.0038C6.5908 7.35363 6.30377 7.63083 5.95362 7.63052ZM5.95352 10.0669C6.45812 10.0669 6.86694 9.65807 6.86694 9.15347C6.86694 8.64887 6.45812 8.24004 5.95352 8.24004C5.44891 8.24004 5.04009 8.64887 5.04009 9.15347C5.04009 9.65807 5.44891 10.0669 5.95352 10.0669Z",fill:n})}),(0,s.jsx)("defs",{children:(0,s.jsx)("clipPath",{id:"clip0_9115_125056",children:(0,s.jsx)("rect",{width:"12",height:"12",fill:n})})})]})}},28940:function(e,t,n){"use strict";var s=n(97620),r=n(81652),a=n(38550),i=n(93981);t.Z=function(){var e=(0,r.MG)().appName,t=(0,a._)("".concat(e,"-spot-show-summary"),!1),n=(0,s.Z)(t,2),l=n[0],o=n[1];return{showSummary:l,toggleSummary:(0,i.useCallback)((function(){o((function(e){return!e}))}),[o]),setSpotSummary:(0,i.useCallback)((function(e){o(e)}),[o])}}},5564:function(e,t,n){"use strict";n.d(t,{D:function(){return c}});var s=n(63956),r=n(93981),a=n(81097),i=n(25348);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=function(e){var t=(0,r.useMemo)((function(){return e.filter(Boolean)}),[e]),n=(0,a.j)(t),s=n.data,l=n.isLoading;return{tokensWithTransferFee:(0,r.useMemo)((function(){return null===s||void 0===s?void 0:s.map((function(t){if(t){var n=(0,i.y)(t);if(null!==n.transferFee)return o(o({},e.find((function(e){return(null===e||void 0===e?void 0:e.address)===t.id}))),{},{fee:n.transferFee})}return null})).filter(Boolean)}),[e,s]),dasQuery:s,isLoadingDasQuery:l}}},55948:function(e,t,n){"use strict";var s=n(29541);t.Z=function(e){var t=e.className,n=void 0===t?"":t;return(0,s.jsx)("svg",{className:n,width:"10",height:"6",viewBox:"0 0 10 6",fill:"inherit",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.292893 0.292893C0.683416 -0.097631 1.31658 -0.097631 1.7071 0.292893L4.99999 3.58579L8.29288 0.292893C8.6834 -0.0976311 9.31657 -0.0976311 9.70709 0.292893C10.0976 0.683417 10.0976 1.31658 9.70709 1.70711L5.7071 5.70711C5.31657 6.09763 4.68341 6.09763 4.29289 5.70711L0.292893 1.70711C-0.0976309 1.31658 -0.0976309 0.683417 0.292893 0.292893Z",fill:"currentColor"})})}},45462:function(e,t,n){"use strict";n(93981);var s=n(29541);t.Z=function(e){var t=e.width,n=void 0===t?25:t,r=e.height,a=void 0===r?21:r;return(0,s.jsx)("svg",{width:n,height:a,viewBox:"0 0 25 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M23.9339 9.08485L16.0326 1.18357C15.6735 0.80576 15.1766 0.589184 14.6554 0.581696C14.1341 0.575134 13.6326 0.779509 13.2632 1.14795C12.8948 1.5164 12.6904 2.01795 12.696 2.53921C12.7026 3.0614 12.9191 3.55734 13.2969 3.91734L17.9676 8.58054H2.43406C1.36626 8.58054 0.5 9.44679 0.5 10.5146C0.5 11.5833 1.36626 12.4496 2.43406 12.4496H17.9244L13.2969 17.0838C12.5741 17.845 12.5891 19.0431 13.3316 19.7847C14.0741 20.5263 15.2732 20.5413 16.0326 19.8175L23.9339 11.9163C24.2976 11.5544 24.502 11.0622 24.5001 10.5484C24.5011 10.5325 24.5011 10.5166 24.5001 10.5006C24.5011 10.4847 24.5011 10.4688 24.5001 10.4528C24.5001 9.94001 24.2967 9.44782 23.9339 9.08501L23.9339 9.08485Z",fill:"currentColor"})})}},43723:function(e,t,n){"use strict";n(93981);var s=n(29541);t.Z=function(e){var t=e.className,n=e.width,r=void 0===n?10:n,a=e.height,i=void 0===a?6:a;return(0,s.jsx)("svg",{className:t,width:r,height:i,viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.292893 5.70711C0.683416 6.09763 1.31658 6.09763 1.7071 5.70711L4.99999 2.41421L8.29288 5.70711C8.6834 6.09763 9.31657 6.09763 9.70709 5.70711C10.0976 5.31658 10.0976 4.68342 9.70709 4.29289L5.7071 0.292893C5.31657 -0.097631 4.68341 -0.097631 4.29289 0.292893L0.292893 4.29289C-0.0976309 4.68342 -0.0976309 5.31658 0.292893 5.70711Z",fill:"currentColor"})})}},99384:function(e,t,n){"use strict";var s=n(29541);t.Z=function(e){var t=e.width,n=void 0===t?12:t,r=e.height,a=void 0===r?12:r;return(0,s.jsxs)("svg",{width:n,height:a,viewBox:"0 0 12 12",fill:"inherit",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("g",{clipPath:"url(#clip0_841_4053)",children:(0,s.jsx)("path",{d:"M11.6466 4.23513V0.706082L10.4111 1.94156C9.3173 0.741165 7.72912 0 6 0C2.6827 0 0 2.6827 0 6C0 9.3173 2.68203 12 6 12C7.69405 12 9.21142 11.2939 10.3059 10.165L9.31797 9.14128C8.50601 10.0234 7.30561 10.5879 6 10.5879C3.45892 10.5879 1.41216 8.5411 1.41216 6.00002C1.41216 3.45894 3.45892 1.41218 6 1.41218C7.34135 1.41218 8.57615 2.01238 9.42317 2.92954L8.11757 4.23515L11.6466 4.23513Z",fill:"inherit"})}),(0,s.jsx)("defs",{children:(0,s.jsx)("clipPath",{id:"clip0_841_4053",children:(0,s.jsx)("rect",{width:"12",height:"12",fill:"white"})})})]})}},51633:function(e,t,n){"use strict";var s=n(63956),r=n(54423),a=n(29541),i=["width","height"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.width,n=void 0===t?12:t,s=e.height,l=void 0===s?12:s,c=(0,r.Z)(e,i);return(0,a.jsx)("svg",o(o({xmlns:"http://www.w3.org/2000/svg",width:n,height:l,viewBox:"0 0 12 12",fill:"none"},c),{},{children:(0,a.jsx)("path",{d:"M8.25 7H8.255M1.5 2.5V9.5C1.5 10.0523 1.94772 10.5 2.5 10.5H9.5C10.0523 10.5 10.5 10.0523 10.5 9.5V4.5C10.5 3.94772 10.0523 3.5 9.5 3.5L2.5 3.5C1.94772 3.5 1.5 3.05228 1.5 2.5ZM1.5 2.5C1.5 1.94772 1.94772 1.5 2.5 1.5H8.5M8.5 7C8.5 7.13807 8.38807 7.25 8.25 7.25C8.11193 7.25 8 7.13807 8 7C8 6.86193 8.11193 6.75 8.25 6.75C8.38807 6.75 8.5 6.86193 8.5 7Z",stroke:"currentColor",strokeOpacity:"0.25",strokeLinecap:"round",strokeLinejoin:"round"})}))}},91954:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return nt},default:function(){return st}});var s=n(97620),r=n(72215),a=n(68586),i=n(93981),l=n(70107),o=n(27195),c=n(8857),d=n.n(c),u=n(73360),x=n(7761),m=n(11823),f=n(12804),v=n(40993),h=n(25224),p=n(75206),j=n(98777),b=n(7744),g=n(11711),w=n(13838),y=n(3011),N=n(72997),k=n(13215),C=n(87821),S=n(13170),Z=n(72282),O=n(90342),V=n(33130),A=n(42082),P=n(69667),M=n(82574),T=n(24201),D=n(25546),I=n(13246),B=n(32044),_=n(57722),F=n(55259),L=n(37124),U=n(6397),H=n(26260),R=n(69825),E=n(95523),K=n(3561),W=n(29541),q=function(e){var t=e.buttons;return(0,W.jsx)("div",{className:"flex items-center rounded-lg bg-uiv2 h-9 p-1",children:t.map((function(e){var t=e.onChange,n=e.value,s=e.isSelected;return(0,W.jsx)("button",{type:"button",onClick:t,className:(0,T.cn)("w-[75px] h-7 lg:w-20","flex flex-row items-center justify-center font-semibold space-x-2 text-v2-lily/50 fill-current border border-transparent rounded-lg","p-0.5",s?"!bg-v2-primary/10":""),children:(0,W.jsx)("span",{className:(0,T.cn)("!text-xxs md:!text-xs font-semibold whitespace-nowrap",s?"text-v2-primary":""),children:n})},"".concat(n,"-button"))}))})},G=function(e){var t=e.title,n=e.active,s=e.onClick;return(0,W.jsx)("button",{type:"button",onClick:s,className:(0,T.cn)("rounded-2xl px-4 py-2 text-xs text-white/20 border border-transparent whitespace-nowrap","dark:hover:!text-v2-primary",{"!text-v2-primary border-v2-primary/20 bg-v2-primary/5 ":n}),children:(0,W.jsx)(u.cC,{id:"{title}",values:{title:t}})})},z=function(){return(0,W.jsx)("svg",{width:"9",height:"10",viewBox:"0 0 9 10",fill:"inherit",xmlns:"http://www.w3.org/2000/svg",children:(0,W.jsx)("path",{d:"M4.50199 9.2001C5.9011 9.19955 7.22 8.54806 8.07149 7.43792C8.92239 6.3272 9.20858 4.88472 8.84603 3.53331C8.48348 2.18189 7.51283 1.07615 6.2197 0.541774C4.92716 0.00728354 3.4588 0.103964 2.24759 0.80435C1.03634 1.50419 0.220046 2.72811 0.0382167 4.1151C-0.143612 5.50214 0.329903 6.89527 1.31978 7.88401C2.16299 8.72887 3.30837 9.20238 4.502 9.20019L4.50199 9.2001ZM6.89263 7.09072C6.32848 7.65377 5.58305 7.99874 4.78872 8.06521C3.99441 8.13113 3.20232 7.91415 2.55306 7.45217L7.25136 2.74669C7.71444 3.39653 7.93308 4.18923 7.86715 4.98461C7.80178 5.77947 7.45625 6.526 6.89265 7.09076L6.89263 7.09072ZM2.11135 2.30944C2.6755 1.74639 3.42093 1.40142 4.21525 1.33495C5.00956 1.26903 5.80165 1.48601 6.45092 1.94799L1.75261 6.65459C1.28898 6.0053 1.07035 5.21205 1.13628 4.41668C1.20165 3.6207 1.54717 2.87415 2.11132 2.30954L2.11135 2.30944Z",fill:"inherit"})})},Q=n(99384),Y=function(e){var t=e.tabs,n=e.activeTab,s=e.setActiveTab,r=e.isLoading,a=e.refetch,i=e.cancelAllOrderDisabled,l=e.cancelAllOrder,o=e.children,c=e.className;return(0,W.jsx)("div",{className:(0,T.cn)("w-full flex justify-center",c),children:(0,W.jsxs)("div",{className:"w-full overflow-hidden",children:[(0,W.jsxs)("div",{className:"flex flex-row flex-wrap",children:[(0,W.jsx)("div",{className:"flex space-x-2 justify-start items-start overflow-y-auto",children:t.map((function(e){return(0,W.jsx)(G,{title:e,active:n===e,onClick:function(){return s(e)}},e)}))}),(0,W.jsxs)("div",{className:"ml-auto flex justify-end space-x-2 text-xs dark:text-white-50",children:[(0,W.jsx)("button",{type:"button",className:(0,T.cn)("flex items-center border border-black-10 dark:border-white/10 px-3 py-1.5 rounded-lg","dark:hover:!text-v2-primary dark:hover:!bg-v2-primary/5 dark:hover:!border-v2-primary/25"),onClick:a,children:(0,W.jsx)("div",{className:(0,T.cn)("fill-current",r?"animate-spin":""),children:(0,W.jsx)(Q.Z,{width:8,height:8})})}),Boolean(l)?(0,W.jsxs)("button",{type:"button",className:(0,T.cn)("flex items-center border border-black-10 dark:border-white/10 px-3 py-1.5 rounded-lg",i?"cursor-disabled opacity-50 !dark:hover:transparent":"dark:hover:!text-[#F74A4A] dark:hover:!bg-[#F74A4A]/5 dark:hover:!border-[#F74A4A]/25"),disabled:i,onClick:l,children:[(0,W.jsx)("div",{className:"mr-2 fill-current",children:(0,W.jsx)(z,{})}),(0,W.jsx)(u.cC,{id:"Cancel All"})]}):null]})]}),o]})})},$=n(45009),X=n(56100),J=n(64508),ee=n.n(J),te=n(59978),ne=n(45462),se=n(24628),re=n(3082),ae=n(65558),ie=n(91799),le=n(14518),oe=n(70006),ce=n(99438),de=n(12866),ue=function(e){var t=e.vaItem,n=e.inputToken,a=e.outputToken,c=e.vaClient,m=e.closeModal,h=e.type,p=(0,k.cI)({defaultValues:{fromValue:{floatValue:0,formattedValue:void 0,value:void 0},tokenInfo:n},mode:"onChange"}),j=p.control,N=p.handleSubmit,C=p.setValue,S=p.formState,Z=S.isSubmitting,A=S.isValid,M=p.trigger,D=t.publicKey,I=t.account,_=I.inLeft,L=I.outWithdrawn,U=I.outReceived,R=(0,r.FB)(n.address).balance,E=new w.Z(10).pow(n.decimals),K=new w.Z(_.toString()).div(E),q=new w.Z(10).pow(a.decimals),G=new w.Z(U.toString()).div(q),z=new w.Z(L.toString()).div(q),Q=G.minus(z),Y="Deposit"===h,$=(0,k.qo)({control:j,name:"tokenInfo"}),X=(0,k.qo)({control:j,name:"fromValue"});(0,i.useEffect)((function(){M()}),[X,M]),i.useEffect((function(){C("fromValue",{floatValue:void 0,formattedValue:"",value:""})}),[$,C]);var J=(0,r.Os)().publicKey,ee=(0,g.NL)(),te=(0,y.KO)(v.yz),ne=(0,s.Z)(te,1)[0],se=(0,r.Rc)(),re=(0,V.R3)(),ae=(0,O.gs)().priorityLevel,ie=i.useMemo((function(){return n.address===(null===$||void 0===$?void 0:$.address)}),[n,$]),le=i.useCallback((function(){C("fromValue",ie?{floatValue:K.toNumber(),formattedValue:K.toString(),value:K.toString()}:{floatValue:Q.toNumber(),formattedValue:Q.toString(),value:Q.toString()})}),[C,ie,Q,K]),oe=i.useCallback(function(){var e=(0,o.Z)(d().mark((function e(t){var s,r,a,i,o,x,h,p,j,g;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s=t.fromValue).floatValue||!J){e.next=18;break}return a=new w.Z(s.floatValue).mul(Math.pow(10,n.decimals)),e.next=5,c.deposit(D,BigInt(a.toFixed(0)),J,J);case 5:return i=e.sent,o=i.preInstructions,x=i.depositIx,h=i.postInstructions,e.next=11,se.getLatestBlockhash("confirmed");case 11:return p=e.sent,j=p.blockhash,g=p.lastValidBlockHeight,m(),e.next=17,re((r=new b.Transaction({feePayer:J,blockhash:j,lastValidBlockHeight:g})).add.apply(r,[].concat((0,l.Z)(o),[x],(0,l.Z)(h))),{blockhash:j,lastValidBlockHeight:g,idl:f.xO,idlProgramId:new b.PublicKey(f.MG["mainnet-beta"])},{successMessage:(0,W.jsx)(u.cC,{id:"Deposit successful"}),submittingMessage:(0,W.jsx)(u.cC,{id:"Depositing into VA"}),errorMessage:(0,W.jsx)(u.cC,{id:"Failed to deposit into VA"}),referenceFee:"MEDIUM"===ae?ne.va.m:"HIGH"===ae?ne.va.h:"VERY_HIGH"===ae?ne.va.vh:void 0,minimumFee:v.uo,requestComputeBudgetLimit:3e5});case 17:ee.invalidateQueries({queryKey:["va"]});case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c,D,re,ae,ne,se,ee,J,n,m]),ue=i.useCallback(function(){var e=(0,o.Z)(d().mark((function e(t){var n,s,r,a,i,o,x;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.fromValue).floatValue||!J){e.next=15;break}return r=new w.Z(n.floatValue).mul(Math.pow(10,$.decimals)),e.next=5,c.withdraw(J,J,D,new b.PublicKey($.address),!0,BigInt(r.toFixed(0)));case 5:return a=e.sent,e.next=8,se.getLatestBlockhash("confirmed");case 8:return i=e.sent,o=i.blockhash,x=i.lastValidBlockHeight,m(),e.next=14,re((s=new b.Transaction({feePayer:J,blockhash:o,lastValidBlockHeight:x})).add.apply(s,(0,l.Z)(a)),{blockhash:o,lastValidBlockHeight:x,idl:f.xO,idlProgramId:new b.PublicKey(f.MG["mainnet-beta"])},{successMessage:(0,W.jsx)(u.cC,{id:"Successfully withdraw {0} {1} from VA",values:{0:n.floatValue,1:$.symbol}}),submittingMessage:(0,W.jsx)(u.cC,{id:"Withdrawing from VA"}),errorMessage:(0,W.jsx)(u.cC,{id:"Failed to withdraw from VA"}),referenceFee:"MEDIUM"===ae?ne.va.m:"HIGH"===ae?ne.va.h:"VERY_HIGH"===ae?ne.va.vh:void 0,minimumFee:v.uo,requestComputeBudgetLimit:3e5});case 14:ee.invalidateQueries({queryKey:["va"]});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[m,se,re,ae,J,ee,ne,c,D,$]);return(0,W.jsx)("div",{className:(0,T.cn)("w-[350px] md:w-[500px] rounded-2xl"),children:(0,W.jsxs)("form",{onSubmit:N(Y?oe:ue),className:"flex flex-col flex-1 h-full justify-center",children:[(0,W.jsxs)("div",{className:"flex justify-between items-center p-6 font-semibold text-lg text-v2-lily",children:[(0,W.jsx)(u.cC,{id:"{0}",values:{0:Y?"Deposit":"Withdraw"}}),(0,W.jsx)("div",{className:"cursor-pointer text-v2-lily/25",onClick:m,children:(0,W.jsx)(de.Z,{width:15,height:15})})]}),(0,W.jsxs)("div",{className:"p-5 flex flex-col gap-2",children:[(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("div",{className:"text-xs md:text-sm font-semibold text-v2-lily",children:(0,W.jsx)(u.cC,{id:"Enter {0} amount:",values:{0:Y?"deposit":"withdraw"}})}),(0,W.jsx)("div",{className:"flex gap-2",children:Y?(0,W.jsx)(B.Z,{tokenInfo:$}):(0,W.jsx)("span",{className:"text-v2-lily/50 text-sm font-semibold cursor-pointer hover:text-v2-primary",onClick:le,children:ie?(0,W.jsxs)(W.Fragment,{children:[K.toFixed(n.decimals)," ",n.symbol]}):(0,W.jsxs)(W.Fragment,{children:[Q.toFixed(a.decimals)," ",a.symbol]})})})]}),(0,W.jsxs)("div",{className:"flex flex-col space-y-2 relative",children:[!Y&&(0,W.jsx)(k.Qr,{control:j,name:"tokenInfo",render:function(e){var t=e.field,s=t.onChange,r=t.value;return(0,W.jsx)("div",{className:(0,T.cn)("h-[56px] rounded-xl flex items-center px-2 bg-[#151A20] w-full","text-sm lg:text-base","group-hover/select:border-v2-active-state group-hover/select:bg-[rgba(199,242,132,0.2)] group-hover/select:shadow-swap-input-dark"),children:(0,W.jsxs)(H.Z,{onChange:s,className:"!bg-transparent !px-3 !py-1 !text-v2-lily flex justify-between text-sm w-full",data:[n,a],value:r,rowRenderer:function(e){return(0,W.jsxs)("div",{className:"flex items-center space-x-3 w-full",children:[(0,W.jsx)("img",{src:e.logoURI,alt:"",className:"w-6 h-6 object-contain shrink-0"}),(0,W.jsx)("p",{className:"text-sm font-semibold text-white",children:null===e||void 0===e?void 0:e.symbol})]})},children:[(0,W.jsxs)("div",{className:"flex items-center space-x-3 w-full",children:[(0,W.jsx)("img",{src:$.logoURI,alt:"",className:"w-6 h-6 object-contain shrink-0 rounded-2xl"}),(0,W.jsx)("div",{children:$.symbol})]}),(0,W.jsx)("div",{className:"ml-auto text-black/25 dark:text-white/25 group-hover/select:text-[#00D1DF] dark:group-hover/select:text-dark-active-state fill-current",children:(0,W.jsx)(P.Z,{})})]})})}}),(0,W.jsx)(k.Qr,{control:j,name:"fromValue",rules:{validate:function(e){if(!e.floatValue)return!1;if(Y){if(e.floatValue>Number(R)||0===e.floatValue||void 0===e.floatValue)return x.ag._("Cannot deposit more than {balance} {0}",{0:n.symbol,balance:R})}else{var t=ie?K:Q;if(e.floatValue>t.toNumber())return x.ag._("Cannot withdraw more than existing amount")}}},render:function(e){var t=e.field,s=t.value,r=t.onBlur,a=t.onChange,i=e.fieldState.error;return(0,W.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,W.jsx)("div",{className:(0,T.cn)("p-4 h-[56px] border border-transparent bg-[#151A20] rounded-xl","focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark w-full"),children:(0,W.jsx)(F.Z,{value:s,onBlur:r,onChange:a,tokenAddress:n.address,name:"fromValue"})}),null!==i&&void 0!==i&&i.message?(0,W.jsx)("span",{className:"text-xs text-right text-perps-red mt-1",children:i.message}):null]})}})]}),(0,W.jsx)(ce.Z,{disabled:!A,className:"!bg-[#0F1216]",loading:Z,children:(0,W.jsx)(u.cC,{id:"{0}",values:{0:Y?"Deposit":"Withdraw"}})})]})]})})},xe=n(40558),me=n(50269),fe=n(3955),ve=function(e){var t=e.account,n=e.vaClient,s=e.showUsdcRate,a=e.outputToken,l=e.inputToken,o=(0,r.Bn)().getTokenInfo,c=(0,r.y6)(),d=c.tokenPriceMap,u=c.getUSDValue;i.useEffect((function(){u([l.address,a.address])}),[l,a,u]);var x=i.useMemo((function(){var e,t;return{inputTokenPrice:new w.Z((null===(e=d[l.address])||void 0===e?void 0:e.usd)||0),outputTokenPrice:d[a.address]?new w.Z((null===(t=d[a.address])||void 0===t?void 0:t.usd)||0):void 0}}),[d,a.address,l.address]),m=x.inputTokenPrice,f=x.outputTokenPrice,v=i.useMemo((function(){if(f)return s?f:f.div(m)}),[s,f,m]),h=i.useMemo((function(){return o(S.cq.toBase58())||(0,fe.T)({address:S.cq.toBase58()})}),[o]),p=t.inUsed,j=t.inDeposited,b=t.inLeft,g=t.incrementUsdcValue,y=t.orderInterval,N=t.outReceived,k=t.outWithdrawn,C=t.estimatedUsdcValueSpent,Z=void 0===C?void 0:C,O=t.inWithdrawn,V=i.useMemo((function(){var e=new w.Z(10).pow(l.decimals),t=new w.Z(10).pow(a.decimals),n=new w.Z(10).pow(h.decimals),r=new w.Z(p.toString()).div(e),i=new w.Z(j.toString()).div(e),o=new w.Z(b.toString()).div(e),c=new w.Z(g.toString()).div(n),d=new w.Z(O.toString()).div(e),u=new w.Z(y.toNumber()),x=new w.Z((null===Z||void 0===Z?void 0:Z.toString())||0).div(n),m=new w.Z(N.toString()).div(t),f=(s?x:r).div(m),v=new w.Z(k.toString()).div(t),C=m.minus(v),S=new w.Z(j.toString()).div(e),V=new w.Z(O.toString()).div(e),A=new w.Z(p.toString()).div(e);return{totalSpent:r,usdcDecimals:n,totalDeposited:i,availableInBalance:o,amountPurchased:m,estimatedUSDCSpent:x,inputTokenWithdrawn:d,incrementValue:c,interval:u,outputDecimals:t,averagePrice:f,availableOutBalance:C,outputTokenWithdrawn:v,inTokenLeft:S.minus(V).minus(A)}}),[p,j,b,g,y,N,O,Z,h,l,a,s,k]),A=V.totalSpent,P=V.totalDeposited,M=V.availableInBalance,T=V.amountPurchased,D=V.estimatedUSDCSpent,I=V.incrementValue,B=V.inputTokenWithdrawn,_=V.interval,F=V.availableOutBalance,L=V.averagePrice,U=V.outputTokenWithdrawn,H=V.inTokenLeft,R=i.useMemo((function(){return v&&"nextOrderAt"in t?1e3*new ae.BN(t.nextOrderAt).toNumber()<Date.now()?w.Z.max(n.computeSupposedUIValue(t).minus(T.mul(v)).toFixed(6),new w.Z("0")):w.Z.max(n.computeSupposedUIValue(t).plus(new w.Z(t.incrementUsdcValue.toString()).div("1000000")).minus(T.mul(v)).toFixed(6),new w.Z("0")):null}),[v,t,T,n]),E=i.useMemo((function(){if(v){var e=v.minus(L).mul(T),t=e.div(s?D:A).mul(100),n=e.greaterThanOrEqualTo(new w.Z(0));return{pnl:e,pnlPercentange:t,isProfit:n}}}),[v,L,T,s,D,A]),K=i.useMemo((function(){var e;if(!R)return!1;var t=new w.Z((null===(e=d[l.address])||void 0===e?void 0:e.usd)||0),n=H.mul(t);return R.gt(n)}),[H,R,l,d]);return{isLowBalance:K,pnlDetails:E,estimatedNextBuyValue:R,availableInBalance:M,inTokenLeft:H,currenTokenPrice:v,amountPurchased:T,totalSpent:A,estimatedUSDCSpent:D,averagePrice:L,incrementValue:I,interval:_,totalDeposited:P,inputTokenWithdrawn:B,availableOutBalance:F,outputTokenWithdrawn:U}},he=function(e){var t=e.vaItem,n=e.inputToken,a=e.outputToken,c=e.vaClient,m=e.hideButtons,w=(0,re.useRouter)().query,N=i.useMemo((function(){return"true"===w.debug}),[w.debug]),k=(0,r.Os)().publicKey,C=(0,r.Bn)().connection,Z=(0,V.R3)(),A=(0,oe.JT)(),P=A.openModal,M=A.closeModal,I=(0,g.NL)(),B=(0,y.KO)(v.yz),_=(0,s.Z)(B,1)[0],F=(0,O.gs)().priorityLevel,L=i.useState(!0),U=(0,s.Z)(L,2),H=U[0],R=U[1],E=t.account,K=t.publicKey,q=E.inputMint,G=E.inLeft,z=E.outReceived,Q=E.outWithdrawn,Y=E.outputMint,$=E.createdAt,X=ve({account:E,vaClient:c,showUsdcRate:H,inputToken:n,outputToken:a}),J=X.isLowBalance,ee=X.pnlDetails,ne=X.averagePrice,se=X.estimatedUSDCSpent,ce=X.totalSpent,de=X.currenTokenPrice,fe=X.amountPurchased,he=X.availableInBalance,pe=X.availableOutBalance,je=X.estimatedNextBuyValue,be=X.incrementValue,ge=X.interval,we=X.outputTokenWithdrawn,ye=X.inputTokenWithdrawn,Ne=X.totalDeposited,ke=(0,i.useCallback)((0,o.Z)(d().mark((function e(){var t,s,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,k&&K){e.next=3;break}return e.abrupt("return");case 3:if(t=new b.Transaction,!G.gt(new ae.BN(0))){e.next=13;break}return e.t0=t.add,e.t1=t,e.t2=l.Z,e.next=10,c.withdraw(k,k,K,q,!0,void 0,void 0,(0,h.kL)(n)?j.nA:p.TOKEN_PROGRAM_ID);case 10:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 13:if(!z.sub(Q).gt(new ae.BN(0))){e.next=22;break}return e.t5=t.add,e.t6=t,e.t7=l.Z,e.next=19,c.withdraw(k,k,K,Y,!0,void 0,void 0,(0,h.kL)(a)?j.nA:p.TOKEN_PROGRAM_ID);case 19:e.t8=e.sent,e.t9=(0,e.t7)(e.t8),e.t5.apply.call(e.t5,e.t6,e.t9);case 22:return e.t10=t,e.next=25,c.close(k,K);case 25:return e.t11=e.sent,e.t10.add.call(e.t10,e.t11),e.next=29,C.getLatestBlockhash("confirmed");case 29:return s=e.sent,r=s.blockhash,i=s.lastValidBlockHeight,t.recentBlockhash=r,t.lastValidBlockHeight=i,t.feePayer=k,e.next=37,Z(t,{blockhash:r,lastValidBlockHeight:i,idl:f.xO,idlProgramId:new b.PublicKey(f.MG["mainnet-beta"])},{errorMessage:x.ag._("Failed to withdraw balances. Please try again."),submittingMessage:x.ag._("Withdrawing balances"),successMessage:x.ag._("Successfully withdrawed"),referenceFee:"MEDIUM"===F?_.va.m:"HIGH"===F?_.va.h:"VERY_HIGH"===F?_.va.vh:void 0,minimumFee:v.uo,requestComputeBudgetLimit:3e5});case 37:I.invalidateQueries({queryKey:["va"]}),e.next=43;break;case 40:e.prev=40,e.t12=e.catch(0),console.log({e:e.t12});case 43:case"end":return e.stop()}}),e,null,[[0,40]])}))),[I,G,C,q,Y,F,K,k,_,Z,c,z,Q,n,a]),Ce=i.useMemo((function(){return n.address.toString()===S.cq.toString()}),[n]),Se=i.useCallback((function(){R(!H)}),[H]),Ze=i.useMemo((function(){return n.decimals}),[n]),Oe=i.useMemo((function(){return Ce||H?"USDC":n.symbol}),[H,Ce,n]),Ve=function(e){return P((0,W.jsx)(ue,{inputToken:n,outputToken:a,vaClient:c,vaItem:t,closeModal:M,type:e}))},Ae=i.useMemo((function(){if(N&&"firstOrderAt"in E)return{debugFirstOrderDate:(0,le.Z)(1e3*new ae.BN(E.firstOrderAt).toNumber(),"dd MMM y HH:mm:ss"),debugSecondAfterFirstOrder:Math.round(Date.now()/1e3-E.firstOrderAt.toNumber()),debugNumberOfOrders:c.computeSupposedNumberOfOrders(E),debugSupposedUIValue:c.computeSupposedUIValue(E).toFixed(0),debugCurrentInvestedValue:de?fe.mul(de).toString():void 0,debugSupposedInvestValue:de?c.computeSupposedUIValue(E).minus(fe.mul(de)).toString():void 0}}),[E,c,de,fe,N]);return(0,W.jsxs)("div",{className:"bg-[#161B27] p-6 text-xs",children:[(0,W.jsxs)("div",{className:"rounded-lg bg-v2-lily/5 p-5 space-y-2  border border-v2-lily/5",children:[(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("span",{className:"text-white/50",children:x.ag._("Spent")}),(0,W.jsxs)("span",{className:"text-v2-lily/[.75]",children:[ce.toString()," ",n.symbol," ",q.equals(S.cq)?"":(0,W.jsxs)(W.Fragment,{children:["/ ",(0,W.jsxs)("span",{className:"italic",children:["~",se.toFixed(2)," USDC"]})]})]})]}),(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("span",{className:"text-white/50",children:x.ag._("Bought")}),(0,W.jsxs)("span",{className:"text-v2-lily/[.75]",children:[fe.toString()," ",a.symbol]})]}),(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("span",{className:"text-white/50",children:x.ag._("Average Buying Price")}),ne.isNaN()?(0,W.jsx)(W.Fragment,{children:"-"}):(0,W.jsx)("span",{className:"cursor-pointer text-v2-lily/[.75] hover:text-v2-primary",onClick:Se,children:(0,W.jsxs)(W.Fragment,{children:[ne.toFixed(Ze)," ",Oe]})})]}),(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("span",{className:"text-white/50",children:x.ag._("Current {0} Price",{0:a.symbol})}),(0,W.jsx)("span",{className:"cursor-pointer text-v2-lily/[.75] hover:text-v2-primary",onClick:Se,children:de?(0,W.jsxs)(W.Fragment,{children:[de.toFixed(Ze)," ",Oe]}):(0,W.jsx)(u.cC,{id:"N/A"})})]}),(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("span",{className:"text-white/50",children:x.ag._("PnL")}),ee?(0,W.jsx)(W.Fragment,{children:ee.pnl.isNaN()?(0,W.jsx)(W.Fragment,{children:"-"}):(0,W.jsxs)("span",{className:(0,T.cn)("cursor-pointer",ee.isProfit?"text-perps-green":"text-perps-red"),onClick:Se,children:[ee.pnl.toFixed(Ze)," ",Oe," /"," ",ee.pnlPercentange.isNaN()?(0,W.jsx)(W.Fragment,{children:"-"}):ee.pnlPercentange.toFixed(2),"%"]})}):(0,W.jsx)("div",{className:"text-v2-lily/[.75]",children:(0,W.jsx)(u.cC,{id:"N/A"})})]})]}),(0,W.jsxs)("div",{className:"mt-5 space-y-3 text-v2-lily/30",children:[(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("span",{children:x.ag._("Buying")}),(0,W.jsxs)("div",{className:"flex space-x-1",children:[(0,W.jsx)(te.Z,{info:a,width:16,height:16}),(0,W.jsx)("span",{children:a.symbol})]})]}),(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("span",{children:x.ag._("Increment Value")}),(0,W.jsxs)("span",{children:[be.toString()," USD"]})]}),(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("span",{children:x.ag._("Interval")}),(0,W.jsx)("span",{children:x.ag._("Every {0}(s)",{0:(0,D.FM)(ge.toNumber())})})]}),(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("span",{children:x.ag._("Created At")}),(0,W.jsx)("div",{className:"flex space-x-1",children:(0,le.Z)(1e3*new ae.BN($).toNumber(),"dd MMM y HH:mm:ss")})]}),"nextOrderAt"in E?(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("span",{children:x.ag._("Next Order At")}),(0,W.jsx)("div",{className:"flex space-x-1",children:(0,le.Z)(1e3*new ae.BN(E.nextOrderAt).toNumber(),"dd MMM y HH:mm:ss")})]}):null,je?(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("span",{children:x.ag._("Estimated $ Next Buy")}),(0,W.jsx)("div",{className:"flex space-x-1",children:"".concat(je," USD")})]}):null,null!==Ae&&void 0!==Ae&&Ae.debugFirstOrderDate?(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("span",{children:x.ag._("First Order At")}),(0,W.jsx)("div",{className:"flex space-x-1",children:Ae.debugFirstOrderDate})]}):null,null!==Ae&&void 0!==Ae&&Ae.debugSecondAfterFirstOrder?(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("span",{children:x.ag._("Seconds since First Order")}),(0,W.jsx)("div",{className:"flex space-x-1",children:Ae.debugSecondAfterFirstOrder})]}):null,null!==Ae&&void 0!==Ae&&Ae.debugNumberOfOrders?(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("span",{children:x.ag._("Supposed Number of Orders")}),(0,W.jsx)("div",{className:"flex space-x-1",children:Ae.debugNumberOfOrders})]}):null,null!==Ae&&void 0!==Ae&&Ae.debugSupposedUIValue?(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("span",{children:x.ag._("Supposed Invested Value")}),(0,W.jsx)("div",{className:"flex space-x-1",children:Ae.debugSupposedUIValue})]}):null,null!==Ae&&void 0!==Ae&&Ae.debugCurrentInvestedValue?(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("span",{children:x.ag._("Current Invested Value")}),(0,W.jsx)("div",{className:"flex space-x-1",children:Ae.debugCurrentInvestedValue})]}):null,null!==Ae&&void 0!==Ae&&Ae.debugSupposedInvestValue?(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("span",{children:x.ag._("Current - Supposed Invested Value")}),(0,W.jsx)("div",{className:"flex space-x-1",children:Ae.debugSupposedInvestValue})]}):null,N&&"isStale"in E?(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("span",{children:x.ag._("Stale")}),(0,W.jsx)("div",{className:"flex space-x-1",children:E.isStale?"yes":"no"})]}):null,(0,W.jsx)(ie.Z,{}),(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("span",{children:x.ag._("Total Deposited")}),(0,W.jsxs)("span",{children:[Ne.toString()," ",n.symbol]})]}),(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("span",{children:x.ag._("Amount Withdrawn")}),(0,W.jsxs)("span",{children:[ye.toString()," ",n.symbol]})]}),(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("span",{}),(0,W.jsxs)("span",{children:[we.toString()," ",a.symbol]})]}),(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("span",{children:x.ag._("Vault balance")}),(0,W.jsxs)("div",{className:"gap-1 flex",children:[(0,W.jsxs)("span",{children:[he.toString()," ",n.symbol]}),J&&(0,W.jsxs)("span",{className:"text-warning flex items-center",children:[(0,W.jsx)(u.cC,{id:"(Low Balance)"}),(0,W.jsx)(xe.Z,{variant:"dark",offset:[16,2.5],content:(0,W.jsx)("span",{className:"flex max-w-[10rem] rounded-lg text-xs text-white-75",children:(0,W.jsx)(u.cC,{id:"Your VA balance is low, please deposit more {0} for this VA to continue filling.",values:{0:n.symbol}})}),children:(0,W.jsx)("div",{className:"flex items-center ml-1 text-white/30 fill-current",children:(0,W.jsx)(me.Z,{height:12,width:12,color:"#FAA63C"})})})]})]})]}),(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("span",{}),(0,W.jsxs)("span",{children:[pe.toString()," ",a.symbol]})]})]}),!m&&(0,W.jsxs)("div",{className:"mt-6 flex flex-col w-full space-y-2 ",children:[(0,W.jsxs)("div",{className:"flex gap-4 mb-2",children:[(0,W.jsx)("button",{onClick:function(){return Ve("Deposit")},type:"button",className:"w-full px-4 py-1.5 rounded-lg text-sm text-white border border-v2-lily/10 bg-[#121D28] hover:bg-v2-primary/5 hover:bg-gradient-to-r from-[rgba(199,242,132,1))] to-[rgba(0,190,240,1)] dark:hover:border dark:hover:border-v2-primary",children:x.ag._("Deposit")}),(0,W.jsx)("button",{onClick:function(){return Ve("Withdraw")},type:"button",className:"w-full px-4 py-1.5 rounded-lg text-sm text-white border border-v2-lily/10 bg-[#121D28] hover:bg-v2-primary/5 hover:bg-gradient-to-r from-[rgba(199,242,132,1))] to-[rgba(0,190,240,1)] dark:hover:border dark:hover:border-v2-primary",children:x.ag._("Withdraw")})]}),(0,W.jsx)("button",{onClick:ke,type:"button",className:"w-full px-4 py-1.5 rounded-lg text-sm text-white border border-v2-lily/10 bg-[#121D28] hover:bg-v2-primary/5 hover:bg-gradient-to-r from-[rgba(199,242,132,1))] to-[rgba(0,190,240,1)] dark:hover:border dark:hover:border-v2-primary",children:G.gt(new ae.BN(0))?x.ag._("Close and Withdraw"):x.ag._("Close VA")})]})]})},pe=n(88381),je=function(e){var t=e.vaClient,n=e.vaItem,s=e.history,a=e.inverseRate,l=e.setInverseRate,o=(0,re.useRouter)().query,c=i.useMemo((function(){return"true"===o.debug}),[o.debug]),d=s.inputMint,u=s.outputMint,x=s.inputAmount,m=s.outputAmount,f=s.totalOutputBeforeFill,v=s.txSignature,h=s.confirmedAt,p=s.value,j=(0,r.Bn)().getTokenInfo,b=(0,r.oP)().getExplorer,g=n.account,y=g.firstOrderAt,N=g.orderInterval,k=g.incrementUsdcValue,C=i.useMemo((function(){return{fromTokenInfo:j(d.toString()),toTokenInfo:j(u.toString())}}),[j,d,u]),S=C.fromTokenInfo,Z=C.toTokenInfo,O=i.useMemo((function(){return S?new w.Z(x).div(Math.pow(10,S.decimals)).toString():""}),[S,x]),V=i.useMemo((function(){return{formattedOutAmount:Z?new w.Z(m).div(Math.pow(10,Z.decimals)).toString():"",formattedTotalOutputBeforeFill:Z?new w.Z(f).div(Math.pow(10,Z.decimals)).toString():""}}),[Z,m,f]),A=V.formattedOutAmount,P=V.formattedTotalOutputBeforeFill,M=i.useMemo((function(){return{formattedConfirmedAt:(0,le.Z)(h,"dd MMM y HH:mm"),supposedUiValue:y?t.computeSupposedUIValue(new Date(1e3*y.toNumber()),h,N.toNumber(),k).toFixed():"N/A"}}),[h,t,y,N,k]),T=M.formattedConfirmedAt,D=M.supposedUiValue,I=i.useMemo((function(){return b(v)}),[b,v]),B=i.useMemo((function(){var e=new w.Z(p).div("1000000"),t=Z?new w.Z(m).div(Math.pow(10,Z.decimals)):new w.Z(0),n=Z?new w.Z(e).div(t).toFixed(6):new w.Z(0).toFixed(0),s=new w.Z(P).mul(n),r=s.plus(e);return{uiValue:e.toFixed(6),approxUSDCPrice:n,approxUSDCValueBeforeFill:s.toFixed(6),approxUSDCValueAfterFill:r.toFixed(6)}}),[p,Z,m,P]),_=B.uiValue,F=B.approxUSDCPrice,L=B.approxUSDCValueBeforeFill,U=B.approxUSDCValueAfterFill,H=(0,i.useMemo)((function(){if(!S||!Z)return new w.Z(0);var e=new w.Z(m).div(Math.pow(10,Z.decimals)),t=new w.Z(x).div(Math.pow(10,S.decimals));return e.div(t)}),[S,x,m,Z]);return(0,W.jsxs)("div",{className:"text-xs flex space-x-4 justify-between",children:[(0,W.jsxs)("span",{className:"w-[80px] text-v2-lily/50 flex space-x-1 items-center",children:[(0,W.jsx)(pe.ZP,{value:Number(O)}),(0,W.jsx)(te.Z,{info:S,width:16,height:16})]}),c?(0,W.jsx)("span",{className:"w-[120px] text-v2-lily/50 flex space-x-1 items-center",children:(0,W.jsxs)("span",{children:[_," USD"]})}):null,c?(0,W.jsx)("span",{className:"w-[120px] text-v2-lily/50 flex space-x-1 items-center",children:(0,W.jsxs)("span",{children:[L," USD"]})}):null,c?(0,W.jsx)("span",{className:"w-[120px] text-v2-lily/50 flex space-x-1 items-center",children:(0,W.jsxs)("span",{children:[U," USD"]})}):null,c?(0,W.jsx)("span",{className:"w-[120px] text-v2-lily/50 flex space-x-1 items-center",children:(0,W.jsxs)("span",{children:[D," USD"]})}):null,c?(0,W.jsx)("span",{className:"w-[120px] text-v2-lily/50 flex space-x-1 items-center",children:(0,W.jsxs)("span",{children:[F," USD"]})}):null,(0,W.jsx)("span",{className:"w-[80px] text-v2-lily/50 flex items-center cursor-pointer hover:text-v2-primary",onClick:function(){return l(!a)},children:H.gt(0)?a?(0,pe.M)({value:+new w.Z(1).div(H).toSignificantDigits(3)}):(0,pe.M)({value:+H.toSignificantDigits(3)}):"N/A"}),(0,W.jsxs)("span",{className:"w-[100px] flex space-x-1 items-center",children:[(0,W.jsx)(pe.ZP,{value:Number(A)}),(0,W.jsx)(te.Z,{info:Z,width:16,height:16})]}),(0,W.jsx)("span",{className:"w-[120px] text-v2-lily/50 flex items-center",children:T}),(0,W.jsx)("div",{className:"w-3 flex items-center",children:(0,W.jsx)("a",{href:I,target:"_blank",rel:"noreferrer",className:"w-3 h-5 text-xs text-v2-lily/50 hover:text-v2-primary",children:(0,W.jsx)(se.Z,{width:12,height:20})})})]})},be=function(e){var t=e.history,n=e.vaClient,r=e.vaItem,a=(0,re.useRouter)().query,l=i.useMemo((function(){return"true"===a.debug}),[a.debug]),o=i.useState(!0),c=(0,s.Z)(o,2),d=c[0],u=c[1];return(0,W.jsxs)("div",{className:"p-6 bg-[#161B27] min-h-[300px]",children:[(0,W.jsxs)("div",{className:"flex w-full justify-between space-x-4 text-xs text-v2-lily/50",children:[(0,W.jsx)("span",{className:"w-[80px]",children:x.ag._("From")}),l?(0,W.jsx)("span",{className:"w-[120px]",children:x.ag._("Value")}):null,l?(0,W.jsx)("span",{className:"w-[120px]",children:x.ag._("Invested Value Before")}):null,l?(0,W.jsx)("span",{className:"w-[120px]",children:x.ag._("Approx Invested Value After")}):null,l?(0,W.jsx)("span",{className:"w-[120px]",children:x.ag._("Supposed Invested Value After")}):null,l?(0,W.jsx)("span",{className:"w-[120px]",children:x.ag._("Approx Price")}):null,(0,W.jsx)("span",{className:"w-[80px]",children:x.ag._("Rate")}),(0,W.jsx)("span",{className:"w-[100px]",children:x.ag._("To")}),(0,W.jsx)("span",{className:"w-[120px]",children:x.ag._("Date/Time")}),(0,W.jsx)("div",{className:"w-3"})]}),(0,W.jsx)("div",{className:"mt-3 space-y-3 max-h-[300px] overflow-y-auto hideScrollbar",children:t&&t.length>0?t.map((function(e){return(0,W.jsx)(je,{vaClient:n,vaItem:r,history:e,inverseRate:d,setInverseRate:u},e.txSignature)})):(0,W.jsx)("div",{className:"text-v2-lily/50 mt-4 text-xs flex items-center justify-center",children:x.ag._("No filled trades yet.")})})]})},ge=function(e){var t=e.vaItem,n=e.vaClient,a=e.isClosedVA,l=(0,i.useState)(!1),o=l[0],c=l[1],d=(0,i.useState)("Overview"),m=d[0],f=d[1],v=(0,y.KO)(M.P.refetchId),h=(0,s.Z)(v,1)[0],p=(0,r.Os)().publicKey,j=(0,r.Bn)().getTokenInfo,b=t.account,g=t.publicKey,w=b.inputMint,N=b.outputMint,k=(0,r.oP)().getExplorer,C=(0,i.useMemo)((function(){return k(g.toString(),"account")}),[k,g]),S=j(w.toString())||(0,fe.T)({address:w.toString()}),Z=j(N.toString())||(0,fe.T)({address:N.toString()}),O=ve({account:b,vaClient:n,showUsdcRate:!0,inputToken:S,outputToken:Z}),V=O.isLowBalance,A=O.pnlDetails,I=O.inTokenLeft,B=(0,$.a)(["va-fill-history",null===p||void 0===p?void 0:p.toString(),g.toString(),h],(function(){return g?n.getFillHistory(g):[]}),{keepPreviousData:!0}).data;return(0,W.jsxs)("div",{className:"bg-dca-item rounded-lg mb-2",children:[(0,W.jsxs)("button",{className:"flex justify-between md:grid md:grid-cols-3 items-center h-[64px] w-full text-xs px-2 md:px-4",onClick:function(){return c((function(e){return!e}))},children:[(0,W.jsxs)("div",{className:"text-left basis-2/12 flex items-center space-x-1 md:space-x-2",children:[(0,W.jsxs)("div",{className:"flex -space-x-2 cursor-pointer items-center",children:[(0,W.jsx)("div",{className:"w-5 h-5 flex items-center",children:(0,W.jsx)(te.Z,{info:S,height:16,width:16})}),(0,W.jsx)("div",{className:"w-5 h-5 flex items-center",children:(0,W.jsx)(te.Z,{info:Z,height:16,width:16})})]}),(0,W.jsxs)("div",{className:"flex items-center justify-center space-x-1.5 text-white text-xxs sm:text-xs",children:[(0,W.jsx)("span",{children:S.symbol}),(0,W.jsx)("div",{className:"text-v2-lily/50 fill-current",children:(0,W.jsx)(ne.Z,{width:10,height:10})}),(0,W.jsx)("span",{children:Z.symbol})]}),(0,W.jsx)(ee(),{href:C,target:"_blank",className:"text-v2-lily/50 hover:text-v2-primary",children:(0,W.jsx)(se.Z,{width:12,height:20})})]}),(0,W.jsxs)("div",{children:[(!V||!(0,D.tq)())&&(0,W.jsxs)("div",{className:"text-white/[.75]",children:[I.toString()," ",S.symbol]}),V&&!a&&(0,W.jsx)("div",{className:"text-warning",children:(0,W.jsx)(u.cC,{id:"Low Bal"})})]}),(0,W.jsxs)("div",{className:"flex space-x-4 justify-end sm:min-w-[170px]",children:[A?(0,W.jsx)("div",{children:A.pnl.isNaN()?(0,W.jsx)("div",{className:"px-2 text-v2-lily/[.75]",children:"-"}):(0,W.jsxs)("div",{className:(0,T.cn)("flex gap-1",A.isProfit?"text-perps-green":"text-perps-red"),children:[(0,D.tq)()?null:(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)("span",{children:[A.pnl.toFixed(2)," USDC"]}),(0,W.jsx)("span",{children:"/"})]}),(0,W.jsxs)("span",{children:[A.pnlPercentange.isNaN()?(0,W.jsx)(W.Fragment,{children:"-"}):A.pnlPercentange.toFixed(2),"%"]})]})}):(0,W.jsx)("div",{className:"px-2 text-v2-lily/[.75]",children:(0,W.jsx)(u.cC,{id:"N/A"})}),(0,W.jsx)("div",{className:(0,T.cn)(["text-v2-lily/[.35] fill-current mr-2",o?"":"-rotate-90"]),children:(0,W.jsx)(P.Z,{width:8,height:8})})]})]}),(0,W.jsxs)("div",{className:(0,T.cn)("bg-dca-item rounded-b-lg overflow-hidden transition-max-height duration-200",o?"animate-fade-in":"animate-fade-out max-h-[0px]"),children:[(0,W.jsxs)("div",{className:"flex text-sm space-x-2 px-2 md:space-x-4 md:px-4",children:[(0,W.jsx)("button",{type:"button",onClick:function(){return f("Overview")},className:(0,T.cn)("text-v2-lily/50 p-3 border-b-2 border-transparent","Overview"===m?"font-semibold text-white border-b-v2-primary":""),children:x.ag._("Overview")}),(0,W.jsx)("button",{type:"button",onClick:function(){return f("Orders")},className:(0,T.cn)("text-v2-lily/50 p-3 border-b-2 border-transparent","Orders"===m?"font-semibold text-white border-b-v2-primary":""),children:(0,W.jsx)(u.cC,{id:"Orders {0}",values:{0:null!==B&&void 0!==B&&B.length?"(".concat(null===B||void 0===B?void 0:B.length,")"):""}})})]}),"Overview"===m?(0,W.jsx)(he,{vaItem:t,inputToken:S,outputToken:Z,vaClient:n,hideButtons:a}):null,"Orders"===m?(0,W.jsx)(be,{history:B,vaClient:n,vaItem:t}):null]})]})},we=function(e){var t=e.vaClient,n=(0,r.Os)().publicKey,a=(0,y.KO)(M.P.refetchId),l=(0,s.Z)(a,1)[0],c=(0,y.KO)(M.P.isLoading),u=(0,s.Z)(c,2),m=u[0],f=u[1],v=(0,r.gZ)().fetchTokenAccounts,h=(0,$.a)(["va",null===n||void 0===n?void 0:n.toString(),l],(0,o.Z)(d().mark((function e(){var s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n){e.next=3;break}return e.abrupt("return");case 3:return f(!0),e.next=6,t.getCurrentByUser(n);case 6:return s=e.sent,e.abrupt("return",s.sort((function(e,t){return t.account.createdAt.toNumber()-e.account.createdAt.toNumber()})));case 8:return e.prev=8,f(!1),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[0,,8,11]])}))),{enabled:Boolean(n),keepPreviousData:!0}).data;return(0,i.useEffect)((function(){if(h){var e=new Set(h.flatMap((function(e){return[e.account.outputMint.toString(),e.account.inputMint.toString()]})));v(Array.from(e))}}),[h,v]),(0,W.jsxs)("div",{className:"mt-3 relative",children:[m&&!h&&(0,W.jsx)(X.O,{className:"mt-2"}),h&&h.length>0?(0,W.jsx)("div",{className:"w-full border-white/5 overflow-x-auto hideScrollbar",children:h&&(null===h||void 0===h?void 0:h.map((function(e){return(0,W.jsx)(ge,{vaItem:e,vaClient:t},e.publicKey.toString())})))}):null,h&&h.length>0&&m?(0,W.jsx)("div",{className:"absolute top-0 bottom-0 left-0 bg-black/10 backdrop-blur-sm w-full min-h-[620px]"}):null,0===(null===h||void 0===h?void 0:h.length)?(0,W.jsx)("div",{className:"bg-v2-lily/5 border border-v2-lily/10 rounded-lg text-white/20 text-sm h-full w-full flex items-center justify-center min-h-[180px]",children:(0,W.jsx)("span",{children:x.ag._("You have no active orders")})}):null]})},ye=function(e){var t=e.vaClient,n=(0,r.Os)().publicKey,a=(0,y.KO)(M.P.refetchId),i=(0,s.Z)(a,1)[0],l=(0,y.KO)(M.P.isLoading),c=(0,s.Z)(l,2),u=c[0],m=c[1],f=(0,$.a)(["vaClosed",null===n||void 0===n?void 0:n.toString(),i],(0,o.Z)(d().mark((function e(){var s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,m(!0),n){e.next=4;break}return e.abrupt("return",[]);case 4:return e.next=6,t.getClosedByUser(n);case 6:return s=e.sent,e.abrupt("return",s);case 8:return e.prev=8,m(!1),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[0,,8,11]])}))),{keepPreviousData:!0,enabled:Boolean(n)}).data;return(0,W.jsxs)("div",{className:"mt-3 relative",children:[u&&!f&&(0,W.jsx)(X.O,{className:"mt-2"}),f&&f.length>0?(0,W.jsx)("div",{className:"mt-3 w-full border-white/5 overflow-x-auto hideScrollbar",children:f&&(null===f||void 0===f?void 0:f.map((function(e){return e?(0,W.jsx)(ge,{vaItem:e,vaClient:t,isClosedVA:!0},e.publicKey.toString()):null})))}):null,f&&f.length>0&&u?(0,W.jsx)("div",{className:"absolute top-0 left-0 bg-black/10 backdrop-blur-sm w-full min-h-[620px]"}):null,0===(null===f||void 0===f?void 0:f.length)?(0,W.jsx)("div",{className:"bg-v2-lily/5 border border-v2-lily/10 rounded-lg text-white/20 text-sm h-full w-full flex items-center justify-center min-h-[180px]",children:(0,W.jsx)("span",{children:x.ag._("You have no closed orders")})}):null]})},Ne=n(63956);function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){(0,Ne.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Se=function(e){var t=e.incrementAmount,n=e.toTokenAddress,s=i.useMemo((function(){var e=new Date;return new URLSearchParams({address:n,type:"1D",time_to:(e.getTime()/1e3).toFixed(0),time_ago:"SIX_MONTHS",round_off_epoch:"300"})}),[n]),r=(0,$.a)(["va_back_test",s.toString()],(0,o.Z)(d().mark((function e(){var t,n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://birdeye-proxy.jup.ag/defi/ohlcv","?").concat(s.toString()));case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("HTTP ERROR");case 6:return e.next=8,t.json();case 8:return n=e.sent,r=n.data.items,e.abrupt("return",r);case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])}))),{keepPreviousData:!0}),a=r.data,l=r.isFetching;return{data:i.useMemo((function(){if(a&&0!==a.length&&0!==t){var e=[],n=new w.Z(0),s=new w.Z(0),r=new w.Z(0),i=0;a.forEach((function(a){r=r.add(new w.Z(t));var l=new w.Z(a.c),o=s.mul(l),c=r.minus(o);if(c.gt(0)){i++;var d=c.div(l);s=s.add(d),n=n.add(c),e.push(Ce(Ce({},a),{},{buyDetails:{spent:c,boughtAmount:d,purchasedPrice:l,purchasedDate:a.unixTime,totalInvestment:s,totalSpent:n}}))}else e.push(Ce(Ce({},a),{},{buyDetails:null}))}));var l=a[a.length-1].c,o=s.mul(l),c=n.div(s),d=s,u=o.minus(n),x=u.mul(100).div(n);return{priceData:e,averagePrice:c,totalToken:d,pnl:u,pnlPercentage:x,totalSpent:n,numberOfBuys:i,currentInvestmentValue:o}}}),[a,t]),isLoading:l}},Ze=n(82838),Oe=n(74925),Ve=n(82948),Ae=n(31242),Pe=n(39913),Me=n(76419),Te=n(69551),De=n(89349),Ie=n(49334),Be=n(37030),_e=n(19488),Fe=n(88451),Le=function(e){var t=e.priceData,n=e.averagePrice,r=e.toTokenInfo,a=r.decimals,l=r.symbol,o=Math.max.apply(null,t.map((function(e){var t;return(null===(t=e.buyDetails)||void 0===t?void 0:t.boughtAmount.toNumber())||0}))),c=function(e){var t=e.cx,n=e.cy,s=e.payload,r=e.width;if(!s.buyDetails)return null;var i=s.buyDetails.boughtAmount/o*40+15;return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(Ze.o,{cx:t,cy:n,r:i,fill:"#E8F9FF26"}),r?(0,W.jsx)("g",{children:(0,W.jsx)("text",{fontSize:10,fontWeight:500,x:t,y:n,fill:"#fff",textAnchor:"middle",dominantBaseline:"middle",children:D.uf.format(s.buyDetails.boughtAmount,a)})}):null]})},d=function(e){var t=e.active,n=e.payload;if(t&&n&&n.length&&n[0].payload.buyDetails){var s=n[0].payload.buyDetails;return(0,W.jsxs)("div",{className:"min-w-[250px] border border-v2-/5 py-2 px-3 flex flex-col rounded-lg bg-[#222B33]",children:[(0,W.jsx)("span",{className:"font-semibold text-sm",children:"Order Details"}),(0,W.jsxs)("div",{className:"text-xs text-v2-lily/50 flex justify-between",children:[(0,W.jsx)("div",{children:"Date"}),(0,W.jsx)("div",{children:(0,le.Z)(1e3*s.purchasedDate,"dd/MM/yy")})]}),(0,W.jsxs)("div",{className:"text-xs text-v2-lily/50 flex justify-between",children:[(0,W.jsx)("div",{children:"Spent"}),(0,W.jsxs)("div",{children:[D.uf.format(s.spent,6)," USD"]})]}),(0,W.jsxs)("div",{className:"text-xs text-v2-lily/50 flex justify-between",children:[(0,W.jsx)("div",{children:"Bought"}),(0,W.jsxs)("div",{children:[D.uf.format(s.boughtAmount,a)," ",l]})]}),(0,W.jsxs)("div",{className:"text-xs text-v2-lily/50 flex justify-between",children:[(0,W.jsx)("div",{children:"Purchased Price"}),(0,W.jsxs)("div",{children:[D.uf.format(s.purchasedPrice,6)," USD"]})]}),(0,W.jsxs)("div",{className:"text-xs text-v2-lily/50 flex justify-between",children:[(0,W.jsx)("div",{children:"Cummulative Bought"}),(0,W.jsxs)("div",{children:[D.uf.format(s.totalInvestment,a)," ",l]})]}),(0,W.jsxs)("div",{className:"text-xs text-v2-lily/50 flex justify-between",children:[(0,W.jsx)("div",{children:"Cummulative Spent"}),(0,W.jsxs)("div",{children:[D.uf.format(s.totalSpent,6)," USD"]})]})]})}return null},x=function(e){if(!e.viewBox)return null;var t=e.viewBox,n=t.x,s=t.y;return(0,W.jsx)("g",{children:(0,W.jsx)("text",{fontSize:11,x:n,y:s?s-10:0,fill:"#C7F284",children:(0,W.jsx)(u.cC,{id:"Avg Price"})})})},m=i.useState(0),f=(0,s.Z)(m,2),v=f[0],p=f[1],j=i.useState((0,h.tq)()?6:9),b=(0,s.Z)(j,2),g=b[0],w=b[1];return(0,W.jsxs)("div",{className:"h-[350px] lg:h-[400px] p-4 pb-8",children:[(0,W.jsxs)("div",{className:"text-sm text-white/75 font-semibold mb-3 flex justify-between",children:[(0,W.jsx)(u.cC,{id:"Value Average Simulation"}),(0,W.jsxs)("div",{className:"text-xs font-semibold text-white/75",children:[(0,le.Z)(1e3*t[v].unixTime,"dd/MM/yy")," -"," ",(0,le.Z)(1e3*t[g].unixTime,"dd/MM/yy")]})]}),(0,W.jsx)("div",{className:"w-full h-full relative",children:(0,W.jsx)("div",{className:"w-full h-full absolute top-0 left-0",children:(0,W.jsx)(Oe.h,{children:(0,W.jsxs)(Ve.c,{data:t,margin:{top:20,right:0,bottom:20,left:0},children:[(0,W.jsx)(Ae.K,{dataKey:"unixTime",tickLine:!1,axisLine:!1,tick:{fontSize:"11px"},tickFormatter:function(e){return new Date(1e3*e).getDate().toString()}}),(0,W.jsx)(Pe.B,{domain:["auto","auto"],type:"number",dataKey:"c",axisLine:!1,tickLine:!1,tick:{fontSize:"11px"},tickFormatter:function(e){return Number(e)>10?e.toFixed(2):e.toFixed(a)}}),(0,W.jsx)(Me.q,{vertical:!1,strokeWidth:.2,strokeOpacity:.5}),(0,W.jsx)(Te.d,{y:n.toNumber(),stroke:"#C7F284",strokeWidth:2,strokeDasharray:"5 3",ifOverflow:"discard",label:(0,W.jsx)(x,{})}),(0,W.jsx)(De.u,{content:(0,W.jsx)(d,{}),cursor:!1,offset:20}),(0,W.jsx)(Ie.u,{type:"monotone",dataKey:"c",stroke:"#E8F9FF40",fill:"#E8F9FF26",strokeWidth:2}),(0,W.jsx)(Be.b,{dataKey:"buyDetails.purchasedPrice",shape:(0,W.jsx)(c,{})}),(0,W.jsx)(_e.B,{onChange:function(e){var t=e.startIndex,n=e.endIndex;t&&p(t),n&&w(n)},travellerWidth:2,startIndex:v,endIndex:g,height:20,fill:"#131B24",dataKey:"unixTime",children:(0,W.jsx)(Fe.T,{children:(0,W.jsx)(Ie.u,{type:"monotone",dataKey:"c",stroke:"#E8F9FF40",fill:"#E8F9FF26",strokeWidth:2})})})]})})})})]})},Ue=n(14051),He=n(56720),Re=function(e){var t=e.title,n=e.description,s=e.descriptionColor;return(0,W.jsxs)("div",{className:"p-3 flex flex-col rounded-lg border border-v2-lily/10 bg-[#222B33]",children:[(0,W.jsx)("div",{className:"text-xs text-white/40",children:(0,W.jsx)(u.cC,{id:"{title}",values:{title:t}})}),(0,W.jsx)("div",{className:(0,T.cn)("text-white/75 text-sm font-semibold",s),children:(0,W.jsx)(u.cC,{id:"{description}",values:{description:n}})})]})},Ee=function(e){var t,n=e.toTokenAddress,s=e.incrementAmount,a=(0,r.Bn)().getTokenInfo,l=Se({toTokenAddress:n,incrementAmount:s}),o=l.data,c=l.isLoading,d=i.useMemo((function(){return a(n)||(0,fe.T)({address:n})}),[a,n]),m=d.decimals,f=i.useMemo((function(){return!(null===o||void 0===o||!o.pnl||!o.pnl.gt(0))}),[null===o||void 0===o?void 0:o.pnl]),v=i.useMemo((function(){return 0===s||!o||o.priceData.length<10}),[o,s]),h=(0,Ue.Z)({baseTokenInfo:d,quoteTokenInfo:He.Gm}),p=h.data,j=h.isLoading;return(0,W.jsxs)("div",{className:"bg-[#131B24] rounded-2xl shadow-xl w-full h-full flex flex-col relative",children:[(0,W.jsxs)("div",{className:"flex justify-between w-full border-b border-v2-lily/5 px-4 py-2",children:[(0,W.jsxs)("div",{className:"flex gap-x-2 items-center",children:[(0,W.jsx)(te.Z,{info:d,width:28,height:28}),(0,W.jsxs)("div",{className:"font-semibold text-md gap-2 flex",children:[(0,W.jsx)("span",{children:d.symbol}),(0,W.jsx)("span",{children:x.ag._("Value Average")})]})]}),j?(0,W.jsx)(X.O,{className:"w-20 h-7"}):(0,W.jsxs)("div",{className:"flex text-xl text-v2-lily font-semibold",children:["$",(0,W.jsx)(pe.ZP,{value:null!==(t=null===p||void 0===p?void 0:p.currentPrice.toNumber())&&void 0!==t?t:0,maxSuffix:5})]})]}),(0,W.jsxs)("div",{className:"flex w-full",children:[c&&(0,W.jsx)("div",{className:"absolute top-0 left-0 bottom-0 bg-black/10 backdrop-blur-sm w-full z-20"}),v?(0,W.jsx)("div",{className:"flex justify-center items-center flex-1 text-xs text-v2-lily/75 w-full",children:(0,W.jsx)(u.cC,{id:"No data available"})}):(0,W.jsxs)("div",{className:"w-full",children:[(0,W.jsx)("div",{className:"text-xxl text-v2-primary font-bold p-4",children:(0,W.jsx)(u.cC,{id:"Backtest Result"})}),o&&o.priceData.length>=10?(0,W.jsx)("div",{className:"px-4 py-2 border-b border-v2-lily/5",children:(0,W.jsxs)("div",{className:"text-white/75 text-sm",children:[(0,W.jsx)(u.cC,{id:"If you started value averaging {0} on {1} with a target to increase portfolio by {incrementAmount} USD everyday, you would have spent {2} USDC and you would have earned {3} USD ({4}%) with a current investment value of {5} USD.",values:{0:d.symbol,1:(0,le.Z)(1e3*o.priceData[0].unixTime,"dd/MM/yy"),2:o.totalSpent.toFixed(2),3:o.pnl.toFixed(2),4:o.pnlPercentage.toFixed(2),5:o.currentInvestmentValue.toFixed(2),incrementAmount:s}}),(0,W.jsx)("p",{className:"pt-2 italic text-xs",children:"*historic performance does not indicate future performance"})]})}):null,o&&o.priceData.length>=10?(0,W.jsxs)("div",{className:"flex flex-col",children:[(0,W.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 p-4 border-b border-v2-lily/5",children:[(0,W.jsx)(Re,{title:"Average Price",description:x.ag._("{0} USD",{0:(0,pe.M)({value:o.averagePrice.toNumber()})})}),(0,W.jsx)(Re,{title:"Total Bought",description:"".concat(D.uf.format(o.totalToken,m)," ").concat(d.symbol)}),(0,W.jsx)(Re,{title:"Number of Buys",description:"".concat(o.numberOfBuys)}),(0,W.jsx)(Re,{title:"Total Spent",description:"".concat(D.uf.format(o.totalSpent,2)," USD")}),(0,W.jsx)(Re,{title:"Current Investment Value",description:x.ag._("{0} USD",{0:D.uf.format(o.currentInvestmentValue,2)})}),(0,W.jsx)(Re,{title:"PnL",description:x.ag._("{0} USD ({1}%)",{0:D.uf.format(o.pnl,2),1:D.uf.format(o.pnlPercentage,2)}),descriptionColor:f?"text-perps-green":"text-perps-red"})]}),(0,W.jsx)(Le,{priceData:o.priceData,averagePrice:o.averagePrice,toTokenInfo:d})]}):(0,W.jsxs)("div",{className:"flex flex-col space-y-2 w-full",children:[(0,W.jsx)(X.O,{className:"h-10 w-full"}),(0,W.jsx)(X.O,{className:"h-20 w-full"}),(0,W.jsx)(X.O,{className:"h-20 w-full"})]})]})]})]})},Ke=n(33118),We=n(5564),qe=n(53636),Ge=n(28940),ze=n(55948),Qe=n(43723),Ye=function(e){var t=e.fromValue,n=e.fromTokenInfo,s=e.toTokenInfo,r=e.increaseBy,a=e.intervalNumber,i=e.period,l=e.startAt,o=(0,Ge.Z)(),c=o.showSummary,d=o.toggleSummary;return(0,W.jsxs)("div",{className:"w-full",children:[(0,W.jsx)("div",{className:"flex justify-center items-center mb-4 mt-3",children:(0,W.jsxs)("button",{type:"button",onClick:d,className:"flex items-center space-x-2 cursor-pointer text-white/25 hover:text-v2-primary",children:[(0,W.jsx)("div",{className:"h-4 w-4 flex items-center fill-current",children:c?(0,W.jsx)(Qe.Z,{}):(0,W.jsx)(ze.Z,{})}),(0,W.jsx)("span",{className:"text-xs font-medium",children:(0,W.jsx)(u.cC,{id:"VA Summary"})})]})}),c&&(0,W.jsx)("div",{className:"w-full p-5 rounded-lg border border-v2-lily/10 text-xs mt-3",children:(0,W.jsxs)("div",{className:"space-y-1",children:[(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("span",{className:"text-white/50",children:x.ag._("Max budget")}),(0,W.jsxs)("span",{className:"text-white/[.75]",children:[(0,W.jsx)(qe.Z,{currency:!1,value:t.floatValue||"-"})," ",null===n||void 0===n?void 0:n.symbol]})]}),(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("span",{className:"text-white/50",children:x.ag._("To buy")}),(0,W.jsx)("span",{className:"text-white/[.75]",children:null===s||void 0===s?void 0:s.symbol})]}),(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("span",{className:"text-white/50",children:x.ag._("To increase portfolio value by")}),(0,W.jsxs)("span",{className:"text-white/[.75]",children:[(0,W.jsx)(qe.Z,{currency:!1,value:r.floatValue||"-"})," USD"]})]}),(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("span",{className:"text-white/50",children:x.ag._("Every")}),(0,W.jsx)("span",{className:"text-white/[.75]",children:"".concat(a.floatValue," ").concat(i)})]}),(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("span",{className:"text-white/50",children:x.ag._("Start date")}),(0,W.jsx)("span",{className:"text-white/[.75]",children:l?(0,le.Z)(l,"d, MMM y, p"):"Now"})]}),(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsx)("span",{className:"text-white/50",children:x.ag._("Platform fee")}),(0,W.jsx)("span",{className:"text-v2-primary font-bold",children:"0.1%"})]}),(0,W.jsxs)("div",{className:"py-3 px-4 text-xs bg-black/15 dark:bg-white/5 text-black/75 dark:text-white/75 border border-black/[.15] dark:border-white/[.15] rounded-lg mt-3",children:[(0,W.jsx)(u.cC,{id:"You will receive exactly what you have specified, minus platform fees."}),(0,W.jsx)("a",{className:"ml-1 underline cursor-pointer",href:"https://station.jup.ag/guides/va/how-va-work",target:"_blank",children:x.ag._("Learn more")})]})]})})]})},$e="pairs-select-to-pair-modal-va",Xe=(Math.floor(99/7),Math.floor(3.3),{autoWithdraw:!0,fromTokenAddress:S.cq.toBase58(),toTokenAddress:S.W4.toBase58(),intervalNumber:{formattedValue:"1",value:"1",floatValue:1},period:"day",fromValue:{formattedValue:"10",value:"10",floatValue:10},increaseBy:{formattedValue:"2",value:"2",floatValue:2},startAt:null}),Je=function(e){var t=e.message;return(0,W.jsxs)("div",{className:"px-2 rounded-lg text-xs flex items-center space-x-1 text-[#F04A44] mt-1",children:[(0,W.jsx)("div",{className:"h-3 w-3 fill-current",children:(0,W.jsx)(K.Z,{fill:"inherit"})}),(0,W.jsx)("div",{className:"flex",children:t})]})},et=function(e){var t,n=e.outToken,a=e.inToken,c=(0,r.Os)(),S=(0,V.R3)(),K=(0,g.NL)(),G=(0,A.T)(),z=(0,y.KO)(v.yz),Q=(0,s.Z)(z,1)[0],$=(0,y.KO)(M.P.isLoading),X=(0,s.Z)($,1)[0],J=(0,y.KO)(M.P.refetchId),ee=(0,s.Z)(J,2),te=(ee[0],ee[1]),ne=(0,O.gs)().priorityLevel,se=(0,r.Rc)(),re=i.useMemo((function(){return new f._V(se,"mainnet-beta","https://va.jup.ag")}),[se]),ae=i.useState("Active VAs"),ie=(0,s.Z)(ae,2),le=ie[0],oe=ie[1],ce=(0,k.cI)({defaultValues:Xe,mode:"onChange"}),de=ce.control,ue=ce.setValue,xe=ce.handleSubmit,me=ce.formState,fe=me.errors,ve=me.isSubmitting,he=me.isValid,pe=ce.trigger,je=(0,Z.hv)().appDomain,be=(0,r.y6)().tokenPriceMap,ge=(0,r.Bn)().tokens,Ne=(0,k.qo)({control:de,name:"fromTokenAddress"}),ke=(0,k.qo)({control:de,name:"toTokenAddress"}),Ce=(0,k.qo)({control:de,name:"period"}),Se=(0,k.qo)({control:de,name:"intervalNumber"}),Ze=(0,k.qo)({control:de,name:"increaseBy"}),Oe=(0,k.qo)({control:de,name:"autoWithdraw"}),Ve=(0,k.qo)({control:de,name:"fromValue"}),Ae=(0,k.qo)({control:de,name:"startAt"});i.useEffect((function(){pe()}),[pe,Ze,Ve,Ae]),(0,i.useEffect)((function(){a&&ue("fromTokenAddress",a.address),n&&ue("toTokenAddress",n.address)}),[a,n]);var Pe=(0,We.D)([a,n]).tokensWithTransferFee,Me=i.useMemo((function(){var e;return null===(e=be[Ne])||void 0===e?void 0:e.usd}),[be,Ne]),Te=i.useMemo((function(){return ge.map((function(e){return e.address}))}),[ge]),De=i.useMemo((function(){return _.tc.find((function(e){return e.id===Ce}))}),[Ce]),Ie=i.useMemo((function(){return _.tc.map((function(e){return e.id})).filter((function(e){return!["second"].includes(e)}))}),[]),Be=i.useCallback((function(e){e&&ue("fromTokenAddress",e)}),[ue]),_e=i.useCallback((function(e){e&&ue("toTokenAddress",e)}),[ue]),Fe=i.useCallback((function(e){ue("fromValue",{floatValue:e.toNumber(),formattedValue:e.toString(),value:e.toString()})}),[ue]),Le=i.useCallback((function(){G(n,a)}),[a,n,G]),Ue=i.useCallback(function(){var e=(0,o.Z)(d().mark((function e(t){var s,r,i,o,x,m,g,y,N,k,C,Z;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.fromValue,r=t.increaseBy,i=t.autoWithdraw,o=t.startAt,!(s.value&&r.value&&De&&Se&&a&&n&&c.publicKey)){e.next=16;break}return m=new w.Z(s.value).mul(Math.pow(10,a.decimals)),g=new w.Z(r.value).mul(Math.pow(10,U.Gm.decimals)),e.next=6,re.open({autoWithdraw:i,inputTokenProgram:(0,h.kL)(a)?j.nA:p.TOKEN_PROGRAM_ID,outputTokenProgram:(0,h.kL)(n)?j.nA:p.TOKEN_PROGRAM_ID,inputMint:new b.PublicKey(Ne),outputMint:new b.PublicKey(ke),depositAmount:BigInt(m.toFixed(0)),incrementUSDCValue:BigInt(g.toFixed(0)),user:c.publicKey,payer:c.publicKey,startAtUnix:o?BigInt(o/1e3):void 0,orderInterval:BigInt((null===De||void 0===De?void 0:De.secondsInPeriod)*(Number(Se.value)||0))});case 6:return y=e.sent,N=y.ixs,e.next=10,se.getLatestBlockhash("confirmed");case 10:return k=e.sent,C=k.blockhash,Z=k.lastValidBlockHeight,e.next=15,S((x=new b.Transaction({feePayer:c.publicKey,blockhash:C,lastValidBlockHeight:Z})).add.apply(x,(0,l.Z)(N)),{blockhash:C,lastValidBlockHeight:Z,idl:f.xO,idlProgramId:new b.PublicKey(f.MG["mainnet-beta"])},{successMessage:(0,W.jsx)(u.cC,{id:"VA created for {0} {1} with an increment of {2} USD",values:{0:s.value,1:a.symbol,2:r.floatValue}}),submittingMessage:(0,W.jsx)(u.cC,{id:"Creating VA"}),errorMessage:(0,W.jsx)(u.cC,{id:"Failed to create VA"}),referenceFee:"MEDIUM"===ne?Q.va.m:"HIGH"===ne?Q.va.h:"VERY_HIGH"===ne?Q.va.vh:void 0,minimumFee:v.uo,requestComputeBudgetLimit:3e5});case 15:K.invalidateQueries({queryKey:["va"]});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[De,Se,a,n,c.publicKey,re,Ne,ke,se,S,K,ne,Q.va.m,Q.va.h,Q.va.vh]);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{className:"w-full h-full flex flex-col items-center justify-between text-lg lg:text-2xl text-v2-lily",children:(0,W.jsx)("div",{className:"w-full flex justify-center",children:(0,W.jsxs)("div",{className:"flex flex-col items-center justify-center w-full gap-5 lg:gap-0",children:[(0,W.jsxs)("form",{className:"w-full h-auto flex flex-col space-y-2",onSubmit:xe(Ue),children:[(0,W.jsxs)("div",{className:"flex flex-col",children:[(0,W.jsx)("div",{children:(0,W.jsx)(k.Qr,{name:"fromValue",control:de,rules:{validate:function(e){return!!fe.increaseBy||(Me&&Ze.floatValue&&(!e.floatValue||e.floatValue*Me<2*Ze.floatValue)?x.ag._("Please enter a minimum budget of {0} USD",{0:2*Ze.floatValue}):void 0)},required:"Required"},render:function(e){var t=e.field,n=t.onChange,s=t.value,r=t.onBlur,i=e.fieldState.error;return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)("div",{className:(0,T.cn)("min-h-[124px] flex flex-col space-y-3 p-4 border border-transparent bg-uiv2 rounded-xl","focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:[(0,W.jsxs)("div",{className:"flex justify-between items-center",children:[(0,W.jsx)("span",{className:"text-sm font-medium text-v2-lily",children:(0,W.jsx)(u.cC,{id:"I Have A Max Budget Of"})}),a&&(0,W.jsxs)("div",{className:"flex space-x-2",children:[(0,W.jsx)(B.Z,{tokenInfo:a}),(0,W.jsx)(m.oi,{mint:a.address,onBalanceChange:Fe})]})]}),(0,W.jsxs)("div",{className:"flex-1 flex justify-between items-center space-x-2",children:[(0,W.jsx)(I.Z,{onChange:Be,fromTokenAddress:Ne,toTokenAddress:ke,modalId:$e,name:"fromTokenAddress",mintsList:Te,type:"tokenAndInput"}),(0,W.jsx)(F.Z,{onBlur:r,onChange:n,tokenAddress:Ne,value:s,name:"fromValue",tokenAmountClassname:"font-semibold text-v2-lily",usdValueClassname:"!text-xs font-normal text-v2-lily/50"})]})]}),(null===i||void 0===i?void 0:i.message)&&(0,W.jsx)(Je,{message:i.message})]})}})}),(0,W.jsxs)("div",{className:"relative flex justify-center my-1",children:[(0,W.jsx)("hr",{className:"absolute w-full border-uiv2/50 top-[calc(50%-1px)] -z-0"}),(0,W.jsx)("div",{className:"inline-block z-10",children:(0,W.jsx)("button",{type:"button",className:(0,T.cn)("group/flip bg-v2-background-page w-8 h-8 rounded-full cursor-pointer flex flex-col justify-center border-[3px] border-uiv2 text-v2-lily/50","dark:hover:border-v2-primary dark:hover:shadow-swap-input-dark"),onClick:Le,children:(0,W.jsx)("span",{className:"w-full text-v2-lily/50 fill-current flex justify-center transition-none group-hover/flip:text-v2-primary/50 dark:group-hover/flip:text-v2-primary",children:(0,W.jsx)(E.Z,{})})})})]}),(0,W.jsxs)("div",{className:(0,T.cn)("min-h-[124px] pt-4 flex flex-col justify-between w-full bg-uiv2 rounded-xl border border-transparent","group hover:border-v2-primary/50 hover:shadow-swap-input-dark"),children:[(0,W.jsxs)("div",{className:"mx-4 mb-2 flex justify-between items-center",children:[(0,W.jsx)("span",{className:"text-sm font-medium text-v2-lily",children:(0,W.jsx)(u.cC,{id:"To Buy"})}),n&&(0,W.jsx)(B.Z,{tokenInfo:n})]}),(0,W.jsx)(I.Z,{onChange:_e,fromTokenAddress:Ne,toTokenAddress:ke,modalId:$e,mintsList:Te,name:"toTokenAddress",type:"tokenSelectOnly"})]})]}),(0,W.jsx)(k.Qr,{rules:{validate:function(e){if(!e.floatValue||e.floatValue<2)return x.ag._("Please enter a buy amount above 2 USD")}},control:de,name:"increaseBy",render:function(e){var t=e.field,n=t.onChange,s=t.value,r=e.fieldState.error;return(0,W.jsxs)("div",{className:"flex flex-col",children:[(0,W.jsxs)("div",{className:(0,T.cn)("p-4 bg-uiv2 rounded-xl flex flex-col space-y-3 border border-transparent","group focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:[(0,W.jsx)("span",{className:"text-xs font-medium text-v2-lily/50",children:(0,W.jsx)(u.cC,{id:"To Increase Portfolio Value By"})}),(0,W.jsxs)("div",{className:"flex justify-between items-center",children:[(0,W.jsx)("span",{className:"text-center rounded-lg text-sm font-semibold text-v2-lily px-3 py-2 bg-v2-background-page",children:"USD"}),(0,W.jsx)(R.Z,{name:"increaseBy",className:"!bg-transparent !outline-none !text-right !text-xl !font-semibold !text-v2-lily",onChange:n,value:null===s||void 0===s?void 0:s.value,decimals:2})]})]}),(null===r||void 0===r?void 0:r.message)&&(0,W.jsx)(Je,{message:r.message})]})}}),(0,W.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,W.jsxs)("div",{className:"basis-1/3 flex flex-col",children:[(0,W.jsxs)("div",{className:(0,T.cn)("flex flex-col space-y-2","p-4 bg-uiv2 rounded-xl flex flex-col border border-transparent","group focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:[(0,W.jsx)("span",{className:"text-xs font-medium text-v2-lily/50",children:(0,W.jsx)(u.cC,{id:"Every"})}),(0,W.jsxs)("div",{className:"w-full flex justify-between items-center",children:[(0,W.jsx)(k.Qr,{rules:{validate:function(e){return"minute"===Ce&&((null===e||void 0===e?void 0:e.floatValue)||0)<10?x.ag._("Please enter an interval above 10 minutes"):!e.floatValue||e.floatValue<1?x.ag._("Please enter an interval above 0"):void 0}},control:de,name:"intervalNumber",render:function(e){var t=e.field,n=t.onChange,s=t.value;return(0,W.jsx)(C.Z,{value:null===s||void 0===s?void 0:s.floatValue,onValueChange:n,thousandSeparator:","===D.A5?".":",",decimalSeparator:","===D.A5?",":".",decimalScale:0,allowNegative:!1,allowLeadingZeros:!1,className:"!w-full !bg-transparent !outline-none !text-sm !font-semibold !text-v2-lily"})}}),(0,W.jsx)("div",{className:"flex justify-end items-center",children:(0,W.jsx)(k.Qr,{control:de,name:"period",render:function(e){var t=e.field,n=t.onChange,s=t.value;return(0,W.jsxs)(H.Z,{onChange:n,className:"!bg-transparent !px-0 !py-0 !text-sm !font-semibold !text-v2-lily",contentClassName:"!min-w-[124px]",data:Ie,value:s,rowRenderer:function(e){return(0,W.jsx)("div",{className:"text-sm",children:e})},children:[s,(0,W.jsx)("div",{className:"ml-2 fill-current text-v2-lily/25 hover:text-v2-lily",children:(0,W.jsx)(P.Z,{})})]})}})})]})]}),fe.intervalNumber&&(0,W.jsx)(Je,{message:null===(t=fe.intervalNumber)||void 0===t?void 0:t.message})]}),(0,W.jsxs)("div",{className:(0,T.cn)("basis-2/3 flex flex-col space-y-2","p-4 bg-uiv2 rounded-xl flex flex-col border border-transparent","group focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:[(0,W.jsxs)("div",{className:"flex justify-between items-center",children:[(0,W.jsx)("span",{className:"text-xs font-medium text-v2-lily/50",children:(0,W.jsx)(u.cC,{id:"Select Date"})}),(0,W.jsx)("button",{type:"button",className:"text-v2-lily/30 hover:text-v2-lily text-xxs font-semibold cursor-pointer underline rounded",onClick:function(){return ue("startAt",Ae?null:Date.now())},children:Ae?(0,W.jsx)(u.cC,{id:"Reset"}):(0,W.jsx)(u.cC,{id:"Start Date"})})]}),Ae?(0,W.jsx)(k.Qr,{rules:{validate:function(e){if(e&&e<=Date.now())return x.ag._("You cannot enter a date in the past")}},control:de,name:"startAt",render:function(e){var t=e.field.onChange;return(0,W.jsx)("input",{type:"datetime-local",onChange:function(e){return t(new Date(e.target.value).getTime())},className:"w-full !bg-transparent !px-0 !py-0 !text-sm !font-semibold !text-v2-lily !outline-none"})}}):(0,W.jsx)("span",{className:"text-sm font-semibold text-v2-lily",children:"Start Now"})]})]}),(0,W.jsxs)("div",{className:"flex justify-between items-center",children:[(0,W.jsxs)("label",{htmlFor:"autoWithdraw",className:"text-xs font-medium text-v2-lily/50",children:[(0,W.jsx)(u.cC,{id:"Auto receive"})," $",null===n||void 0===n?void 0:n.symbol," ",(0,W.jsx)(u.cC,{id:"after every buy"})]}),(0,W.jsx)(q,{buttons:[{value:x.ag._("Auto"),onChange:function(){return ue("autoWithdraw",!0)},isSelected:Oe},{value:x.ag._("Manually"),onChange:function(){return ue("autoWithdraw",!1)},isSelected:!Oe}]})]}),null!==Pe&&void 0!==Pe&&Pe.length?(0,W.jsxs)("div",{className:"bg-red-500 text-xs p-4 rounded-xl",children:[(0,W.jsx)(u.cC,{id:"Token2022 tokens with transfer fee will result in repetitive fees, please trade other tokens."}),Pe.map((function(e){return(0,W.jsxs)("p",{className:"mt-1",children:["- ",e.symbol," (",e.fee,"%)"]},e.address)}))]}):null,c.connected?(0,W.jsx)(L.Z,{disabled:!he||(null===Pe||void 0===Pe?void 0:Pe.length)>0,loading:ve,type:"submit",children:x.ag._("Place Order")}):(0,W.jsx)(Ke.Z,{}),(0,W.jsx)(Ye,{fromValue:Ve,fromTokenInfo:a,toTokenInfo:n,increaseBy:Ze,intervalNumber:Se,period:Ce,startAt:Ae})]}),(0,Z.mD)(je)&&je.container.leftContainerGraph&&je.container.leftContainerGraph.current&&(0,N.createPortal)((0,W.jsx)(Ee,{toTokenAddress:ke,incrementAmount:Ze.floatValue||0}),je.container.leftContainerGraph.current)]})})}),c.connected?(0,W.jsx)("div",{className:"flex space-x-2 justify-start items-start overflow-y-auto w-full",children:(0,Z.mD)(je)&&je.container.leftContainerHistories&&je.container.leftContainerHistories.current&&(0,N.createPortal)((0,W.jsxs)(Y,{isLoading:X,tabs:["Active VAs","Past VAs"],activeTab:le,setActiveTab:oe,refetch:function(){te((function(e){return e+1}))},children:["Active VAs"===le?(0,W.jsx)(we,{vaClient:re}):null,"Past VAs"===le?(0,W.jsx)(ye,{vaClient:re}):null]}),je.container.leftContainerHistories.current)}):null,c.connected?(0,W.jsx)("div",{className:"flex space-x-2 justify-start items-start overflow-y-auto w-full",children:(0,Z.mD)(je)&&je.container.bottomPageHistories&&je.container.bottomPageHistories.current&&(0,N.createPortal)((0,W.jsxs)(Y,{isLoading:X,tabs:["Active VAs","Past VAs"],activeTab:le,setActiveTab:oe,refetch:function(){te((function(e){return e+1}))},children:["Active VAs"===le?(0,W.jsx)(we,{vaClient:re}):null,"Past VAs"===le?(0,W.jsx)(ye,{vaClient:re}):null]}),je.container.bottomPageHistories.current)}):null]})},tt=n(22466),nt=!0,st=function(){var e=(0,tt.V)(),t=(0,s.Z)(e,2),n=t[0],l=t[1],o=(0,r.gZ)().fetchTokenAccounts;return(0,i.useEffect)((function(){n&&l&&o([n.address,l.address])}),[n,l,o]),(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(a.PB,{title:"VA"}),(0,W.jsx)(et,{inToken:n,outToken:l})]})}},82574:function(e,t,n){"use strict";n.d(t,{P:function(){return r}});var s=n(9364),r={refetchId:(0,s.cn)(0),isLoading:(0,s.cn)(!1)}},51550:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/va/[inOut]",function(){return n(91954)}])}},function(e){e.O(0,[3215,4518,5426,4669,2089,1963,9774,2888,179],(function(){return t=51550,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=[inOut]-728c647c7432ded9.js.map