(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1990,1562,7829],{77829:function(e,t,n){"use strict";n.r(t);var i=n(63956),r=(n(93981),n(39268)),s=n.n(r),o=n(67768),u=n(29541);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var l=s()((function(){var e=!0,t=(0,o.EQ)(),i=t.iOS,r=t.version;return i&&r&&r<15&&(e=!1),e?Promise.all([n.e(1197),n.e(3215),n.e(7743),n.e(5942)]).then(n.bind(n,72383)):n.e(4205).then(n.bind(n,64205))}),{loading:function(){return(0,u.jsx)("p",{children:"Loading..."})},loadableGenerated:{webpack:function(){return[72383,64205]}}});t.default=function(e){return(0,u.jsx)(l,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))}},81562:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g},transactionDetailToQuoteResponse:function(){return h}});var i=n(97620),r=n(73360),s=n(77829),o=n(93981),u=n(7744),a=n(9319),l=n.n(a),c=n(45009),d=n(41144),f=function(e){return(0,c.a)(["transaction-detail-".concat(e)],(function(){return d.ZP.get("https://stats.jup.ag/transactions/".concat(e)).json()}))},m=n(64138),x=n(29541),p=l().BigInt(100),h=function(e){var t=e.swapData.map((function(e,t){var n=e.amm,i=e.inMint,r=e.outMint,s=e.inAmount,o=e.outAmount,a=new Uint8Array(32);return a[0]=t,{inputMint:i,outputMint:r,inAmount:l().BigInt(s),outAmount:l().BigInt(o),ammKey:new u.PublicKey(a),label:n,feeAmount:l().BigInt(0),feeMint:u.PublicKey.default}})),n=t.reduce((function(e,t){var n,i=t.inputMint,r=t.inAmount,s=null!==(n=e.get(i))&&void 0!==n?n:{inputAmount:l().BigInt(0),consumedPercents:0,splits:0,consumedAmount:l().BigInt(0)};return s.inputAmount=l().add(s.inputAmount,r),s.splits+=1,e.set(i,s),e}),new Map),r=t.map((function(e){var t=n.get(e.inputMint),r=function(){if(1===t.splits)return[100-t.consumedPercents,l().subtract(t.inputAmount,t.consumedAmount)];var n=l().divide(l().multiply(e.inAmount,p),t.inputAmount),i=l().divide(l().multiply(n,e.inAmount),p);return[l().toNumber(n),i]}(),s=(0,i.Z)(r,2),o=s[0],u=s[1];return t.consumedPercents+=o,t.splits-=1,t.consumedAmount=l().add(t.consumedAmount,u),{swapInfo:e,percent:o}}));return{inputMint:new u.PublicKey(e.inMint),outputMint:new u.PublicKey(e.outMint),slippageBps:0,swapMode:"ExactIn",inAmount:l().BigInt(e.inAmount),outAmount:l().BigInt(e.outAmount),otherAmountThreshold:l().BigInt(0),priceImpactPct:"",routePlan:r,contextSlot:0}},g=function(e){var t=e.transaction,n=f(t.txHash),i=o.useMemo((function(){if(n.data)return h(n.data)}),[n]);return n.error?(0,x.jsx)("div",{style:{height:400},className:"bg-white dark:bg-[#313E4C] min-w-full w-[100vw] max-w-[600px]  flex space-y-6 justify-center items-center",children:(0,x.jsx)(r.cC,{id:"Error fetching transaction"})}):i?(0,x.jsx)(s.default,{quoteResponse:i}):(0,x.jsx)("div",{style:{height:400},className:"bg-white dark:bg-[#313E4C] min-w-full w-[100vw] max-w-[600px]  flex flex-col justify-between space-y-6",children:(0,x.jsx)(m.Z,{width:600,height:380})})}},19943:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return K},default:function(){return q}});var i=n(97620),r=n(68586),s=n(93981),o=n(72215),u=n(72997),a=n(27195),l=n(8857),c=n.n(l),d=n(81652),f=n(32529),m=n(30825),x=n(42916),p=n(3380),h=n(7761),g=n(25224),v=n(74966),j=n(70006),b=n(59978),y=n(40558),w=n(59394),N=n(58898),P=n(42082),A=n(85216),Z=n(24628),k=n(70602),M=n(81562),O=n(13154),I=n(11017),_=n(25546),E=n(29541),T=function(e){var t=e.transaction,n=t.inputAmount,i=t.inputMint,r=t.outputMint,u=t.outputAmount,a=t.txHash,l=t.blockTime,c=(0,o.Bn)().getTokenInfo,d=(0,N.Z)().language,f=(0,j.JT)().openModal,m=(0,P.T)(),x=(0,_.bl)(l),p=(0,s.useMemo)((function(){return c(i)}),[c,i]),T=(0,s.useMemo)((function(){return c(r)}),[c,r]),C=(0,s.useMemo)((function(){return p&&T?{inAmount:(0,g.Z0)(u,T.decimals),outAmount:(0,g.Z0)(n,p.decimals)}:null}),[n,p,u,T]);return(0,E.jsxs)("div",{className:"w-full flex justify-between items-center p-2 md:px-4 md:py-3 rounded-lg bg-history-item overflow-hidden",children:[(0,E.jsxs)("div",{className:"hidden md:flex flex-col gap-y-1",children:[(0,E.jsxs)("div",{className:"flex",children:[(0,E.jsxs)("div",{className:"flex items-center",children:[(0,E.jsx)(b.Z,{info:p,width:20,height:20}),(0,E.jsx)("div",{className:"-ml-2",children:(0,E.jsx)(b.Z,{info:T,width:20,height:20})})]}),(0,E.jsxs)("div",{className:"flex text-xs text-v2-lily/70 items-center gap-x-2 ml-2",children:[(0,E.jsxs)("span",{children:[g.uf.format(n)," ",(null===p||void 0===p?void 0:p.symbol)||""]}),(0,E.jsx)("div",{className:"text-v2-lily/30 fill-current",children:(0,E.jsx)(I.Z,{})}),(0,E.jsxs)("span",{children:[g.uf.format(u)," ",(null===T||void 0===T?void 0:T.symbol)||""]})]})]}),C&&T&&p?(0,E.jsx)(O.Z,{className:"text-xs",textClassName:"!min-w-[9rem]",inputPair:T,outputPair:p,inputAmount:C.inAmount,outputAmount:C.outAmount}):null]}),(0,E.jsxs)("div",{className:"flex md:hidden flex-col gap-y-1",children:[(0,E.jsx)("div",{className:"flex",children:(0,E.jsxs)("div",{className:"text-xs",children:[(0,E.jsxs)("div",{className:"flex items-center text-v2-lily/70 gap-x-2",children:[(0,E.jsx)(b.Z,{info:p,width:20,height:20}),(0,E.jsxs)("p",{children:[g.uf.format(n)," ",(null===p||void 0===p?void 0:p.symbol)||""]})]}),(0,E.jsxs)("div",{className:"flex items-center text-v2-lily/70 gap-x-2",children:[(0,E.jsx)(b.Z,{info:T,width:20,height:20}),(0,E.jsxs)("p",{children:[g.uf.format(u)," ",(null===T||void 0===T?void 0:T.symbol)||""]})]})]})}),C&&T&&p?(0,E.jsx)(O.Z,{className:"text-xs",textClassName:"!min-w-[9rem]",inputPair:T,outputPair:p,inputAmount:C.inAmount,outputAmount:C.outAmount}):null]}),(0,E.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,E.jsxs)("div",{className:"flex justify-end items-center gap-x-1 lg:gap-x-2",children:[(0,E.jsx)(y.Z,{content:h.ag._("Copy Trade"),children:(0,E.jsx)("button",{type:"button",onClick:function(){m(p,T)},className:"h-7 w-7 rounded-full border border-v2-lily/10 p-2 flex items-center justify-center",children:(0,E.jsx)(A.Z,{width:10,height:10})})}),(0,E.jsx)(y.Z,{content:h.ag._("View routing"),children:(0,E.jsx)("button",{type:"button",onClick:function(){f((0,E.jsx)(M.default,{transaction:e.transaction}),{noCloseButton:!1,containerStyle:{background:"none"}})},className:"h-7 w-7 rounded-full border border-v2-lily/10 p-2 flex items-center justify-center",children:(0,E.jsx)(k.Z,{})})}),(0,E.jsx)(y.Z,{placement:"bottom-start",content:h.ag._("Open Tx in Explorer"),children:(0,E.jsx)(w.Z,{txid:a,className:"h-7 w-7 rounded-full border border-v2-lily/10 p-2 flex items-center justify-center",children:(0,E.jsx)(Z.Z,{width:10,height:10})})})]}),x&&(0,E.jsx)("span",{className:"text-right text-xs font-normal text-v2-lily/30",children:(0,v.Z)(x,{locale:d.timeLocale})})]})]})},C=function(){var e=(0,d.Os)().connected,t=(0,d.Bn)(),n=t.getTokenInfo,i=t.requestTokenInfo,r=t.requestOnChainTokenInfo,o=(0,s.useState)(0),u=o[0],l=o[1],h=(0,s.useState)(!1),g=h[0],v=h[1],j=(0,x.Z)(),b=j.data,y=j.isLoading,w=(0,s.useState)([]),N=w[0],P=w[1],A=(0,s.useMemo)((function(){return b?Math.ceil(b.length/5):0}),[b]),Z=(0,f.Y)({pageIndex:u,setPageIndex:l,pageCount:A}),k=Z.pager,M=Z.gotoPage,O=Z.canPreviousPage,I=Z.canNextPage;return(0,s.useEffect)((function(){if(!(!0===y&&(b||[]).length>0)){var e=(null===b||void 0===b?void 0:b.slice(5*u,5*(u+1)))||[];v(!1);var t=function(){var t=(0,a.Z)(c().mark((function t(){var s,o,u,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s=new Set,e.forEach((function(e){s.add(e.inputMint),s.add(e.outputMint)})),o=Array.from(s).filter(Boolean),t.next=6,i(o);case 6:if(u=t.sent,!((a=o.filter((function(e){return void 0===n(e)})).filter((function(e){return void 0===u.find((function(t){return t.address===e}))}))).length>0)){t.next=11;break}return t.next=11,r(a);case 11:P(e),v(!0),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),console.error("Error fetching token infos",t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}();t()}}),[n,b,y,u,r,i]),e?!y&&b&&0===b.length?(0,E.jsx)("div",{className:"w-full h-[150px] flex justify-center items-center border border-v2-lily/5 rounded-lg",children:(0,E.jsx)("p",{className:"text-sm text-v2-lily/50",children:"No swap history"})}):(0,E.jsxs)("div",{className:"w-full flex flex-col gap-y-2",children:[(0,E.jsxs)("div",{className:"relative w-full flex flex-col gap-y-2 px-2 lg:px-0",children:[!g&&(0,E.jsx)("div",{className:"z-20 absolute top-0 left-0 bg-black/10 backdrop-blur-sm w-full h-full"}),(N||[]).map((function(e){var t=e.inputAmount,n=e.outputAmount,i=e.txHash;return t||n?(0,E.jsx)(T,{transaction:e},i):null}))]}),N&&N.length>0&&A>0?(0,E.jsx)(m.Z,{canPreviousPage:O,gotoPage:M,pageIndex:u,pager:k,canNextPage:I}):null]}):(0,E.jsxs)("div",{className:"w-full h-[200px] flex flex-col justify-center items-center border border-v2-lily/5 rounded-lg space-y-2",children:[(0,E.jsx)("p",{className:"text-sm text-v2-lily/50",children:"View History"}),(0,E.jsx)(p.T,{})]})},B=n(80994),S=n(13170),H=n(72282),D=n(22466),K=!0,q=function(){var e=(0,D.V)(),t=(0,i.Z)(e,2),n=t[0],a=t[1],l=(0,H.hv)().appDomain,c=(0,o.gZ)().fetchTokenAccounts;return(0,s.useEffect)((function(){n&&a&&c([n.address,a.address,S.W4])}),[n,a,c]),(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(r.PB,{title:"Swap"}),(0,E.jsxs)("div",{className:"w-full z-10",children:[(0,E.jsx)(B.Z,{inToken:n,outToken:a}),(0,H.mD)(l)&&l.container.leftContainerHistories&&l.container.leftContainerHistories.current&&(0,u.createPortal)((0,E.jsx)(C,{}),l.container.leftContainerHistories.current),(0,H.mD)(l)&&l.container.bottomPageHistories&&l.container.bottomPageHistories.current&&(0,u.createPortal)((0,E.jsx)(C,{}),l.container.bottomPageHistories.current)]})]})}},54950:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/swap/[inOut]",function(){return n(19943)}])}},function(e){e.O(0,[3215,4518,4669,5478,1963,7240,4374,994,9774,2888,179],(function(){return t=54950,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=[inOut]-ea1a366592c5b9bb.js.map