"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7763],{7763:function(e,t,r){r.r(t),r.d(t,{ACTION_COLOR_MAP:function(){return W},AdvancedTradingView:function(){return Y},BE_API_KEY:function(){return m},BirdeyePriceSubscriber:function(){return C},CHAOS_ENDPOINT_BASE_URL:function(){return A},CHAOS_IDS:function(){return P},CHAOS_SUBSCRIPTION_MESSAGE:function(){return N},CHAOS_WEBSOCKET_URL:function(){return I},chaosWebsocket:function(){return L},dissectFromToAddress:function(){return D},getChannelString:function(){return T},getFromToAddress:function(){return B},getNextBarTime:function(){return p},makeApiRequest:function(){return b},parseResolution:function(){return _},subscribeOnStream:function(){return j},unsubscribeFromStream:function(){return X}});var n=r(69842),s=(r(77958),r(32332)),o=(r(84522),r(57818)),i=r(25633),a=r(56155),c=r(93981),l=r(13838),u=r(79989),d=r(29541),h=r(3872),f=r(11805),m="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE2NzI5MDEwNzZ9.c66gFnI20ymHoPWapB0JgISzqDIK6Q_Zg0oAVp8Ssyc";function b(e){return(0,a.Cr)(this,null,(function*(){try{return(yield fetch(`https://public-api.birdeye.so/${e}`,{headers:{"X-API-KEY":m}})).json()}catch(t){throw new Error(`Birdeye request error: ${t.status}`)}}))}var g={1:"1m",3:"3m",5:"5m",15:"15m",30:"30m",60:"1H",120:"2H",240:"4H","1D":"1D","1W":"1W"};function _(e){return e&&g[e]?g[e]:g[1]}function p(e,t="1D"){if(!e)return;const r=parseInt(t.slice(0,-1),10);let n;switch(t.slice(-1)){case"W":n=6048e5*r+e.time;break;case"D":n=864e5*r+e.time;break;case"H":n=36e5*r+e.time;break;case"m":n=6e4*r+e.time;break;default:throw new Error("Unhandle resolution in getNextBarTime")}return n}var v=new Map,y=class e{constructor(){this.debug=!1}setDebug(e){this.debug=e}getNewSocket(t=2){return(0,a.Cr)(this,null,(function*(){return e.socket=e.socket||new WebSocket(`wss://public-api.birdeye.so/socket?x-api-key=${m}`,"echo-protocol"),new Promise(((r,n)=>(0,a.Cr)(this,null,(function*(){let s=5;for(;s>0;){if(yield(0,i.gw)(500),e.socket&&e.socket.readyState===e.socket.OPEN)return r(e.socket);s--}if(t>0){const e=yield this.getNewSocket(t-1);if(e instanceof WebSocket)return r(e)}n({status:"error"})}))))}))}subscribeOnStream(e,t,r,n,s,o,i){return(0,a.Cr)(this,null,(function*(){const o=T(e.address,t.address,r),c={id:s,callback:n};let l=v.get(o);if(l)return void l.handlers.push(c);const u=yield this.getNewSocket();if(!(u instanceof WebSocket))throw new Error("Failed to init WebSocket connection to Birdeye");l={subscriberUID:s,resolution:r,lastBar:i,handlers:[c],socket:u},v.set(o,l),this.debug&&console.log("[subscribeBars]: Subscribe to streaming. Channel:",o);const d={type:"SUBSCRIBE_BASE_QUOTE_PRICE",data:{chartType:r,baseAddress:e.address,quoteAddress:t.address}};l.socket.send(JSON.stringify(d)),l.socket.addEventListener("message",(n=>{const s=JSON.parse(n.data);if("BASE_QUOTE_PRICE_DATA"!==s.type)return;const o=T(e.address,t.address,r),i=v.get(o);if(void 0===i)return;const c=i.lastBar;if(!c)return;const l=1e3*s.data.unixTime,u=p(c,r);let d=null;if(u&&l>=u)d={time:u,open:s.data.o,high:s.data.h,low:s.data.l,close:s.data.c,volume:s.data.v},this.debug&&console.log("[socket] Generate new bar",d);else{const e=s.data.h,t=s.data.l,r=s.data.c,n=s.data.v;d=(0,a.EZ)((0,a.ih)({},c),{high:Math.max(c.high,e),low:Math.min(c.low,t),close:r,volume:n}),this.debug&&console.log("[socket] Update the latest bar by price",r)}i.lastBar=d,d&&i.handlers.forEach((e=>e.callback(d)))}))}))}unsubscribeFromStream(t){var r;for(const n of v.keys()){const s=v.get(n);if(!s)return;const o=s.handlers.findIndex((e=>e.id===t));if(-1!==o&&(s.handlers.splice(o,1),0===s.handlers.length)){this.debug&&console.log("[unsubscribeBars]: Unsubscribe from streaming. Channel:",n);const t={type:"UNSUBSCRIBE_BASE_QUOTE_PRICE"};s.socket.send(JSON.stringify(t)),null==(r=e.socket)||r.close(),v.delete(n);break}}}};y.socket=null;var C=y,w=new Map,E={supported_resolutions:["1","3","5","15","30","60","120","240","1D","1W"],exchanges:[]};function B(e,t){return`address:${e}/${t}`}function D(e){return e.replace("address:","").split("/")}function T(e,t,r){return`0~${e}~${t}~${r}`}var S=function(e,t){const r=new C;return{onReady:e=>{t&&console.log("[onReady]: Method call"),setTimeout((()=>e(E)))},searchSymbols:(e,t,r,n)=>(0,a.Cr)(this,null,(function*(){})),resolveSymbol:(t,r,n,s)=>(0,a.Cr)(this,null,(function*(){const[n,s]=D(t),[o,i]=[e(n),e(s)],c=`${null==o?void 0:o.address}/${null==i?void 0:i.address}`,l={address:t,ticker:c,name:c,description:c,type:"",session:"24x7",timezone:"Etc/UTC",minmov:1,pricescale:(0,a.f3)(10,16),has_intraday:!0,has_no_volume:!0,visible_plots_set:"ohlc",has_weekly_and_monthly:!1,supported_resolutions:E.supported_resolutions,volume_precision:2,data_status:"streaming",full_name:c,exchange:"",listed_exchange:"",format:"price"};r(l)})),getBars:(r,n,s,o,i)=>(0,a.Cr)(this,null,(function*(){const{from:c,to:l,firstDataRequest:u}=s;t&&console.log("[getBars]: Method call",{symbolInfo:r,resolution:n,time_from:c,time_to:l});const[d,h]=D(r.address),[f,m]=[e(d),e(h)];if(!f||!m)throw new Error("Token info not found");const g=new URLSearchParams({base_address:f.address,quote_address:m.address,type:_(n),time_from:String(c),time_to:String(l)});try{const e=yield b(`defi/ohlcv/base_quote?${g.toString()}`);if(!e.success||0===e.data.items.length)return void o([],{noData:!0});let r=[];e.data.items.forEach((e=>{e.unixTime>=c&&e.unixTime<l&&r.push({time:1e3*e.unixTime,low:e.l,high:e.h,open:e.o,close:e.c,volume:e.vBase})}));const s=T(f.address,m.address,n);u&&w.set(s,(0,a.ih)({},r[r.length-1])),t&&console.log(`[getBars]: returned ${r.length} bar(s)`),o(r,{noData:!1})}catch(p){t&&console.log("[getBars]: Get error",p),i(String(p))}})),subscribeBars:(n,s,o,i,a)=>{t&&console.log("[subscribeBars]: Method call with subscriberUID:",i),t&&r.setDebug(t);const[c,l]=D(n.address),[u,d]=[e(c),e(l)];if(!u||!d)throw new Error("Token info not found");const h=T(u.address,d.address,s);r.subscribeOnStream(u,d,_(s),o,i,a,w.get(h))},unsubscribeBars:e=>{t&&console.log("[unsubscribeBars]",e),r.unsubscribeFromStream(e)}}};var k=({value:e,maxSuffix:t})=>{const[r,n,s]=((e,t=6)=>{if(0===e)return[0,"0","0"];const r=l.Z.ceil(new l.Z(-1).mul(l.Z.log10(l.Z.abs(e)))).toNumber();if(new l.Z(e).gte(1e-4)){const[t,r]=new l.Z(e).toSignificantDigits(4).toFixed().split(".");return[0,t||"",r||""]}const n=new l.Z(e).toFixed().slice(0,r+2),s=new l.Z(e).toFixed().slice(1+r).slice(0,t);return[r,n,s]})(e);return new l.Z(e).gte(1e-4)?e.toFixed(s.length):"0.0"+function(e){const t=["\u2080","\u2081","\u2082","\u2083","\u2084","\u2085","\u2086","\u2087","\u2088","\u2089"],r=e.toString();let n="";for(let s=0;s<r.length;s++){const e=t[parseInt(r.charAt(s),10)];e&&(n+=e)}return n}(r-1)+s.slice(0,t)},I="wss://history.oraclesecurity.org/trading-view/stream",A="https://history.oraclesecurity.org",N={a:"subscribe",ch:["btcusd","ethusd","solusd"]},P={So11111111111111111111111111111111111111112:"SOLUSD","7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs":"ETHUSD","3NZ9JMVBmGAqocybic2c7LQCJScmgsAZ6vQqTDzcqmJh":"BTCUSD"},U={1:"1",2:"2",5:"5",15:"15",30:"30",60:"1H",120:"2H",240:"4H",360:"6H",720:"12H","1D":"1D","1M":"1M"},V=e=>e&&U[e]?U[e]:U[1];function x(e){return new Promise((t=>setTimeout(t,e)))}var L=new class{constructor(){this.channelToSubscription=new Map}createSocket(e=2){return(0,a.Cr)(this,null,(function*(){return this.socket=this.socket?this.socket:new WebSocket(I),new Promise(((t,r)=>(0,a.Cr)(this,null,(function*(){let n=5;for(;n>0;){if(yield x(500),this.socket&&this.socket.readyState===this.socket.OPEN)return t(this.socket);n--}if(e>0){const r=yield this.createSocket(e-1);if(r instanceof WebSocket)return t(r)}r({status:"error"})}))))}))}closeSocket(){return(0,a.Cr)(this,null,(function*(){this.socket&&(this.socket.close(),this.socket=void 0)}))}subscribeOnStream(e,t,r,n,o,i){return(0,a.Cr)(this,null,(function*(){const o=`0~${e.name}~${t}`,c={id:n,callback:r};let l=this.channelToSubscription.get(o);l={subscriberUID:n,resolution:t,lastBar:i,handlers:[c],unsubscribePrice:()=>{}},this.channelToSubscription.set(o,l);const u=(0,s.o_)(e.name),d=s.e_.sub(u,(()=>{const r=s.e_.get(u);if(r){const{price:n,time:s}=r,o=`0~${e.name}~${t}`,i=this.channelToSubscription.get(o);if(void 0===i)return;const c=i.lastBar,l=function(e,t){let r;r="D"===t.slice(-1)?864e5+e.time:60*Number(t)*1e3+e.time;return r}(c,t);let u;s>=l?(u={time:l,open:c.close,high:n,low:n,close:n},"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.log("[socket] Generate new bar",u)):(u=(0,a.EZ)((0,a.ih)({},c),{high:Math.max(c.high,n),low:Math.min(c.low,n),close:n}),"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.log("[socket] Update the latest bar by price",n)),i.lastBar=u,i.handlers.forEach((e=>e.callback(u)))}}));l.unsubscribePrice=d}))}unsubscribeFromStream(e){return(0,a.Cr)(this,null,(function*(){for(const t of this.channelToSubscription.keys()){const r=this.channelToSubscription.get(t);null==r||r.unsubscribePrice();if(-1!==(null==r?void 0:r.handlers.findIndex((t=>t.id===e)))){"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.log("[unsubscribeBars]: Unsubscribe from streaming. Channel:",t),this.channelToSubscription.delete(t);break}}}))}},M={supported_resolutions:["1","5","15","30","60","120","240","360","720","1D","1M"]},$=new Map,G=()=>({onReady:e=>{"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.error("[onReady]: Method call"),setTimeout((()=>e(M)))},searchSymbols:()=>(0,a.Cr)(void 0,null,(function*(){"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.error("[searchSymbols]: Method call")})),resolveSymbol:(e,t)=>(0,a.Cr)(void 0,null,(function*(){"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.error("[resolveSymbol]: Method call",e),t({name:e,ticker:e,description:e,type:"",session:"24x7",timezone:"Etc/UTC",minmov:1,pricescale:(0,a.f3)(10,2),has_intraday:!0,has_no_volume:!0,visible_plots_set:"ohlc",has_weekly_and_monthly:!0,supported_resolutions:M.supported_resolutions,volume_precision:2,data_status:"streaming",full_name:e,exchange:"Chaos",listed_exchange:"",format:"price"})})),getBars:(e,t,r,n,s)=>(0,a.Cr)(void 0,null,(function*(){const{from:o,to:i,firstDataRequest:c}=r;"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.log("[getBars]: Method call",e,t,r);const l=new URLSearchParams({feed:e.name,type:V(t),from:(1e3*o).toString(),till:(1e3*i).toString()});try{const r=yield fetch(`${A}/trading-view/data?${l.toString()}`);if("1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.log("[getBars]: Get Chaos Historical Data",r.json()),!r.ok)return void n([],{noData:!0});const s=yield r.json();if(!s.result||!s.result.length)return void n([],{noData:!0});let u=[];s.result.forEach((e=>{e.time>=1e3*o&&e.time<1e3*i&&(u=[...u,{time:e.time,low:e.low,high:e.high,open:e.open,close:e.close}])})),c&&$.set(e.ticker+t,(0,a.ih)({},u[u.length-1])),n(u,{noData:!1})}catch(u){"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.log("[getBars]: Get Chaos Historical Data Error",u),s(String(u))}})),subscribeBars:(e,t,r,n,s)=>(0,a.Cr)(void 0,null,(function*(){"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.error("[subscribeBars]: Method call with listenerGuid:",n);const o=$.get(e.ticker+t);if(!o)throw new Error("ChaosTVDataFeed: lastBar is not found");yield L.subscribeOnStream(e,t,r,n,s,o)})),unsubscribeBars:e=>(0,a.Cr)(void 0,null,(function*(){"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.error("[unsubscribeBars]: Method call with listenerGuid:",e),yield L.unsubscribeFromStream(e)}))}),O=new Map;function R(e,t){const{price:r,time:n}=t,s=r,o=1e3*n,i=e,c=O.get(i);if(!c)return;const l=c.lastDailyBar,u=function(e){const t=new Date(1e3*e);return t.setDate(t.getDate()+1),t.getTime()/1e3}(l.time);let d;o>=u?(d={time:u,open:s,high:s,low:s,close:s},"1"===f.env.DEBUG_ADVANCED_TV&&console.log("[stream] Generate new bar",d)):(d=(0,a.EZ)((0,a.ih)({},l),{high:Math.max(l.high,s),low:Math.min(l.low,s),close:s}),"1"===f.env.DEBUG_ADVANCED_TV&&console.log("[stream] Update the latest bar by price",s)),c.lastDailyBar=d,c.handlers.forEach((e=>e.callback(d))),O.set(i,c)}function j(e,t,r,n,o,i){const a=e.ticker+t||"",c={id:n,callback:r};let l=O.get(a);l={subscriberUID:n,resolution:t,lastDailyBar:i,handlers:[c],unsub:()=>{}},O.set(a,l),"1"===f.env.DEBUG_ADVANCED_TV&&console.log("[subscribeBars]: Subscribe to streaming. Channel:",a);const u=(0,s.EA)(e.ticker),d=s.e_.sub(u,(()=>{const e=s.e_.get(u);e&&R(a,e)}));l.unsub=d}function X(e){for(const t of O.keys()){const r=O.get(t);null==r||r.unsub();if(-1!==r.handlers.findIndex((t=>t.id===e))){"1"===f.env.DEBUG_ADVANCED_TV&&console.log("[unsubscribeBars]: Unsubscribe from streaming. Channel:",t),O.delete(t);break}}}var F="https://benchmarks.pyth.network/v1/shims/tradingview",H=["1","2","5","15","30","60","120","240","360","720","1D"],Z=new Map;var q,J=()=>({onReady:e=>{"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.error("[onReady]: Method call"),h((e=>(0,a.Cr)(void 0,null,(function*(){try{const e=yield fetch(`${F}/config`);return yield e.json()}catch(t){e(t)}}))),{retries:5,minTimeout:1e3}).then((t=>{e((0,a.EZ)((0,a.ih)({},t),{supported_resolutions:H}))})).catch((e=>{"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.error(e)}))},searchSymbols:(e,t,r,n)=>{"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.error("[searchSymbols]: Method call"),h((t=>(0,a.Cr)(void 0,null,(function*(){try{const t=yield fetch(`${F}/search?query=${e}`);return yield t.json()}catch(r){return t(r)}}))),{retries:5,minTimeout:1e3}).then((e=>{n(e)})).catch((e=>{"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.error(e)}))},resolveSymbol:(e,t,r)=>{"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.error("[resolveSymbol]: Method call",e),h((t=>(0,a.Cr)(void 0,null,(function*(){try{const t=yield fetch(`${F}/symbols?symbol=${e}`),r=yield t.json(),{precisionToDisplay:n}=yield function(e){return(0,a.Cr)(this,null,(function*(){const t=((new Date).getTime()/1e3).toFixed(0),r=yield fetch(`${F}/history?symbol=${e.ticker}&from=${Number(t)-1e3}&to=${t}&resolution=15`),n=(yield r.json()).c[0];return{closePrice:n,precisionToDisplay:(0,i.y_)(n)}}))}(r);return{symbolInfo:(0,a.EZ)((0,a.ih)({},r),{supported_resolutions:H}),precisionToDisplay:n}}catch(r){return t(r)}}))),{retries:5,minTimeout:1e3}).then((({symbolInfo:e,precisionToDisplay:r})=>{t((0,a.EZ)((0,a.ih)({},e),{pricescale:(0,a.f3)(10,r)}))})).catch((t=>{"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.error("[resolveSymbol]: Cannot resolve symbol",e,t),r("Cannot resolve symbol")}))},getBars:(e,t,r,n,s)=>{const{from:o,to:i,firstDataRequest:c}=r;h((n=>(0,a.Cr)(void 0,null,(function*(){try{const n=yield fetch(`${F}/history?symbol=${e.ticker}&from=${r.from}&to=${r.to}&resolution=${t}`);return yield n.json()}catch(s){return n(s)}}))),{retries:5,minTimeout:1e3}).then((r=>{if("1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.log("[getBars]: Method call",e,t,o,i),0===r.t.length)return void n([],{noData:!0});const s=[];for(let e=0;e<r.t.length;++e)s.push({time:1e3*r.t[e],low:r.l[e],high:r.h[e],open:r.o[e],close:r.c[e]});c&&Z.set(e.ticker+t,(0,a.ih)({},s[s.length-1])),n(s,{noData:!1})})).catch((e=>{"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.error("[getBars]: Get error",e),s(e)}))},subscribeBars:(e,t,r,n,s)=>{"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.error("[subscribeBars]: Method call with subscriberUID:",n),j(e,t,r,n,0,Z.get(e.ticker+t))},unsubscribeBars:e=>{"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.error("[unsubscribeBars]: Method call with subscriberUID:",e),X(e)}}),W={long:{main:"#32DF7B",shade:"#32DF7BB3"},short:{main:"#EB5757",shade:"#EB5757B3"},tp:{main:"#00BCF0",shade:"#00BCF0B3"},sl:{main:"#00BCF0",shade:"#00BCF0B3"},lq:{main:"rgb(100,116,139)",shade:"rgb(100,116,139)"}},z={enableVolumeStudy:!0,useUserBrowserTime:!0,showSeriesOHLC:!0,showVolume:!0,showPriceSource:!0,showBarChange:!0,isMobile:!1},Q="TRADING_VIEW_STATE",K=e=>{window.localStorage.setItem(Q,JSON.stringify(e))};function Y({renderingId:e,datafeedObject:t,style:r,tvClassName:s,shadesClassName:h,desktopOverlayExplanation:f,positions:m,opt:b,hasFocus:g,favoriteIntervals:_}){const p=(0,o.XA)(),[v,y]=(0,o._)("lastInterval","15"),C=(0,c.useMemo)((()=>(0,a.EZ)((0,a.ih)((0,a.ih)({},z),b),{isMobile:p})),[b,p]),w=(0,c.useMemo)((()=>`${e}-tradingview-chart`),[e]),E=(0,c.useRef)(null),D=(0,c.useRef)(null),{getTokenInfo:T}=(0,n.Bn)(),I=(0,c.useRef)(null),A=(0,c.useRef)(),[N,P]=(0,c.useState)(0),U=(0,c.useMemo)((()=>{var e,r;return A.current=t,[null==(e=null==t?void 0:t.baseTokenInfo)?void 0:e.address,null==(r=null==t?void 0:t.quoteTokenInfo)?void 0:r.address,null==t?void 0:t.pythId,null==t?void 0:t.subscriptionId,null==t?void 0:t.feedId,N].filter(Boolean).join("_")}),[t]),{symbol:V,tickerName:x,datafeed:L}=(0,c.useMemo)((()=>{if("pythId"in t)return{symbol:t.symbol,tickerName:t.tickerName,datafeed:J()};if("feedId"in t)return{symbol:t.feedId,tickerName:t.feedId,datafeed:G()};const{baseTokenInfo:e,quoteTokenInfo:r}=t;return e&&r?(D.current||(D.current=S(T)),{symbol:B(e.address,r.address),tickerName:`${e.symbol}/${r.symbol}`,datafeed:D.current}):{symbol:null,tickerName:null,datafeed:null}}),[U,T]),[M,$]=(0,c.useState)(!1),[O,R]=(0,c.useState)(!1),j=(0,c.useRef)(0),[X,F]=(0,c.useState)(!1),H=(0,c.useRef)(null);(0,c.useEffect)((()=>{if(!x)return;let e={current:null};function t(){return(0,a.Cr)(this,null,(function*(){if(x&&!E.current&&!X&&V&&L&&(R(!1),document.getElementById(w)&&"TradingView"in window)){const t=["hide_left_toolbar_by_default","save_shortcut","create_volume_indicator_by_default"],r=["popup_hints","header_symbol_search","symbol_search_hot_key","header_compare","timeframes_toolbar","header_undo_redo","display_market_status"];p&&(r.push("vert_touch_drag_scroll"),r.push("axis_pressed_mouse_move_scale"));const n=(()=>{const e=window.localStorage.getItem(Q);return e?JSON.parse(e):void 0})(),s=new window.TradingView.widget({symbol:V,interval:v||"15",locale:"en",container:w,theme:"dark",autosize:!0,custom_css_url:"https://static.jup.ag/tv/css/tradingview.css",settings_overrides:{"chartEventsSourceProperties.breaks.visible":!1,"paneProperties.legendProperties.showSeriesTitle":!1,"paneProperties.background":"#131B24","paneProperties.backgroundType":"solid","paneProperties.legendProperties.backgroundTransparency":50,"paneProperties.legendProperties.showSeriesOHLC":C.showSeriesOHLC,"paneProperties.legendProperties.showBarChange":C.showBarChange,"paneProperties.legendProperties.showVolume":C.showVolume,"paneProperties.legendProperties.showPriceSource":C.showPriceSource,"scalesProperties.showSeriesPrevCloseValue":!1,"scalesProperties.showSymbolLabels":!1,"scalesProperties.showStudyPlotLabels":!1,"scalesProperties.showFundamentalNameLabel":!1,"scalesProperties.fontSize":C.isMobile?7:12},overrides:{"mainSeriesProperties.highLowAvgPrice.highLowPriceLabelsVisible":!0,"mainSeriesProperties.highLowAvgPrice.highLowPriceLinesVisible":!0},width:"100%",height:"100%",datafeed:L,library_path:"https://static.jup.ag/tv/",disabled_features:r,enabled_features:t,custom_formatters:{priceFormatterFactory:()=>({format:e=>{const t=k({value:e,maxSuffix:6}),r=(0,i.y_)(e);return new l.Z(e).gt(1e-4)?i.uf.format(e.toString(),r):t}})},favorites:{intervals:_&&_.length?_:["1","30","1h"],chartTypes:["Candles","Area","Columns"]},saved_data:n});M||(e.current=window.setInterval((()=>{var t;try{if(j.current>25)return F(!0),void(e.current&&clearInterval(e.current));null==(t=E.current)||t.chartsCount(),e.current&&clearInterval(e.current)}catch(r){String(null==r?void 0:r.message).includes("chartsCount")||console.error(r),j.current=j.current+1}}),300)),s.onChartReady((()=>{E.current=s,$(!0),H.current=Date.now(),A.current&&("pythId"in A.current?s.activeChart().setSymbol(A.current.symbol):"feedId"in A.current?s.activeChart().setSymbol(A.current.feedId):A.current.baseTokenInfo&&A.current.quoteTokenInfo&&E.current.activeChart().setSymbol(B(A.current.baseTokenInfo.address,A.current.quoteTokenInfo.address)));const t=s.activeChart().getAllStudies().find((e=>"Volume"===e.name));if(s.applyOverrides({"mainSeriesProperties.highLowAvgPrice.highLowPriceLabelsVisible":!0,"mainSeriesProperties.highLowAvgPrice.highLowPriceLinesVisible":!0}),(null==b?void 0:b.enableVolumeStudy)&&!p?t||s.activeChart().createStudy("Volume"):t&&s.activeChart().removeEntity(t.id),s.subscribe("onAutoSaveNeeded",(()=>{s.save(K)})),s.subscribe("onTick",(()=>{H.current=Date.now()})),s.activeChart().dataReady((()=>{setTimeout((()=>{R(!0)}),250)})),s.activeChart().setResolution(v),s.activeChart().onIntervalChanged().subscribe(null,(e=>{y(e)})),M||(e.current=window.setInterval((()=>{try{if(j.current>50)return F(!0),void(e.current&&clearInterval(e.current));null==s||s.chartsCount(),e.current&&clearInterval(e.current)}catch(t){String(null==t?void 0:t.message).includes("chartsCount")||console.error(t),j.current=j.current+1}}),300)),e.current&&clearInterval(e.current),C.useUserBrowserTime&&E.current){const e=s.activeChart().getTimezoneApi(),t=60*(new Date).getTimezoneOffset()*1e3*-1,r=e.availableTimezones().find((e=>e.offset===t));e.setTimezone((null==r?void 0:r.id)||"Etc/UTC")}}))}}))}return q||(q=new Promise((e=>{const t=document.createElement("script");t.id="tradingview-widget-loading-script",t.src="https://static.jup.ag/tv/charting_library/charting_library/charting_library.js",t.type="text/javascript",t.onload=e,document.head.appendChild(t)}))).then((()=>{t()})),"TradingView"in window&&t(),()=>{var t;e.current&&clearInterval(e.current),null==(t=E.current)||t.remove(),E.current=null}}),[p,M]),(0,c.useEffect)((()=>{E.current&&("pythId"in t?E.current.activeChart().setSymbol(t.symbol):"feedId"in t?E.current.activeChart().setSymbol(t.feedId):t.baseTokenInfo&&t.quoteTokenInfo&&E.current.activeChart().setSymbol(B(t.baseTokenInfo.address,t.quoteTokenInfo.address)))}),[U]);const Z=(0,c.useCallback)((()=>{var e;null==(e=E.current)||e.remove(),$(!1),setTimeout((()=>{$(!0),P((e=>e+1))}),1e3)}),[]),{online:Y}=(0,u.Z)();return(0,c.useEffect)((()=>{const e=setInterval((()=>{g&&Y&&H.current&&Date.now()-H.current>6e4&&(console.log("Restarting charts..."),Z(),H.current=Date.now()+1e4)}),500);return()=>{clearInterval(e)}}),[g,Y,Z]),(({isLoaded:e,widget:t,positions:r})=>{const{wallet:s}=(0,n.Os)(),{connection:o}=(0,n.Bn)(),i=(0,c.useRef)([]);(0,c.useEffect)((()=>{t&&e?r&&r.length>0&&r.forEach((e=>{if(t&&!i.current.find((t=>t.id===e.id)))try{t.onChartReady((()=>{let r;const n=W[e.action].main,s=W[e.action].shade;"lq"===e.action?r=t.activeChart().createPositionLine():(r=t.activeChart().createOrderLine(),r.setCancelTooltip("Market close").onCancel(r,(t=>{e.onCloseAction&&(t.setText(`Closing ${e.label}...`),e.onCloseAction(e).finally((()=>{t.setText(e.label)})))})).setCancelButtonBackgroundColor(s).setCancelButtonBorderColor(n).setCancelButtonIconColor("#fff")),r.setPrice(e.price).setText(e.label).setQuantity(`$${e.sizeUsd}`).setLineColor(n).setBodyBackgroundColor(s).setBodyBorderColor(n).setQuantityBorderColor(n).setQuantityBackgroundColor(s).setBodyTextColor("#fff").setQuantityTextColor("#fff"),i.current.push({id:e.id,adapter:r})}))}catch(r){console.error(r)}})):i.current=[]}),[r,i,t,e,s,o]),(0,c.useEffect)((()=>{Array.isArray(r)&&0===r.length?i.current.forEach(((e,t)=>{e.adapter.remove(),i.current=[]})):i.current.forEach(((e,t)=>{if(!(null==r?void 0:r.find((t=>t.id===e.id)))&&e.adapter&&e.adapter.remove)try{e.adapter.remove()}catch(X){}finally{i.current.splice(t,1)}}))}),[r])})({positions:m,isLoaded:M&&O,widget:E.current}),(0,d.jsxs)("div",{ref:I,className:(0,i.cn)("flex-1 overflow-hidden relative transition-all"),style:X?{height:0}:(0,a.ih)({minHeight:200,height:"100%",width:"100%"},r),children:[(0,d.jsx)("div",{className:(0,i.cn)("absolute left-0 top-0 pointer-events-none transition-all h-full w-full",M&&O?"bg-transparent":`bg-v2-background ${h}`,"flex items-center justify-center"),children:M&&O?null:(0,d.jsx)(n.$j,{})}),(0,d.jsx)("div",{id:w,className:(0,i.cn)("w-full h-full",s,O?"opacity-100":"opacity-0"),style:(0,a.ih)({minHeight:200},r)}),f?(0,d.jsx)("div",{className:"hidden lg:flex absolute w-full bottom-10 lg:bottom-20 justify-center",children:(0,d.jsx)("div",{className:"w-[75%] text-xs text-v2-lily/60 font-semibold",children:(0,d.jsx)("div",{className:"flex text-center items-center justify-center",children:(0,d.jsx)("span",{children:f})})})}):null,f?(0,d.jsx)("div",{className:"hidden lg:flex h-[120px] mt-4 text-v2-lily/60",children:f}):null]})}}}]);
//# sourceMappingURL=7763-d6ce69433f79fa68.js.map